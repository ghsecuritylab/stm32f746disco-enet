ARM GAS  /tmp/ccUeKVGD.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"api_msg.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.recv_udp,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv5-sp-d16
  24              	recv_udp:
  25              	.LFB159:
  26              		.file 1 "Middlewares/Third_Party/LwIP/src/api/api_msg.c"
   1:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
   2:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Sequential API Internal module
   4:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
   5:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
   6:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
   7:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /*
   8:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
   9:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * All rights reserved.
  10:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  11:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Redistribution and use in source and binary forms, with or without modification,
  12:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * are permitted provided that the following conditions are met:
  13:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  14:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  15:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    this list of conditions and the following disclaimer.
  16:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  17:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    this list of conditions and the following disclaimer in the documentation
  18:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    and/or other materials provided with the distribution.
  19:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * 3. The name of the author may not be used to endorse or promote products
  20:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *    derived from this software without specific prior written permission.
  21:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  22:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  23:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  24:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  25:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  26:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  27:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  30:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  31:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * OF SUCH DAMAGE.
  32:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
ARM GAS  /tmp/ccUeKVGD.s 			page 2


  33:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * This file is part of the lwIP TCP/IP stack.
  34:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  35:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Author: Adam Dunkels <adam@sics.se>
  36:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  37:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
  38:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  39:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/opt.h"
  40:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  41:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN /* don't build if not configured for use in lwipopts.h */
  42:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  43:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/priv/api_msg.h"
  44:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  45:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/ip.h"
  46:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/ip_addr.h"
  47:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/udp.h"
  48:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/tcp.h"
  49:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/raw.h"
  50:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  51:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/memp.h"
  52:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/igmp.h"
  53:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/dns.h"
  54:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/mld6.h"
  55:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include "lwip/priv/tcpip_priv.h"
  56:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  57:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #include <string.h>
  58:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  59:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /* netconns are polled once per second (e.g. continue write on memory error) */
  60:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define NETCONN_TCP_POLL_INTERVAL 2
  61:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  62:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define SET_NONBLOCKING_CONNECT(conn, val)  do { if (val) { \
  63:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   (conn)->flags |= NETCONN_FLAG_IN_NONBLOCKING_CONNECT; \
  64:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** } else { \
  65:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   (conn)->flags &= ~ NETCONN_FLAG_IN_NONBLOCKING_CONNECT; }} while(0)
  66:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define IN_NONBLOCKING_CONNECT(conn) (((conn)->flags & NETCONN_FLAG_IN_NONBLOCKING_CONNECT) != 0)
  67:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  68:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /* forward declarations */
  69:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
  70:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
  71:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED         , 1
  72:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED_PARAM   , u8_t delayed
  73:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
  74:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED
  75:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define WRITE_DELAYED_PARAM
  76:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
  77:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t lwip_netconn_do_writemore(struct netconn *conn  WRITE_DELAYED_PARAM);
  78:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t lwip_netconn_do_close_internal(struct netconn *conn  WRITE_DELAYED_PARAM);
  79:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
  80:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  81:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
  82:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define TCPIP_APIMSG_ACK(m)   NETCONN_SET_SAFE_ERR((m)->conn, (m)->err)
  83:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
  84:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #define TCPIP_APIMSG_ACK(m)   do { NETCONN_SET_SAFE_ERR((m)->conn, (m)->err); sys_sem_signal(LWIP_A
  85:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
  86:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  87:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
  88:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** u8_t netconn_aborted;
  89:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
ARM GAS  /tmp/ccUeKVGD.s 			page 3


  90:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
  91:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
  92:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
  93:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Receive callback function for RAW netconns.
  94:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Doesn't 'eat' the packet, only copies it and sends it to
  95:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * conn->recvmbox
  96:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
  97:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see raw.h (struct raw_pcb.recv) for parameters and return value
  98:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
  99:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static u8_t
 100:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** recv_raw(void *arg, struct raw_pcb *pcb, struct pbuf *p,
 101:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     const ip_addr_t *addr)
 102:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 103:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct pbuf *q;
 104:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netbuf *buf;
 105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 106:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 107:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(addr);
 108:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 109:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 110:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((conn != NULL) && sys_mbox_valid(&conn->recvmbox)) {
 111:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 112:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     int recv_avail;
 113:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_GET(conn->recv_avail, recv_avail);
 114:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((recv_avail + (int)(p->tot_len)) > conn->recv_bufsize) {
 115:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       return 0;
 116:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 117:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 118:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* copy the whole packet into new pbufs */
 119:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     q = pbuf_alloc(PBUF_RAW, p->tot_len, PBUF_RAM);
 120:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (q != NULL) {
 121:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (pbuf_copy(q, p) != ERR_OK) {
 122:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         pbuf_free(q);
 123:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         q = NULL;
 124:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 125:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 126:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 127:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (q != NULL) {
 128:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       u16_t len;
 129:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf = (struct netbuf *)memp_malloc(MEMP_NETBUF);
 130:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (buf == NULL) {
 131:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         pbuf_free(q);
 132:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return 0;
 133:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 134:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 135:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->p = q;
 136:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->ptr = q;
 137:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(buf->addr, *ip_current_src_addr());
 138:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->port = pcb->protocol;
 139:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 140:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = q->tot_len;
 141:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (sys_mbox_trypost(&conn->recvmbox, buf) != ERR_OK) {
 142:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netbuf_delete(buf);
 143:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return 0;
 144:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 145:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 146:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         SYS_ARCH_INC(conn->recv_avail, len);
ARM GAS  /tmp/ccUeKVGD.s 			page 4


 147:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 148:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Register event with callback */
 149:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_RCVPLUS, len);
 150:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 151:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 152:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 153:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 154:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return 0; /* do not eat the packet */
 155:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 156:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW*/
 157:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 158:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
 159:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 160:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Receive callback function for UDP netconns.
 161:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Posts the packet to conn->recvmbox or deletes it on memory error.
 162:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 163:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see udp.h (struct udp_pcb.recv) for parameters
 164:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 165:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 166:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** recv_udp(void *arg, struct udp_pcb *pcb, struct pbuf *p,
 167:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****    const ip_addr_t *addr, u16_t port)
 168:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
  27              		.loc 1 168 0
  28              		.cfi_startproc
  29              		@ args = 4, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 24
  35              		.cfi_offset 4, -24
  36              		.cfi_offset 5, -20
  37              		.cfi_offset 6, -16
  38              		.cfi_offset 7, -12
  39              		.cfi_offset 8, -8
  40              		.cfi_offset 14, -4
  41 0004 0446     		mov	r4, r0
  42 0006 1546     		mov	r5, r2
  43 0008 9846     		mov	r8, r3
 169:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netbuf *buf;
 170:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 171:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u16_t len;
 172:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 173:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   int recv_avail;
 174:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 175:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 176:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb); /* only used for asserts... */
 177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp must have a pcb argument", pcb != NULL);
  44              		.loc 1 177 0
  45 000a 0E46     		mov	r6, r1
  46 000c 79B3     		cbz	r1, .L13
  47              	.LVL1:
  48              	.L2:
 178:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp must have an argument", arg != NULL);
  49              		.loc 1 178 0
  50 000e 002C     		cmp	r4, #0
  51 0010 34D0     		beq	.L14
ARM GAS  /tmp/ccUeKVGD.s 			page 5


  52              	.L3:
  53              	.LVL2:
 179:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 180:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 181:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
  54              		.loc 1 181 0
  55 0012 002C     		cmp	r4, #0
  56 0014 39D0     		beq	.L15
 182:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pbuf_free(p);
 183:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 184:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 185:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 186:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp: recv for wrong pcb!", conn->pcb.udp == pcb);
  57              		.loc 1 186 0
  58 0016 6368     		ldr	r3, [r4, #4]
  59 0018 B342     		cmp	r3, r6
  60 001a 05D0     		beq	.L6
  61              		.loc 1 186 0 is_stmt 0 discriminator 1
  62 001c 244B     		ldr	r3, .L19
  63 001e BA22     		movs	r2, #186
  64 0020 2449     		ldr	r1, .L19+4
  65 0022 2548     		ldr	r0, .L19+8
  66 0024 FFF7FEFF 		bl	printf
  67              	.LVL3:
  68              	.L6:
 187:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 188:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 189:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   SYS_ARCH_GET(conn->recv_avail, recv_avail);
 190:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->recvmbox) ||
 191:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((recv_avail + (int)(p->tot_len)) > conn->recv_bufsize)) {
 192:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else  /* LWIP_SO_RCVBUF */
 193:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->recvmbox)) {
  69              		.loc 1 193 0 is_stmt 1
  70 0028 04F11007 		add	r7, r4, #16
  71 002c 3846     		mov	r0, r7
  72 002e FFF7FEFF 		bl	sys_mbox_valid
  73              	.LVL4:
  74 0032 70B3     		cbz	r0, .L16
 194:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 195:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pbuf_free(p);
 196:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 197:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 198:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 199:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   buf = (struct netbuf *)memp_malloc(MEMP_NETBUF);
  75              		.loc 1 199 0
  76 0034 0620     		movs	r0, #6
  77 0036 FFF7FEFF 		bl	memp_malloc
  78              	.LVL5:
 200:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (buf == NULL) {
  79              		.loc 1 200 0
  80 003a 0646     		mov	r6, r0
  81              	.LVL6:
  82 003c 70B3     		cbz	r0, .L17
 201:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pbuf_free(p);
 202:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 203:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 204:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->p = p;
ARM GAS  /tmp/ccUeKVGD.s 			page 6


  83              		.loc 1 204 0
  84 003e 0560     		str	r5, [r0]
 205:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->ptr = p;
  85              		.loc 1 205 0
  86 0040 4560     		str	r5, [r0, #4]
 206:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     ip_addr_set(&buf->addr, addr);
  87              		.loc 1 206 0
  88 0042 B8F1000F 		cmp	r8, #0
  89 0046 2DD0     		beq	.L11
  90              		.loc 1 206 0 is_stmt 0 discriminator 1
  91 0048 D8F80030 		ldr	r3, [r8]
  92              	.L9:
  93              		.loc 1 206 0 discriminator 4
  94 004c B360     		str	r3, [r6, #8]
 207:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->port = port;
  95              		.loc 1 207 0 is_stmt 1 discriminator 4
  96 004e BDF81830 		ldrh	r3, [sp, #24]
  97 0052 B381     		strh	r3, [r6, #12]	@ movhi
 208:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETBUF_RECVINFO
 209:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
 210:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* get the UDP header - always in the first pbuf, ensured by udp_input */
 211:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       const struct udp_hdr* udphdr = (const struct udp_hdr*)ip_next_header_ptr();
 212:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_CHECKSUM_ON_COPY
 213:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->flags = NETBUF_FLAG_DESTADDR;
 214:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
 215:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_set(&buf->toaddr, ip_current_dest_addr());
 216:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       buf->toport_chksum = udphdr->dest;
 217:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 218:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETBUF_RECVINFO */
 219:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 220:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 221:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   len = p->tot_len;
  98              		.loc 1 221 0 discriminator 4
  99 0054 2D89     		ldrh	r5, [r5, #8]
 100              	.LVL7:
 222:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_trypost(&conn->recvmbox, buf) != ERR_OK) {
 101              		.loc 1 222 0 discriminator 4
 102 0056 3146     		mov	r1, r6
 103 0058 3846     		mov	r0, r7
 104              	.LVL8:
 105 005a FFF7FEFF 		bl	sys_mbox_trypost
 106              	.LVL9:
 107 005e 18BB     		cbnz	r0, .L18
 223:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netbuf_delete(buf);
 224:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 225:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 226:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 227:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_INC(conn->recv_avail, len);
 228:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 229:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Register event with callback */
 230:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(conn, NETCONN_EVT_RCVPLUS, len);
 108              		.loc 1 230 0
 109 0060 A36A     		ldr	r3, [r4, #40]
 110 0062 CBB1     		cbz	r3, .L1
 111              		.loc 1 230 0 is_stmt 0 discriminator 1
 112 0064 2A46     		mov	r2, r5
 113 0066 0021     		movs	r1, #0
ARM GAS  /tmp/ccUeKVGD.s 			page 7


 114 0068 2046     		mov	r0, r4
 115 006a 9847     		blx	r3
 116              	.LVL10:
 117 006c 14E0     		b	.L1
 118              	.LVL11:
 119              	.L13:
 177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_udp must have an argument", arg != NULL);
 120              		.loc 1 177 0 is_stmt 1 discriminator 1
 121 006e 104B     		ldr	r3, .L19
 122              	.LVL12:
 123 0070 B122     		movs	r2, #177
 124              	.LVL13:
 125 0072 1249     		ldr	r1, .L19+12
 126              	.LVL14:
 127 0074 1048     		ldr	r0, .L19+8
 128              	.LVL15:
 129 0076 FFF7FEFF 		bl	printf
 130              	.LVL16:
 131 007a C8E7     		b	.L2
 132              	.L14:
 178:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 133              		.loc 1 178 0 discriminator 1
 134 007c 0C4B     		ldr	r3, .L19
 135 007e B222     		movs	r2, #178
 136 0080 0F49     		ldr	r1, .L19+16
 137 0082 0D48     		ldr	r0, .L19+8
 138 0084 FFF7FEFF 		bl	printf
 139              	.LVL17:
 140 0088 C3E7     		b	.L3
 141              	.LVL18:
 142              	.L15:
 182:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 143              		.loc 1 182 0
 144 008a 2846     		mov	r0, r5
 145 008c FFF7FEFF 		bl	pbuf_free
 146              	.LVL19:
 183:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 147              		.loc 1 183 0
 148 0090 02E0     		b	.L1
 149              	.L16:
 195:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 150              		.loc 1 195 0
 151 0092 2846     		mov	r0, r5
 152 0094 FFF7FEFF 		bl	pbuf_free
 153              	.LVL20:
 154              	.L1:
 231:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 232:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 155              		.loc 1 232 0
 156 0098 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 157              	.LVL21:
 158              	.L17:
 201:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 159              		.loc 1 201 0
 160 009c 2846     		mov	r0, r5
 161              	.LVL22:
 162 009e FFF7FEFF 		bl	pbuf_free
ARM GAS  /tmp/ccUeKVGD.s 			page 8


 163              	.LVL23:
 202:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 164              		.loc 1 202 0
 165 00a2 F9E7     		b	.L1
 166              	.LVL24:
 167              	.L11:
 206:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     buf->port = port;
 168              		.loc 1 206 0
 169 00a4 0023     		movs	r3, #0
 170 00a6 D1E7     		b	.L9
 171              	.LVL25:
 172              	.L18:
 223:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 173              		.loc 1 223 0
 174 00a8 3046     		mov	r0, r6
 175 00aa FFF7FEFF 		bl	netbuf_delete
 176              	.LVL26:
 224:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 177              		.loc 1 224 0
 178 00ae F3E7     		b	.L1
 179              	.L20:
 180              		.align	2
 181              	.L19:
 182 00b0 00000000 		.word	.LC0
 183 00b4 9C000000 		.word	.LC4
 184 00b8 54000000 		.word	.LC2
 185 00bc 30000000 		.word	.LC1
 186 00c0 7C000000 		.word	.LC3
 187              		.cfi_endproc
 188              	.LFE159:
 190              		.section	.text.setup_tcp,"ax",%progbits
 191              		.align	1
 192              		.syntax unified
 193              		.thumb
 194              		.thumb_func
 195              		.fpu fpv5-sp-d16
 197              	setup_tcp:
 198              	.LFB164:
 233:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 234:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 235:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 236:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 237:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Receive callback function for TCP netconns.
 238:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Posts the packet to conn->recvmbox, but doesn't delete it on errors.
 239:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 240:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.recv) for parameters and return value
 241:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 242:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 243:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** recv_tcp(void *arg, struct tcp_pcb *pcb, struct pbuf *p, err_t err)
 244:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u16_t len;
 247:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 248:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
 249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have a pcb argument", pcb != NULL);
 250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have an argument", arg != NULL);
 251:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
ARM GAS  /tmp/ccUeKVGD.s 			page 9


 252:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 255:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 256:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp: recv for wrong pcb!", conn->pcb.tcp == pcb);
 257:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 258:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->recvmbox)) {
 259:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* recvmbox already deleted */
 260:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (p != NULL) {
 261:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recved(pcb, p->tot_len);
 262:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       pbuf_free(p);
 263:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 264:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_OK;
 265:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 266:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Unlike for UDP or RAW pcbs, don't check for available space
 267:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      using recv_avail since that could break the connection
 268:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      (data is already ACKed) */
 269:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 270:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* don't overwrite fatal errors! */
 271:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (err != ERR_OK) {
 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 273:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 274:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 275:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (p != NULL) {
 276:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     len = p->tot_len;
 277:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 278:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     len = 0;
 279:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 280:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 281:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_trypost(&conn->recvmbox, p) != ERR_OK) {
 282:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't deallocate p: it is presented to us later again from tcp_fasttmr! */
 283:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 284:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 285:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 286:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_INC(conn->recv_avail, len);
 287:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 288:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Register event with callback */
 289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(conn, NETCONN_EVT_RCVPLUS, len);
 290:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 291:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 292:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 293:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 294:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 295:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 296:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Poll callback function for TCP netconns.
 297:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Wakes up an application thread that waits for a connection to close
 298:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * or data to be sent. The application thread then takes the
 299:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * appropriate action to go on.
 300:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 301:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Signals the conn->sem.
 302:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * netconn_close waits for conn->sem if closing failed.
 303:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 304:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.poll) for parameters and return value
 305:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 306:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 307:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** poll_tcp(void *arg, struct tcp_pcb *pcb)
 308:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
ARM GAS  /tmp/ccUeKVGD.s 			page 10


 309:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 310:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
 312:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", (conn != NULL));
 313:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn->state == NETCONN_WRITE) {
 315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 316:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (conn->state == NETCONN_CLOSE) {
 317:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_SO_SNDTIMEO && !LWIP_SO_LINGER
 318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->current_msg && conn->current_msg->msg.sd.polls_left) {
 319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.sd.polls_left--;
 320:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 321:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* !LWIP_SO_SNDTIMEO && !LWIP_SO_LINGER */
 322:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     lwip_netconn_do_close_internal(conn  WRITE_DELAYED);
 323:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 324:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* @todo: implement connect timeout here? */
 325:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 326:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Did a nonblocking write fail before? Then check available write-space. */
 327:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn->flags & NETCONN_FLAG_CHECK_WRITESPACE) {
 328:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* If the queued byte- or pbuf-count drops below the configured low-water limit,
 329:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        let select mark this pcb as writable again. */
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((conn->pcb.tcp != NULL) && (tcp_sndbuf(conn->pcb.tcp) > TCP_SNDLOWAT) &&
 331:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 332:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 334:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 335:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 336:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 337:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 338:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 339:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 340:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 341:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Sent callback function for TCP netconns.
 342:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Signals the conn->sem and calls API_EVENT.
 343:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * netconn_write waits for conn->sem if send buffer is low.
 344:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 345:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.sent) for parameters and return value
 346:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 347:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 348:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** sent_tcp(void *arg, struct tcp_pcb *pcb, u16_t len)
 349:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 350:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 351:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
 353:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", (conn != NULL));
 354:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn) {
 356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->state == NETCONN_WRITE) {
 357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (conn->state == NETCONN_CLOSE) {
 359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_close_internal(conn  WRITE_DELAYED);
 360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 361:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 362:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* If the queued byte- or pbuf-count drops below the configured low-water limit,
 363:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        let select mark this pcb as writable again. */
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((conn->pcb.tcp != NULL) && (tcp_sndbuf(conn->pcb.tcp) > TCP_SNDLOWAT) &&
 365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
ARM GAS  /tmp/ccUeKVGD.s 			page 11


 366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, len);
 368:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 369:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 370:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 371:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 372:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 373:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 374:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 375:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Error callback function for TCP netconns.
 376:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Signals conn->sem, posts to all conn mboxes and calls API_EVENT.
 377:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * The application thread has then to decide what to do.
 378:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 379:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.err) for parameters
 380:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 381:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 382:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** err_tcp(void *arg, err_t err)
 383:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 384:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 385:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum netconn_state old_state;
 386:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 387:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 388:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", (conn != NULL));
 389:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 390:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->pcb.tcp = NULL;
 391:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 392:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* reset conn->state now before waking up other threads */
 393:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   old_state = conn->state;
 394:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state = NETCONN_NONE;
 395:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (old_state == NETCONN_CLOSE) {
 397:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* RST during close: let close return success & dealloc the netconn */
 398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = ERR_OK;
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 400:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 401:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* no check since this is always fatal! */
 402:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SYS_ARCH_SET(conn->last_err, err);
 403:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 404:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 405:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* @todo: the type of NETCONN_EVT created should depend on 'old_state' */
 406:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 407:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Notify the user layer about a connection error. Used to signal select. */
 408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_ERROR, 0);
 409:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to release selects pending on 'read' or 'write', too.
 410:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      They will get an error if they actually try to read or write. */
 411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 412:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 413:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 414:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* pass NULL-message to recvmbox to wake up pending recv */
 415:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->recvmbox)) {
 416:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to prevent deadlock */
 417:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_trypost(&conn->recvmbox, NULL);
 418:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 419:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* pass NULL-message to acceptmbox to wake up pending accept */
 420:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->acceptmbox)) {
 421:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to preven deadlock */
 422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_trypost(&conn->acceptmbox, NULL);
ARM GAS  /tmp/ccUeKVGD.s 			page 12


 423:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 424:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((old_state == NETCONN_WRITE) || (old_state == NETCONN_CLOSE) ||
 426:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (old_state == NETCONN_CONNECT)) {
 427:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* calling lwip_netconn_do_writemore/lwip_netconn_do_close_internal is not necessary
 428:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        since the pcb has already been deleted! */
 429:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     int was_nonblocking_connect = IN_NONBLOCKING_CONNECT(conn);
 430:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SET_NONBLOCKING_CONNECT(conn, 0);
 431:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 432:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (!was_nonblocking_connect) {
 433:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_t* op_completed_sem;
 434:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* set error return code */
 435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 436:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->err = err;
 437:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 438:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("inavlid op_completed_sem", sys_sem_valid(op_completed_sem));
 439:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg = NULL;
 440:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wake up the waiting task */
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       NETCONN_SET_SAFE_ERR(conn, err);
 442:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 443:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 444:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 445:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("conn->current_msg == NULL", conn->current_msg == NULL);
 446:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 447:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 448:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 449:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 450:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Setup a tcp_pcb with the correct callback function pointers
 451:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * and their arguments.
 452:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 453:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the TCP netconn to setup
 454:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 455:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 456:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** setup_tcp(struct netconn *conn)
 457:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 199              		.loc 1 457 0
 200              		.cfi_startproc
 201              		@ args = 0, pretend = 0, frame = 0
 202              		@ frame_needed = 0, uses_anonymous_args = 0
 203              	.LVL27:
 204 0000 10B5     		push	{r4, lr}
 205              	.LCFI1:
 206              		.cfi_def_cfa_offset 8
 207              		.cfi_offset 4, -8
 208              		.cfi_offset 14, -4
 209 0002 0146     		mov	r1, r0
 458:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct tcp_pcb *pcb;
 459:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 460:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   pcb = conn->pcb.tcp;
 210              		.loc 1 460 0
 211 0004 4468     		ldr	r4, [r0, #4]
 212              	.LVL28:
 461:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_arg(pcb, conn);
 213              		.loc 1 461 0
 214 0006 2046     		mov	r0, r4
 215              	.LVL29:
 216 0008 FFF7FEFF 		bl	tcp_arg
ARM GAS  /tmp/ccUeKVGD.s 			page 13


 217              	.LVL30:
 462:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_recv(pcb, recv_tcp);
 218              		.loc 1 462 0
 219 000c 0849     		ldr	r1, .L23
 220 000e 2046     		mov	r0, r4
 221 0010 FFF7FEFF 		bl	tcp_recv
 222              	.LVL31:
 463:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_sent(pcb, sent_tcp);
 223              		.loc 1 463 0
 224 0014 0749     		ldr	r1, .L23+4
 225 0016 2046     		mov	r0, r4
 226 0018 FFF7FEFF 		bl	tcp_sent
 227              	.LVL32:
 464:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_poll(pcb, poll_tcp, NETCONN_TCP_POLL_INTERVAL);
 228              		.loc 1 464 0
 229 001c 0222     		movs	r2, #2
 230 001e 0649     		ldr	r1, .L23+8
 231 0020 2046     		mov	r0, r4
 232 0022 FFF7FEFF 		bl	tcp_poll
 233              	.LVL33:
 465:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_err(pcb, err_tcp);
 234              		.loc 1 465 0
 235 0026 0549     		ldr	r1, .L23+12
 236 0028 2046     		mov	r0, r4
 237 002a FFF7FEFF 		bl	tcp_err
 238              	.LVL34:
 466:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 239              		.loc 1 466 0
 240 002e 10BD     		pop	{r4, pc}
 241              	.LVL35:
 242              	.L24:
 243              		.align	2
 244              	.L23:
 245 0030 00000000 		.word	recv_tcp
 246 0034 00000000 		.word	sent_tcp
 247 0038 00000000 		.word	poll_tcp
 248 003c 00000000 		.word	err_tcp
 249              		.cfi_endproc
 250              	.LFE164:
 252              		.section	.text.pcb_new,"ax",%progbits
 253              		.align	1
 254              		.syntax unified
 255              		.thumb
 256              		.thumb_func
 257              		.fpu fpv5-sp-d16
 259              	pcb_new:
 260              	.LFB166:
 467:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 468:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 469:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Accept callback function for TCP netconns.
 470:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Allocates a new netconn and posts that to conn->acceptmbox.
 471:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 472:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb_listen.accept) for parameters and return value
 473:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 474:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 475:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** accept_function(void *arg, struct tcp_pcb *newpcb, err_t err)
 476:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
ARM GAS  /tmp/ccUeKVGD.s 			page 14


 477:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *newconn;
 478:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 479:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 480:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 481:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 482:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 483:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!sys_mbox_valid(&conn->acceptmbox)) {
 484:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_DEBUGF(API_MSG_DEBUG, ("accept_function: acceptmbox already deleted\n"));
 485:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 486:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 487:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 488:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (newpcb == NULL) {
 489:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* out-of-pcbs during connect: pass on this error to the application */
 490:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (sys_mbox_trypost(&conn->acceptmbox, &netconn_aborted) == ERR_OK) {
 491:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 493:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 495:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 496:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 497:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_DEBUGF(API_MSG_DEBUG, ("accept_function: newpcb->tate: %s\n", tcp_debug_state_str(newpcb->st
 498:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 499:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* We have to set the callback here even though
 500:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****    * the new socket is unknown. newconn->socket is marked as -1. */
 501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   newconn = netconn_alloc(conn->type, conn->callback);
 502:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (newconn == NULL) {
 503:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* outof netconns: pass on this error to the application */
 504:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (sys_mbox_trypost(&conn->acceptmbox, &netconn_aborted) == ERR_OK) {
 505:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 506:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   newconn->pcb.tcp = newpcb;
 511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   setup_tcp(newconn);
 512:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* no protection: when creating the pcb, the netconn is not yet known
 513:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      to the application thread */
 514:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   newconn->last_err = err;
 515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 516:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* handle backlog counter */
 517:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tcp_backlog_delayed(newpcb);
 518:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 519:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_trypost(&conn->acceptmbox, newconn) != ERR_OK) {
 520:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* When returning != ERR_OK, the pcb is aborted in tcp_process(),
 521:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        so do nothing here! */
 522:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* remove all references to this netconn from the pcb */
 523:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     struct tcp_pcb* pcb = newconn->pcb.tcp;
 524:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(pcb, NULL);
 525:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_recv(pcb, NULL);
 526:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_sent(pcb, NULL);
 527:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_poll(pcb, NULL, 0);
 528:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(pcb, NULL);
 529:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* remove reference from to the pcb from this netconn */
 530:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     newconn->pcb.tcp = NULL;
 531:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* no need to drain since we know the recvmbox is empty. */
 532:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&newconn->recvmbox);
 533:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&newconn->recvmbox);
ARM GAS  /tmp/ccUeKVGD.s 			page 15


 534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netconn_free(newconn);
 535:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 536:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 537:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Register event with callback */
 538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 539:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 540:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 541:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 542:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 543:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 544:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 545:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 546:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Create a new pcb of a specific type.
 547:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from lwip_netconn_do_newconn().
 548:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 549:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param msg the api_msg_msg describing the connection type
 550:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 551:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 552:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** pcb_new(struct api_msg *msg)
 553:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 261              		.loc 1 553 0
 262              		.cfi_startproc
 263              		@ args = 0, pretend = 0, frame = 0
 264              		@ frame_needed = 0, uses_anonymous_args = 0
 265              	.LVL36:
 266 0000 38B5     		push	{r3, r4, r5, lr}
 267              	.LCFI2:
 268              		.cfi_def_cfa_offset 16
 269              		.cfi_offset 3, -16
 270              		.cfi_offset 4, -12
 271              		.cfi_offset 5, -8
 272              		.cfi_offset 14, -4
 273 0002 0446     		mov	r4, r0
 274              	.LVL37:
 554:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum lwip_ip_addr_type iptype = IPADDR_TYPE_V4;
 555:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 556:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb_new: pcb already allocated", msg->conn->pcb.tcp == NULL);
 275              		.loc 1 556 0
 276 0004 0368     		ldr	r3, [r0]
 277 0006 5B68     		ldr	r3, [r3, #4]
 278 0008 33B1     		cbz	r3, .L26
 279              		.loc 1 556 0 is_stmt 0 discriminator 1
 280 000a 1B4B     		ldr	r3, .L37
 281 000c 4FF40B72 		mov	r2, #556
 282 0010 1A49     		ldr	r1, .L37+4
 283 0012 1B48     		ldr	r0, .L37+8
 284              	.LVL38:
 285 0014 FFF7FEFF 		bl	printf
 286              	.LVL39:
 287              	.L26:
 557:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  
 558:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV6 && LWIP_IPV4
 559:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* IPv6: Dual-stack by default, unless netconn_set_ipv6only() is called */
 560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if(NETCONNTYPE_ISIPV6(netconn_type(msg->conn))) {
 561:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     iptype = IPADDR_TYPE_ANY;
 562:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 563:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
ARM GAS  /tmp/ccUeKVGD.s 			page 16


 564:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   
 565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Allocate a PCB for this connection */
 566:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   switch(NETCONNTYPE_GROUP(msg->conn->type)) {
 288              		.loc 1 566 0 is_stmt 1
 289 0018 2568     		ldr	r5, [r4]
 290 001a 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 291 001c 03F0F003 		and	r3, r3, #240
 292 0020 102B     		cmp	r3, #16
 293 0022 18D0     		beq	.L28
 294 0024 202B     		cmp	r3, #32
 295 0026 21D1     		bne	.L33
 567:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 568:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_RAW:
 569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->conn->pcb.raw = raw_new_ip_type(iptype, msg->msg.n.proto);
 570:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.raw != NULL) {
 571:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV6
 572:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* ICMPv6 packets should always have checksum calculated by the stack as per RFC 3542 chapter
 573:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_ISIPV6(msg->conn->type) && msg->conn->pcb.raw->protocol == IP6_NEXTH_ICMP6) {
 574:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.raw->chksum_reqd = 1;
 575:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.raw->chksum_offset = 2;
 576:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 577:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IPV6 */
 578:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       raw_recv(msg->conn->pcb.raw, recv_raw, msg->conn);
 579:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 580:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 581:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
 582:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
 583:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_UDP:
 584:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->conn->pcb.udp = udp_new_ip_type(iptype);
 296              		.loc 1 584 0
 297 0028 0020     		movs	r0, #0
 298 002a FFF7FEFF 		bl	udp_new_ip_type
 299              	.LVL40:
 300 002e 6860     		str	r0, [r5, #4]
 585:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.udp != NULL) {
 301              		.loc 1 585 0
 302 0030 2368     		ldr	r3, [r4]
 303 0032 5A68     		ldr	r2, [r3, #4]
 304 0034 42B1     		cbz	r2, .L30
 586:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDPLITE
 587:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_ISUDPLITE(msg->conn->type)) {
 588:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_setflags(msg->conn->pcb.udp, UDP_FLAGS_UDPLITE);
 589:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 590:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDPLITE */
 591:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_ISUDPNOCHKSUM(msg->conn->type)) {
 305              		.loc 1 591 0
 306 0036 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 307 0038 222B     		cmp	r3, #34
 308 003a 09D0     		beq	.L35
 309              	.L31:
 592:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_setflags(msg->conn->pcb.udp, UDP_FLAGS_NOCHKSUM);
 593:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 594:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       udp_recv(msg->conn->pcb.udp, recv_udp, msg->conn);
 310              		.loc 1 594 0
 311 003c 2368     		ldr	r3, [r4]
 312 003e 1A46     		mov	r2, r3
 313 0040 1049     		ldr	r1, .L37+12
ARM GAS  /tmp/ccUeKVGD.s 			page 17


 314 0042 5868     		ldr	r0, [r3, #4]
 315 0044 FFF7FEFF 		bl	udp_recv
 316              	.LVL41:
 317              	.L30:
 595:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 596:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 597:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 598:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 599:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_TCP:
 600:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->conn->pcb.tcp = tcp_new_ip_type(iptype);
 601:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 602:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       setup_tcp(msg->conn);
 603:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 604:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 605:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 606:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   default:
 607:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Unsupported netconn type, e.g. protocol disabled */
 608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_VAL;
 609:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 610:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 611:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.ip == NULL) {
 318              		.loc 1 611 0
 319 0048 2368     		ldr	r3, [r4]
 320 004a 5B68     		ldr	r3, [r3, #4]
 321 004c 8BB1     		cbz	r3, .L36
 322              	.L25:
 612:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_MEM;
 613:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 614:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 323              		.loc 1 614 0
 324 004e 38BD     		pop	{r3, r4, r5, pc}
 325              	.LVL42:
 326              	.L35:
 592:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 327              		.loc 1 592 0
 328 0050 0123     		movs	r3, #1
 329 0052 1374     		strb	r3, [r2, #16]
 330 0054 F2E7     		b	.L31
 331              	.L28:
 600:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 332              		.loc 1 600 0
 333 0056 0020     		movs	r0, #0
 334 0058 FFF7FEFF 		bl	tcp_new_ip_type
 335              	.LVL43:
 336 005c 6860     		str	r0, [r5, #4]
 601:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       setup_tcp(msg->conn);
 337              		.loc 1 601 0
 338 005e 2068     		ldr	r0, [r4]
 339 0060 4368     		ldr	r3, [r0, #4]
 340 0062 002B     		cmp	r3, #0
 341 0064 F0D0     		beq	.L30
 602:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 342              		.loc 1 602 0
 343 0066 FFF7FEFF 		bl	setup_tcp
 344              	.LVL44:
 345 006a EDE7     		b	.L30
 346              	.L33:
ARM GAS  /tmp/ccUeKVGD.s 			page 18


 608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return;
 347              		.loc 1 608 0
 348 006c FA23     		movs	r3, #250
 349 006e 2371     		strb	r3, [r4, #4]
 609:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 350              		.loc 1 609 0
 351 0070 EDE7     		b	.L25
 352              	.L36:
 612:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 353              		.loc 1 612 0
 354 0072 FF23     		movs	r3, #255
 355 0074 2371     		strb	r3, [r4, #4]
 356 0076 EAE7     		b	.L25
 357              	.L38:
 358              		.align	2
 359              	.L37:
 360 0078 00000000 		.word	.LC0
 361 007c 00000000 		.word	.LC5
 362 0080 54000000 		.word	.LC2
 363 0084 00000000 		.word	recv_udp
 364              		.cfi_endproc
 365              	.LFE166:
 367              		.section	.text.err_tcp,"ax",%progbits
 368              		.align	1
 369              		.syntax unified
 370              		.thumb
 371              		.thumb_func
 372              		.fpu fpv5-sp-d16
 374              	err_tcp:
 375              	.LFB163:
 383:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 376              		.loc 1 383 0
 377              		.cfi_startproc
 378              		@ args = 0, pretend = 0, frame = 0
 379              		@ frame_needed = 0, uses_anonymous_args = 0
 380              	.LVL45:
 381 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 382              	.LCFI3:
 383              		.cfi_def_cfa_offset 24
 384              		.cfi_offset 3, -24
 385              		.cfi_offset 4, -20
 386              		.cfi_offset 5, -16
 387              		.cfi_offset 6, -12
 388              		.cfi_offset 7, -8
 389              		.cfi_offset 14, -4
 390 0002 0E46     		mov	r6, r1
 391              	.LVL46:
 388:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 392              		.loc 1 388 0
 393 0004 0446     		mov	r4, r0
 394 0006 A0B1     		cbz	r0, .L58
 395              	.LVL47:
 396              	.L40:
 390:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 397              		.loc 1 390 0
 398 0008 0023     		movs	r3, #0
 399 000a 6360     		str	r3, [r4, #4]
ARM GAS  /tmp/ccUeKVGD.s 			page 19


 393:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state = NETCONN_NONE;
 400              		.loc 1 393 0
 401 000c 6578     		ldrb	r5, [r4, #1]	@ zero_extendqisi2
 402              	.LVL48:
 394:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 403              		.loc 1 394 0
 404 000e 6370     		strb	r3, [r4, #1]
 396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* RST during close: let close return success & dealloc the netconn */
 405              		.loc 1 396 0
 406 0010 042D     		cmp	r5, #4
 407 0012 16D1     		bne	.L41
 408              	.LVL49:
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 409              		.loc 1 399 0
 410 0014 002C     		cmp	r4, #0
 411 0016 47D0     		beq	.L56
 412              	.LBB2:
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 413              		.loc 1 399 0 is_stmt 0 discriminator 1
 414 0018 FFF7FEFF 		bl	sys_arch_protect
 415              	.LVL50:
 416 001c 94F90830 		ldrsb	r3, [r4, #8]
 417 0020 13F10C0F 		cmn	r3, #12
 418 0024 01DB     		blt	.L43
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 419              		.loc 1 399 0 discriminator 2
 420 0026 0023     		movs	r3, #0
 421 0028 2372     		strb	r3, [r4, #8]
 422              	.L43:
 399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 423              		.loc 1 399 0 discriminator 4
 424 002a FFF7FEFF 		bl	sys_arch_unprotect
 425              	.LVL51:
 426              	.LBE2:
 398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 427              		.loc 1 398 0 is_stmt 1 discriminator 4
 428 002e 0026     		movs	r6, #0
 429 0030 0CE0     		b	.L42
 430              	.LVL52:
 431              	.L58:
 388:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 432              		.loc 1 388 0 discriminator 1
 433 0032 3D4B     		ldr	r3, .L63
 434 0034 4FF4C272 		mov	r2, #388
 435 0038 3C49     		ldr	r1, .L63+4
 436              	.LVL53:
 437 003a 3D48     		ldr	r0, .L63+8
 438              	.LVL54:
 439 003c FFF7FEFF 		bl	printf
 440              	.LVL55:
 441 0040 E2E7     		b	.L40
 442              	.LVL56:
 443              	.L41:
 444              	.LBB3:
 402:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 445              		.loc 1 402 0
 446 0042 FFF7FEFF 		bl	sys_arch_protect
ARM GAS  /tmp/ccUeKVGD.s 			page 20


 447              	.LVL57:
 448 0046 2672     		strb	r6, [r4, #8]
 449 0048 FFF7FEFF 		bl	sys_arch_unprotect
 450              	.LVL58:
 451              	.L42:
 452              	.LBE3:
 408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to release selects pending on 'read' or 'write', too.
 453              		.loc 1 408 0
 454 004c A36A     		ldr	r3, [r4, #40]
 455 004e 1BB1     		cbz	r3, .L44
 408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to release selects pending on 'read' or 'write', too.
 456              		.loc 1 408 0 is_stmt 0 discriminator 1
 457 0050 0022     		movs	r2, #0
 458 0052 0421     		movs	r1, #4
 459 0054 2046     		mov	r0, r4
 460 0056 9847     		blx	r3
 461              	.LVL59:
 462              	.L44:
 411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 463              		.loc 1 411 0 is_stmt 1
 464 0058 A36A     		ldr	r3, [r4, #40]
 465 005a 1BB1     		cbz	r3, .L45
 411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 466              		.loc 1 411 0 is_stmt 0 discriminator 1
 467 005c 0022     		movs	r2, #0
 468 005e 1146     		mov	r1, r2
 469 0060 2046     		mov	r0, r4
 470 0062 9847     		blx	r3
 471              	.LVL60:
 472              	.L45:
 412:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 473              		.loc 1 412 0 is_stmt 1
 474 0064 A36A     		ldr	r3, [r4, #40]
 475 0066 1BB1     		cbz	r3, .L46
 412:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 476              		.loc 1 412 0 is_stmt 0 discriminator 1
 477 0068 0022     		movs	r2, #0
 478 006a 0221     		movs	r1, #2
 479 006c 2046     		mov	r0, r4
 480 006e 9847     		blx	r3
 481              	.LVL61:
 482              	.L46:
 415:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to prevent deadlock */
 483              		.loc 1 415 0 is_stmt 1
 484 0070 04F11007 		add	r7, r4, #16
 485 0074 3846     		mov	r0, r7
 486 0076 FFF7FEFF 		bl	sys_mbox_valid
 487              	.LVL62:
 488 007a B8B9     		cbnz	r0, .L59
 489              	.L47:
 420:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* use trypost to preven deadlock */
 490              		.loc 1 420 0
 491 007c 04F11407 		add	r7, r4, #20
 492 0080 3846     		mov	r0, r7
 493 0082 FFF7FEFF 		bl	sys_mbox_valid
 494              	.LVL63:
 495 0086 B0B9     		cbnz	r0, .L60
ARM GAS  /tmp/ccUeKVGD.s 			page 21


 496              	.L48:
 425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (old_state == NETCONN_CONNECT)) {
 497              		.loc 1 425 0
 498 0088 042D     		cmp	r5, #4
 499 008a 18BF     		it	ne
 500 008c 012D     		cmpne	r5, #1
 501 008e 17D0     		beq	.L49
 425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (old_state == NETCONN_CONNECT)) {
 502              		.loc 1 425 0 is_stmt 0 discriminator 1
 503 0090 032D     		cmp	r5, #3
 504 0092 15D0     		beq	.L49
 445:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 505              		.loc 1 445 0 is_stmt 1
 506 0094 636A     		ldr	r3, [r4, #36]
 507 0096 ABB3     		cbz	r3, .L39
 445:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 508              		.loc 1 445 0 is_stmt 0 discriminator 1
 509 0098 234B     		ldr	r3, .L63
 510 009a 40F2BD12 		movw	r2, #445
 511 009e 2549     		ldr	r1, .L63+12
 512 00a0 2348     		ldr	r0, .L63+8
 513 00a2 FFF7FEFF 		bl	printf
 514              	.LVL64:
 447:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 515              		.loc 1 447 0 is_stmt 1 discriminator 1
 516 00a6 2DE0     		b	.L39
 517              	.LVL65:
 518              	.L56:
 398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 519              		.loc 1 398 0
 520 00a8 0026     		movs	r6, #0
 521 00aa CFE7     		b	.L42
 522              	.LVL66:
 523              	.L59:
 417:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 524              		.loc 1 417 0
 525 00ac 0021     		movs	r1, #0
 526 00ae 3846     		mov	r0, r7
 527 00b0 FFF7FEFF 		bl	sys_mbox_trypost
 528              	.LVL67:
 529 00b4 E2E7     		b	.L47
 530              	.L60:
 422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 531              		.loc 1 422 0
 532 00b6 0021     		movs	r1, #0
 533 00b8 3846     		mov	r0, r7
 534 00ba FFF7FEFF 		bl	sys_mbox_trypost
 535              	.LVL68:
 536 00be E3E7     		b	.L48
 537              	.L49:
 538              	.LBB4:
 429:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     SET_NONBLOCKING_CONNECT(conn, 0);
 539              		.loc 1 429 0
 540 00c0 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 541              	.LVL69:
 430:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 542              		.loc 1 430 0
ARM GAS  /tmp/ccUeKVGD.s 			page 22


 543 00c2 23F00402 		bic	r2, r3, #4
 544 00c6 2277     		strb	r2, [r4, #28]
 432:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_t* op_completed_sem;
 545              		.loc 1 432 0
 546 00c8 13F0040F 		tst	r3, #4
 547 00cc 1AD1     		bne	.L39
 548              	.LBB5:
 435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->err = err;
 549              		.loc 1 435 0
 550 00ce 636A     		ldr	r3, [r4, #36]
 551              	.LVL70:
 552 00d0 CBB1     		cbz	r3, .L61
 553              	.L52:
 436:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 554              		.loc 1 436 0
 555 00d2 636A     		ldr	r3, [r4, #36]
 556 00d4 1E71     		strb	r6, [r3, #4]
 437:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("inavlid op_completed_sem", sys_sem_valid(op_completed_sem));
 557              		.loc 1 437 0
 558 00d6 636A     		ldr	r3, [r4, #36]
 559 00d8 1D68     		ldr	r5, [r3]
 560              	.LVL71:
 561 00da 0C35     		adds	r5, r5, #12
 562              	.LVL72:
 438:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg = NULL;
 563              		.loc 1 438 0
 564 00dc 2846     		mov	r0, r5
 565 00de FFF7FEFF 		bl	sys_sem_valid
 566              	.LVL73:
 567 00e2 C0B1     		cbz	r0, .L62
 568              	.L53:
 439:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wake up the waiting task */
 569              		.loc 1 439 0
 570 00e4 0023     		movs	r3, #0
 571 00e6 6362     		str	r3, [r4, #36]
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 572              		.loc 1 441 0
 573 00e8 4CB1     		cbz	r4, .L54
 574              	.LBB6:
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 575              		.loc 1 441 0 is_stmt 0 discriminator 1
 576 00ea FFF7FEFF 		bl	sys_arch_protect
 577              	.LVL74:
 578 00ee 94F90830 		ldrsb	r3, [r4, #8]
 579 00f2 13F10C0F 		cmn	r3, #12
 580 00f6 00DB     		blt	.L55
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 581              		.loc 1 441 0 discriminator 2
 582 00f8 2672     		strb	r6, [r4, #8]
 583              	.L55:
 441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 584              		.loc 1 441 0 discriminator 4
 585 00fa FFF7FEFF 		bl	sys_arch_unprotect
 586              	.LVL75:
 587              	.L54:
 588              	.LBE6:
 442:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
ARM GAS  /tmp/ccUeKVGD.s 			page 23


 589              		.loc 1 442 0 is_stmt 1
 590 00fe 2846     		mov	r0, r5
 591 0100 FFF7FEFF 		bl	sys_sem_signal
 592              	.LVL76:
 593              	.L39:
 594              	.LBE5:
 595              	.LBE4:
 447:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 596              		.loc 1 447 0
 597 0104 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 598              	.LVL77:
 599              	.L61:
 600              	.LBB8:
 601              	.LBB7:
 435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->err = err;
 602              		.loc 1 435 0 discriminator 1
 603 0106 084B     		ldr	r3, .L63
 604 0108 40F2B312 		movw	r2, #435
 605 010c 0A49     		ldr	r1, .L63+16
 606 010e 0848     		ldr	r0, .L63+8
 607 0110 FFF7FEFF 		bl	printf
 608              	.LVL78:
 609 0114 DDE7     		b	.L52
 610              	.LVL79:
 611              	.L62:
 438:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg = NULL;
 612              		.loc 1 438 0 discriminator 1
 613 0116 044B     		ldr	r3, .L63
 614 0118 4FF4DB72 		mov	r2, #438
 615 011c 0749     		ldr	r1, .L63+20
 616 011e 0448     		ldr	r0, .L63+8
 617 0120 FFF7FEFF 		bl	printf
 618              	.LVL80:
 619 0124 DEE7     		b	.L53
 620              	.L64:
 621 0126 00BF     		.align	2
 622              	.L63:
 623 0128 00000000 		.word	.LC0
 624 012c 00000000 		.word	.LC6
 625 0130 54000000 		.word	.LC2
 626 0134 48000000 		.word	.LC9
 627 0138 10000000 		.word	.LC7
 628 013c 2C000000 		.word	.LC8
 629              	.LBE7:
 630              	.LBE8:
 631              		.cfi_endproc
 632              	.LFE163:
 634              		.section	.text.lwip_netconn_do_connected,"ax",%progbits
 635              		.align	1
 636              		.syntax unified
 637              		.thumb
 638              		.thumb_func
 639              		.fpu fpv5-sp-d16
 641              	lwip_netconn_do_connected:
 642              	.LFB174:
 615:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 616:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
ARM GAS  /tmp/ccUeKVGD.s 			page 24


 617:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Create a new pcb of a specific type inside a netconn.
 618:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_new_with_proto_and_callback.
 619:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 620:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg describing the connection type
 621:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 622:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
 623:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_newconn(void *m)
 624:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 625:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 626:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 627:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   msg->err = ERR_OK;
 628:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp == NULL) {
 629:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pcb_new(msg);
 630:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 631:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Else? This "new" connection already has a PCB allocated. */
 632:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Is this an error condition? Should it be deleted? */
 633:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* We currently just are happy and return. */
 634:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
 636:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 637:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 638:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 639:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Create a new netconn (of a specific type) that has a callback function.
 640:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * The corresponding pcb is NOT created!
 641:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 642:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param t the type of 'connection' to create (@see enum netconn_type)
 643:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param callback a function to call on status changes (RX available, TX'ed)
 644:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @return a newly allocated struct netconn or
 645:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *         NULL on memory error
 646:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 647:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** struct netconn*
 648:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** netconn_alloc(enum netconn_type t, netconn_callback callback)
 649:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 650:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 651:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   int size;
 652:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 653:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)memp_malloc(MEMP_NETCONN);
 654:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 655:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return NULL;
 656:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 657:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 658:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->last_err = ERR_OK;
 659:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->type = t;
 660:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->pcb.tcp = NULL;
 661:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 662:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* If all sizes are the same, every compiler should optimize this switch to nothing */
 663:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   switch(NETCONNTYPE_GROUP(t)) {
 664:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 665:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_RAW:
 666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     size = DEFAULT_RAW_RECVMBOX_SIZE;
 667:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 668:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
 669:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
 670:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_UDP:
 671:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     size = DEFAULT_UDP_RECVMBOX_SIZE;
 672:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 673:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
ARM GAS  /tmp/ccUeKVGD.s 			page 25


 674:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 675:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   case NETCONN_TCP:
 676:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     size = DEFAULT_TCP_RECVMBOX_SIZE;
 677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     break;
 678:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 679:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   default:
 680:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("netconn_alloc: undefined netconn_type", 0);
 681:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 682:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 683:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 684:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_new(&conn->recvmbox, size) != ERR_OK) {
 685:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 686:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 687:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_NETCONN_SEM_PER_THREAD
 688:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_sem_new(&conn->op_completed, 0) != ERR_OK) {
 689:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->recvmbox);
 690:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 691:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 692:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 693:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 694:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 695:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_mbox_set_invalid(&conn->acceptmbox);
 696:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 697:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state        = NETCONN_NONE;
 698:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SOCKET
 699:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* initialize socket to -1 since 0 is a valid socket */
 700:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->socket       = -1;
 701:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SOCKET */
 702:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->callback     = callback;
 703:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 704:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->current_msg  = NULL;
 705:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->write_offset = 0;
 706:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 707:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO
 708:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->send_timeout = 0;
 709:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO */
 710:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVTIMEO
 711:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->recv_timeout = 0;
 712:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVTIMEO */
 713:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_RCVBUF
 714:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->recv_bufsize = RECV_BUFSIZE_DEFAULT;
 715:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->recv_avail   = 0;
 716:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_RCVBUF */
 717:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 718:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->linger = -1;
 719:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 720:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->flags = 0;
 721:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return conn;
 722:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** free_and_return:
 723:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   memp_free(MEMP_NETCONN, conn);
 724:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return NULL;
 725:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 726:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 727:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 728:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Delete a netconn and all its resources.
 729:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * The pcb is NOT freed (since we might not be in the right thread context do this).
 730:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
ARM GAS  /tmp/ccUeKVGD.s 			page 26


 731:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the netconn to free
 732:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 733:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
 734:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** netconn_free(struct netconn *conn)
 735:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("PCB must be deallocated outside this function", conn->pcb.tcp == NULL);
 737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recvmbox must be deallocated before calling this function",
 738:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->recvmbox));
 739:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("acceptmbox must be deallocated before calling this function",
 741:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->acceptmbox));
 742:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 743:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 744:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_NETCONN_SEM_PER_THREAD
 745:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_free(&conn->op_completed);
 746:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_set_invalid(&conn->op_completed);
 747:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 748:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 749:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   memp_free(MEMP_NETCONN, conn);
 750:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 751:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 752:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 753:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Delete rcvmbox and acceptmbox of a netconn and free the left-over data in
 754:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * these mboxes
 755:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 756:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the netconn to free
 757:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @bytes_drained bytes drained from recvmbox
 758:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @accepts_drained pending connections drained from acceptmbox
 759:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 760:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static void
 761:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** netconn_drain(struct netconn *conn)
 762:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 763:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   void *mem;
 764:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 765:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct pbuf *p;
 766:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 767:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 768:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* This runs in tcpip_thread, so we don't need to lock against rx packets */
 769:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 770:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Delete and drain the recvmbox. */
 771:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->recvmbox)) {
 772:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->recvmbox, &mem) != SYS_MBOX_EMPTY) {
 773:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 774:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP) {
 775:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (mem != NULL) {
 776:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           p = (struct pbuf*)mem;
 777:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* pcb might be set to NULL already by err_tcp() */
 778:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (conn->pcb.tcp != NULL) {
 779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             tcp_recved(conn->pcb.tcp, p->tot_len);
 780:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
 781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           pbuf_free(p);
 782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else
 784:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 785:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       {
 786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netbuf_delete((struct netbuf *)mem);
 787:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
ARM GAS  /tmp/ccUeKVGD.s 			page 27


 788:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 789:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->recvmbox);
 790:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->recvmbox);
 791:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 792:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 793:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Delete and drain the acceptmbox. */
 794:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 795:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_mbox_valid(&conn->acceptmbox)) {
 796:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->acceptmbox, &mem) != SYS_MBOX_EMPTY) {
 797:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (mem != &netconn_aborted) {
 798:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         struct netconn *newconn = (struct netconn *)mem;
 799:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Only tcp pcbs have an acceptmbox, so no need to check conn->type */
 800:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* pcb might be set to NULL already by err_tcp() */
 801:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* drain recvmbox */
 802:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netconn_drain(newconn);
 803:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (newconn->pcb.tcp != NULL) {
 804:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(newconn->pcb.tcp);
 805:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           newconn->pcb.tcp = NULL;
 806:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 807:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netconn_free(newconn);
 808:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 809:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 810:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->acceptmbox);
 811:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->acceptmbox);
 812:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 813:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 814:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 815:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 816:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 817:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
 818:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Internal helper function to close a TCP netconn: since this sometimes
 819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * doesn't work at the first attempt, this function is called from multiple
 820:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * places.
 821:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
 822:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn the TCP netconn to close
 823:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
 824:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
 825:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_close_internal(struct netconn *conn  WRITE_DELAYED_PARAM)
 826:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 827:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
 828:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t shut, shut_rx, shut_tx, close;
 829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t close_finished = 0;
 830:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct tcp_pcb* tpcb;
 831:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 832:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t linger_wait_required = 0;
 833:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 834:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("invalid conn", (conn != NULL));
 836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("this is for tcp netconns only", (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP));
 837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn must be in state NETCONN_CLOSE", (conn->state == NETCONN_CLOSE));
 838:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb already closed", (conn->pcb.tcp != NULL));
 839:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 840:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 841:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   tpcb = conn->pcb.tcp;
 842:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut = conn->current_msg->msg.sd.shut;
 843:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_rx = shut & NETCONN_SHUT_RD;
 844:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_tx = shut & NETCONN_SHUT_WR;
ARM GAS  /tmp/ccUeKVGD.s 			page 28


 845:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* shutting down both ends is the same as closing
 846:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      (also if RD or WR side was shut down before already) */
 847:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (shut == NETCONN_SHUT_RDWR) {
 848:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 849:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (shut_rx &&
 850:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              ((tpcb->state == FIN_WAIT_1) ||
 851:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == FIN_WAIT_2) ||
 852:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == CLOSING))) {
 853:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 854:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (shut_tx && ((tpcb->flags & TF_RXCLOSED) != 0)) {
 855:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 856:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 857:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 0;
 858:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 859:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 860:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Set back some callback pointers */
 861:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (close) {
 862:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, NULL);
 863:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 864:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (tpcb->state == LISTEN) {
 865:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_accept(tpcb, NULL);
 866:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 867:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* some callbacks have to be reset if tcp_close is not successful */
 868:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_rx) {
 869:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recv(tpcb, NULL);
 870:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_accept(tpcb, NULL);
 871:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 872:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 873:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, NULL);
 874:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 875:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (close) {
 876:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_poll(tpcb, NULL, 0);
 877:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_err(tpcb, NULL);
 878:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 879:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 880:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* Try to close the connection */
 881:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (close) {
 882:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 883:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* check linger possibilites before calling tcp_close */
 884:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = ERR_OK;
 885:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* linger enabled/required at all? (i.e. is there untransmitted data left?) */
 886:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((conn->linger >= 0) && (conn->pcb.tcp->unsent || conn->pcb.tcp->unacked)) {
 887:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((conn->linger == 0)) {
 888:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* data left but linger prevents waiting */
 889:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_abort(tpcb);
 890:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tpcb = NULL;
 891:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (conn->linger > 0) {
 892:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* data left and linger says we should wait */
 893:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (netconn_is_nonblocking(conn)) {
 894:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* data left on a nonblocking netconn -> cannot linger */
 895:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_WOULDBLOCK;
 896:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else if ((s32_t)(sys_now() - conn->current_msg->msg.sd.time_started) >=
 897:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           (conn->linger * 1000)) {
 898:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* data left but linger timeout has expired (this happens on further
 899:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              calls to this function through poll_tcp */
 900:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(tpcb);
 901:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tpcb = NULL;
ARM GAS  /tmp/ccUeKVGD.s 			page 29


 902:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
 903:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* data left -> need to wait for ACK after successful close */
 904:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           linger_wait_required = 1;
 905:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 906:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 907:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 908:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((err == ERR_OK) && (tpcb != NULL))
 909:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 910:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
 911:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = tcp_close(tpcb);
 912:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 913:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 914:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_shutdown(tpcb, shut_rx, shut_tx);
 915:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 916:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (err == ERR_OK) {
 917:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close_finished = 1;
 918:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 919:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (linger_wait_required) {
 920:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wait for ACK of all unsent/unacked data by just getting called again */
 921:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       close_finished = 0;
 922:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = ERR_INPROGRESS;
 923:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 924:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_LINGER */
 925:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 926:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_MEM) {
 927:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Closing failed because of memory shortage, try again later. Even for
 928:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          nonblocking netconns, we have to wait since no standard socket application
 929:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          is prepared for close failing because of resource shortage.
 930:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          Check the timeout: this is kind of an lwip addition to the standard sockets:
 931:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          we wait for some time when failing to allocate a segment for the FIN */
 932:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO || LWIP_SO_LINGER
 933:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       s32_t close_timeout = LWIP_TCP_CLOSE_TIMEOUT_MS_DEFAULT;
 934:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO
 935:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (conn->send_timeout > 0) {
 936:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         close_timeout = conn->send_timeout;
 937:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 938:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO */
 939:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 940:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (conn->linger >= 0) {
 941:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* use linger timeout (seconds) */
 942:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         close_timeout = conn->linger * 1000U;
 943:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 944:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 945:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((s32_t)(sys_now() - conn->current_msg->msg.sd.time_started) >= close_timeout) {
 946:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_SO_SNDTIMEO || LWIP_SO_LINGER */
 947:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (conn->current_msg->msg.sd.polls_left == 0) {
 948:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO || LWIP_SO_LINGER */
 949:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         close_finished = 1;
 950:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (close) {
 951:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* in this case, we want to RST the connection */
 952:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(tpcb);
 953:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_OK;
 954:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 955:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 956:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
 957:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Closing failed for a non-memory error: give up */
 958:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       close_finished = 1;
ARM GAS  /tmp/ccUeKVGD.s 			page 30


 959:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 960:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 961:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (close_finished) {
 962:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing done (succeeded, non-memory error, nonblocking error or timeout) */
 963:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_t* op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 964:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 965:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
 966:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
 967:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_OK) {
 968:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (close) {
 969:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Set back some callback pointers as conn is going away */
 970:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->pcb.tcp = NULL;
 971:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Trigger select() in socket layer. Make sure everybody notices activity
 972:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          on the connection, error first! */
 973:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_ERROR, 0);
 974:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 975:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (shut_rx) {
 976:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 977:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 978:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (shut_tx) {
 979:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 980:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 981:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 983:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 984:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (delayed)
 985:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 986:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
 987:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* wake up the application task */
 988:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
 989:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 990:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_OK;
 991:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 992:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (!close_finished) {
 993:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing failed and we want to wait: restore some of the callbacks */
 994:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Closing of listen pcb will never fail! */
 995:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("Closing a listen pcb may not fail!", (tpcb->state != LISTEN));
 996:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 997:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, sent_tcp);
 998:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 999:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* when waiting for close, set up poll interval to 500ms */
1000:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_poll(tpcb, poll_tcp, 1);
1001:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(tpcb, err_tcp);
1002:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, conn);
1003:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't restore recv callback: we don't want to receive any more data */
1004:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1005:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* If closing didn't succeed, we get called again either
1006:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      from poll_tcp or from sent_tcp */
1007:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("err != ERR_OK", err != ERR_OK);
1008:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return err;
1009:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1010:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1011:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1012:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1013:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Delete the pcb inside a netconn.
1014:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_delete.
1015:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
ARM GAS  /tmp/ccUeKVGD.s 			page 31


1016:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1017:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1018:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1019:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_delconn(void *m)
1020:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1021:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1022:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1023:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum netconn_state state = msg->conn->state;
1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("netconn state error", /* this only happens for TCP netconns */
1025:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
1026:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN_FULLDUPLEX
1027:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* In full duplex mode, blocking write/connect is aborted with ERR_CLSD */
1028:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (state != NETCONN_NONE) {
1029:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((state == NETCONN_WRITE) ||
1030:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         ((state == NETCONN_CONNECT) && !IN_NONBLOCKING_CONNECT(msg->conn))) {
1031:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* close requested, abort running write/connect */
1032:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_t* op_completed_sem;
1033:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("msg->conn->current_msg != NULL", msg->conn->current_msg != NULL);
1034:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       op_completed_sem = LWIP_API_MSG_SEM(msg->conn->current_msg);
1035:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg->err = ERR_CLSD;
1036:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg = NULL;
1037:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->write_offset = 0;
1038:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->state = NETCONN_NONE;
1039:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       NETCONN_SET_SAFE_ERR(msg->conn, ERR_CLSD);
1040:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
1041:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1042:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1043:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_NETCONN_FULLDUPLEX */
1044:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (((state != NETCONN_NONE) &&
1045:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_LISTEN) &&
1046:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_CONNECT)) ||
1047:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((state == NETCONN_CONNECT) && !IN_NONBLOCKING_CONNECT(msg->conn))) {
1048:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This means either a blocking write or blocking connect is running
1049:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (nonblocking write returns and sets state to NONE) */
1050:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_INPROGRESS;
1051:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1052:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
1053:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("blocking connect in progress",
1055:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
1056:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
1057:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Drain and delete mboxes */
1058:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netconn_drain(msg->conn);
1059:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1060:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1061:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1062:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1063:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1064:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_RAW:
1065:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         raw_remove(msg->conn->pcb.raw);
1066:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1067:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1068:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1069:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_UDP:
1070:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.udp->recv_arg = NULL;
1071:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_remove(msg->conn->pcb.udp);
1072:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
ARM GAS  /tmp/ccUeKVGD.s 			page 32


1073:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1074:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1075:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_TCP:
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("already writing or closing", msg->conn->current_msg == NULL &&
1077:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
1078:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_CLOSE;
1079:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->msg.sd.shut = NETCONN_SHUT_RDWR;
1080:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
1081:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1082:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (lwip_netconn_do_close_internal(msg->conn, 0) != ERR_OK) {
1083:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
1084:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
1085:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1086:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
1087:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
1088:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1089:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1090:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         lwip_netconn_do_close_internal(msg->conn);
1091:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1092:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* API_EVENT is called inside lwip_netconn_do_close_internal, before releasing
1093:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            the application thread, so we can return at this point! */
1094:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return;
1095:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1096:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       default:
1097:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1098:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1099:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->pcb.tcp = NULL;
1100:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1101:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* tcp netconns don't come here! */
1102:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1103:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* @todo: this lets select make the socket readable and writable,
1104:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        which is wrong! errfd instead? */
1105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_RCVPLUS, 0);
1106:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_SENDPLUS, 0);
1107:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1108:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (sys_sem_valid(LWIP_API_MSG_SEM(msg))) {
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     TCPIP_APIMSG_ACK(msg);
1110:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1111:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1112:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1113:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1114:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Bind a pcb contained in a netconn
1115:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_bind.
1116:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1117:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection and containing
1118:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *          the IP address and port to bind to
1119:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1120:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1121:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_bind(void *m)
1122:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1123:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1124:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1125:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1126:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1127:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1128:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_VAL;
1129:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
ARM GAS  /tmp/ccUeKVGD.s 			page 33


1130:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1131:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1132:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_RAW:
1133:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = raw_bind(msg->conn->pcb.raw, API_EXPR_REF(msg->msg.bc.ipaddr));
1134:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1135:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1136:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1137:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_UDP:
1138:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = udp_bind(msg->conn->pcb.udp, API_EXPR_REF(msg->msg.bc.ipaddr), msg->msg.bc.port)
1139:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1140:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1141:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1142:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_TCP:
1143:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_bind(msg->conn->pcb.tcp, API_EXPR_REF(msg->msg.bc.ipaddr), msg->msg.bc.port)
1144:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1145:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1146:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       default:
1147:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1148:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1149:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1150:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1152:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1153:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1154:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1155:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1156:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * TCP callback function if a connection (opened by tcp_connect/lwip_netconn_do_connect) has
1157:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * been established (or reset by the remote host).
1158:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1159:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @see tcp.h (struct tcp_pcb.connected) for parameters and return values
1160:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1161:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
1162:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_connected(void *arg, struct tcp_pcb *pcb, err_t err)
1163:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 643              		.loc 1 1163 0
 644              		.cfi_startproc
 645              		@ args = 0, pretend = 0, frame = 0
 646              		@ frame_needed = 0, uses_anonymous_args = 0
 647              	.LVL81:
1164:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
1165:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   int was_blocking;
1166:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_t* op_completed_sem = NULL;
1167:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1168:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_UNUSED_ARG(pcb);
1169:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1170:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
1171:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1172:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 648              		.loc 1 1172 0
 649 0000 0028     		cmp	r0, #0
 650 0002 69D0     		beq	.L74
1163:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 651              		.loc 1 1163 0
 652 0004 70B5     		push	{r4, r5, r6, lr}
 653              	.LCFI4:
 654              		.cfi_def_cfa_offset 16
 655              		.cfi_offset 4, -16
ARM GAS  /tmp/ccUeKVGD.s 			page 34


 656              		.cfi_offset 5, -12
 657              		.cfi_offset 6, -8
 658              		.cfi_offset 14, -4
 659 0006 0446     		mov	r4, r0
 660 0008 1646     		mov	r6, r2
1173:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
1174:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1175:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1176:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_CONNECT", conn->state == NETCONN_CONNECT);
 661              		.loc 1 1176 0
 662 000a 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 663 000c 032B     		cmp	r3, #3
 664 000e 3AD1     		bne	.L81
 665              	.LVL82:
 666              	.L67:
1177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("(conn->current_msg != NULL) || conn->in_non_blocking_connect",
 667              		.loc 1 1177 0
 668 0010 636A     		ldr	r3, [r4, #36]
 669 0012 002B     		cmp	r3, #0
 670 0014 3FD0     		beq	.L82
 671              	.L68:
1178:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (conn->current_msg != NULL) || IN_NONBLOCKING_CONNECT(conn));
1179:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1180:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn->current_msg != NULL) {
 672              		.loc 1 1180 0
 673 0016 636A     		ldr	r3, [r4, #36]
 674 0018 002B     		cmp	r3, #0
 675 001a 48D0     		beq	.L75
1181:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 676              		.loc 1 1181 0
 677 001c 1E71     		strb	r6, [r3, #4]
1182:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 678              		.loc 1 1182 0
 679 001e 636A     		ldr	r3, [r4, #36]
 680 0020 1D68     		ldr	r5, [r3]
 681 0022 0C35     		adds	r5, r5, #12
 682              	.LVL83:
 683              	.L69:
1183:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1184:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP) && (err == ERR_OK)) {
 684              		.loc 1 1184 0
 685 0024 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 686 0026 03F0F003 		and	r3, r3, #240
 687 002a 102B     		cmp	r3, #16
 688 002c 41D0     		beq	.L83
 689              	.L70:
1185:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     setup_tcp(conn);
1186:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1187:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   was_blocking = !IN_NONBLOCKING_CONNECT(conn);
 690              		.loc 1 1187 0
 691 002e 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 692 0030 03F00406 		and	r6, r3, #4
 693 0034 002E     		cmp	r6, #0
 694 0036 0CBF     		ite	eq
 695 0038 0122     		moveq	r2, #1
 696 003a 0022     		movne	r2, #0
 697              	.LVL84:
ARM GAS  /tmp/ccUeKVGD.s 			page 35


1188:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   SET_NONBLOCKING_CONNECT(conn, 0);
 698              		.loc 1 1188 0
 699 003c 23F00403 		bic	r3, r3, #4
 700 0040 2377     		strb	r3, [r4, #28]
1189:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("blocking connect state error",
 701              		.loc 1 1189 0
 702 0042 14BF     		ite	ne
 703 0044 0123     		movne	r3, #1
 704 0046 0023     		moveq	r3, #0
 705 0048 002D     		cmp	r5, #0
 706 004a 08BF     		it	eq
 707 004c 0123     		moveq	r3, #1
 708 004e 1BB1     		cbz	r3, .L71
 709              		.loc 1 1189 0 is_stmt 0 discriminator 1
 710 0050 002D     		cmp	r5, #0
 711 0052 18BF     		it	ne
 712 0054 0122     		movne	r2, #1
 713              	.LVL85:
 714 0056 92BB     		cbnz	r2, .L84
 715              	.L71:
1190:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (was_blocking && op_completed_sem != NULL) ||
1191:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (!was_blocking && op_completed_sem == NULL));
1192:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->current_msg = NULL;
 716              		.loc 1 1192 0 is_stmt 1
 717 0058 0023     		movs	r3, #0
 718 005a 6362     		str	r3, [r4, #36]
1193:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->state = NETCONN_NONE;
 719              		.loc 1 1193 0
 720 005c 6370     		strb	r3, [r4, #1]
 721              	.LBB9:
1194:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   NETCONN_SET_SAFE_ERR(conn, ERR_OK);
 722              		.loc 1 1194 0
 723 005e FFF7FEFF 		bl	sys_arch_protect
 724              	.LVL86:
 725 0062 94F90830 		ldrsb	r3, [r4, #8]
 726 0066 13F10C0F 		cmn	r3, #12
 727 006a 01DB     		blt	.L72
 728              		.loc 1 1194 0 is_stmt 0 discriminator 2
 729 006c 0023     		movs	r3, #0
 730 006e 2372     		strb	r3, [r4, #8]
 731              	.L72:
 732              		.loc 1 1194 0 discriminator 4
 733 0070 FFF7FEFF 		bl	sys_arch_unprotect
 734              	.LVL87:
 735              	.LBE9:
1195:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 736              		.loc 1 1195 0 is_stmt 1 discriminator 4
 737 0074 A36A     		ldr	r3, [r4, #40]
 738 0076 1BB1     		cbz	r3, .L73
 739              		.loc 1 1195 0 is_stmt 0 discriminator 1
 740 0078 0022     		movs	r2, #0
 741 007a 0221     		movs	r1, #2
 742 007c 2046     		mov	r0, r4
 743 007e 9847     		blx	r3
 744              	.LVL88:
 745              	.L73:
1196:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
ARM GAS  /tmp/ccUeKVGD.s 			page 36


1197:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (was_blocking) {
 746              		.loc 1 1197 0 is_stmt 1
 747 0080 2EB3     		cbz	r6, .L85
1198:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_signal(op_completed_sem);
1199:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1200:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 748              		.loc 1 1200 0
 749 0082 0020     		movs	r0, #0
 750              	.L66:
1201:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 751              		.loc 1 1201 0
 752 0084 70BD     		pop	{r4, r5, r6, pc}
 753              	.LVL89:
 754              	.L81:
1176:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("(conn->current_msg != NULL) || conn->in_non_blocking_connect",
 755              		.loc 1 1176 0 discriminator 1
 756 0086 164B     		ldr	r3, .L86
 757 0088 4FF49362 		mov	r2, #1176
 758              	.LVL90:
 759 008c 1549     		ldr	r1, .L86+4
 760              	.LVL91:
 761 008e 1648     		ldr	r0, .L86+8
 762              	.LVL92:
 763 0090 FFF7FEFF 		bl	printf
 764              	.LVL93:
 765 0094 BCE7     		b	.L67
 766              	.L82:
1177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (conn->current_msg != NULL) || IN_NONBLOCKING_CONNECT(conn));
 767              		.loc 1 1177 0 discriminator 1
 768 0096 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 769 0098 13F0040F 		tst	r3, #4
 770 009c BBD1     		bne	.L68
1177:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (conn->current_msg != NULL) || IN_NONBLOCKING_CONNECT(conn));
 771              		.loc 1 1177 0 is_stmt 0 discriminator 2
 772 009e 104B     		ldr	r3, .L86
 773 00a0 40F29A42 		movw	r2, #1178
 774 00a4 1149     		ldr	r1, .L86+12
 775 00a6 1048     		ldr	r0, .L86+8
 776 00a8 FFF7FEFF 		bl	printf
 777              	.LVL94:
 778 00ac B3E7     		b	.L68
 779              	.L75:
1166:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 780              		.loc 1 1166 0 is_stmt 1
 781 00ae 0025     		movs	r5, #0
 782 00b0 B8E7     		b	.L69
 783              	.LVL95:
 784              	.L83:
1184:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     setup_tcp(conn);
 785              		.loc 1 1184 0 discriminator 1
 786 00b2 002E     		cmp	r6, #0
 787 00b4 BBD1     		bne	.L70
1185:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 788              		.loc 1 1185 0
 789 00b6 2046     		mov	r0, r4
 790 00b8 FFF7FEFF 		bl	setup_tcp
 791              	.LVL96:
ARM GAS  /tmp/ccUeKVGD.s 			page 37


 792 00bc B7E7     		b	.L70
 793              	.L84:
1189:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (was_blocking && op_completed_sem != NULL) ||
 794              		.loc 1 1189 0 discriminator 2
 795 00be 084B     		ldr	r3, .L86
 796 00c0 40F2A742 		movw	r2, #1191
 797 00c4 0A49     		ldr	r1, .L86+16
 798 00c6 0848     		ldr	r0, .L86+8
 799 00c8 FFF7FEFF 		bl	printf
 800              	.LVL97:
 801 00cc C4E7     		b	.L71
 802              	.L85:
1198:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 803              		.loc 1 1198 0
 804 00ce 2846     		mov	r0, r5
 805 00d0 FFF7FEFF 		bl	sys_sem_signal
 806              	.LVL98:
1200:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 807              		.loc 1 1200 0
 808 00d4 0020     		movs	r0, #0
 809 00d6 D5E7     		b	.L66
 810              	.LVL99:
 811              	.L74:
 812              	.LCFI5:
 813              		.cfi_def_cfa_offset 0
 814              		.cfi_restore 4
 815              		.cfi_restore 5
 816              		.cfi_restore 6
 817              		.cfi_restore 14
1173:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 818              		.loc 1 1173 0
 819 00d8 6FF00500 		mvn	r0, #5
 820              	.LVL100:
 821              		.loc 1 1201 0
 822 00dc 7047     		bx	lr
 823              	.L87:
 824 00de 00BF     		.align	2
 825              	.L86:
 826 00e0 00000000 		.word	.LC0
 827 00e4 00000000 		.word	.LC10
 828 00e8 54000000 		.word	.LC2
 829 00ec 20000000 		.word	.LC11
 830 00f0 60000000 		.word	.LC12
 831              		.cfi_endproc
 832              	.LFE174:
 834              		.section	.text.lwip_netconn_do_writemore,"ax",%progbits
 835              		.align	1
 836              		.syntax unified
 837              		.thumb
 838              		.thumb_func
 839              		.fpu fpv5-sp-d16
 841              	lwip_netconn_do_writemore:
 842              	.LFB180:
1202:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1203:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1204:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1205:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Connect a pcb contained inside a netconn
ARM GAS  /tmp/ccUeKVGD.s 			page 38


1206:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_connect.
1207:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1208:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection and containing
1209:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *          the IP address and port to connect to
1210:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1211:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1212:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_connect(void *m)
1213:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1214:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1215:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1216:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp == NULL) {
1217:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This may happen when calling netconn_connect() a second time */
1218:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CLSD;
1219:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1220:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1221:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1222:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_RAW:
1223:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = raw_connect(msg->conn->pcb.raw, API_EXPR_REF(msg->msg.bc.ipaddr));
1224:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1225:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1226:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1227:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_UDP:
1228:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = udp_connect(msg->conn->pcb.udp, API_EXPR_REF(msg->msg.bc.ipaddr), msg->msg.bc.port
1229:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1230:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1231:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1232:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_TCP:
1233:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Prevent connect while doing any other action. */
1234:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->conn->state == NETCONN_CONNECT) {
1235:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ALREADY;
1236:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->state != NETCONN_NONE) {
1237:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ISCONN;
1238:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1239:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         setup_tcp(msg->conn);
1240:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_connect(msg->conn->pcb.tcp, API_EXPR_REF(msg->msg.bc.ipaddr),
1241:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->msg.bc.port, lwip_netconn_do_connected);
1242:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (msg->err == ERR_OK) {
1243:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           u8_t non_blocking = netconn_is_nonblocking(msg->conn);
1244:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->state = NETCONN_CONNECT;
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           SET_NONBLOCKING_CONNECT(msg->conn, non_blocking);
1246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
1247:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = ERR_INPROGRESS;
1248:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
1249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->conn->current_msg = msg;
1250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* sys_sem_signal() is called from lwip_netconn_do_connected (or err_tcp()),
1251:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                when the connection is established! */
1252:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LWIP_ASSERT("state!", msg->conn->state == NETCONN_CONNECT);
1254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             UNLOCK_TCPIP_CORE();
1255:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1256:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LOCK_TCPIP_CORE();
1257:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LWIP_ASSERT("state!", msg->conn->state != NETCONN_CONNECT);
1258:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1259:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             return;
1260:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
1261:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1262:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
ARM GAS  /tmp/ccUeKVGD.s 			page 39


1263:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1264:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1265:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     default:
1266:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ERROR("Invalid netconn type", 0, do{ msg->err = ERR_VAL; }while(0));
1267:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1268:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1269:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1270:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* For all other protocols, netconn_connect() calls TCPIP_APIMSG(),
1271:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****      so use TCPIP_APIMSG_ACK() here. */
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1273:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1274:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1275:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1276:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Disconnect a pcb contained inside a netconn
1277:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Only used for UDP netconns.
1278:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_disconnect.
1279:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1280:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection to disconnect
1281:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1282:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1283:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_disconnect(void *m)
1284:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1285:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1286:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1287:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1288:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_UDP) {
1289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     udp_disconnect(msg->conn->pcb.udp);
1290:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
1291:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1292:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1293:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1294:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_VAL;
1295:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1297:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1298:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1299:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1300:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1301:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Set a TCP pcb contained in a netconn into listen mode
1302:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_listen.
1303:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1304:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1305:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1306:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1307:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_listen(void *m)
1308:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1309:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1310:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1312:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1313:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
1315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1316:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1317:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (msg->conn->state == NETCONN_NONE) {
1318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           struct tcp_pcb* lpcb;
1319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (msg->conn->pcb.tcp->state != CLOSED) {
ARM GAS  /tmp/ccUeKVGD.s 			page 40


1320:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* connection is not closed, cannot listen */
1321:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = ERR_VAL;
1322:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
1323:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             err_t err;
1324:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             u8_t backlog;
1325:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if TCP_LISTEN_BACKLOG
1326:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             backlog = msg->msg.lb.backlog;
1327:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else  /* TCP_LISTEN_BACKLOG */
1328:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             backlog = TCP_DEFAULT_LISTEN_BACKLOG;
1329:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* TCP_LISTEN_BACKLOG */
1330:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_IPV4 && LWIP_IPV6
1331:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* "Socket API like" dual-stack support: If IP to listen to is IP6_ADDR_ANY,
1332:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              * and NETCONN_FLAG_IPV6_V6ONLY is NOT set, use IP_ANY_TYPE to listen
1333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              */
1334:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             if (ip_addr_cmp(&msg->conn->pcb.ip->local_ip, IP6_ADDR_ANY) &&
1335:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 (netconn_get_ipv6only(msg->conn) == 0)) {
1336:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* change PCB type to IPADDR_TYPE_ANY */
1337:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               IP_SET_TYPE_VAL(msg->conn->pcb.tcp->local_ip,  IPADDR_TYPE_ANY);
1338:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               IP_SET_TYPE_VAL(msg->conn->pcb.tcp->remote_ip, IPADDR_TYPE_ANY);
1339:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             }
1340:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1341:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1342:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             lpcb = tcp_listen_with_backlog_and_err(msg->conn->pcb.tcp, backlog, &err);
1343:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1344:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             if (lpcb == NULL) {
1345:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* in this case, the old pcb is still allocated */
1346:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               msg->err = err;
1347:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             } else {
1348:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* delete the recvmbox and allocate the acceptmbox */
1349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (sys_mbox_valid(&msg->conn->recvmbox)) {
1350:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 /** @todo: should we drain the recvmbox here? */
1351:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 sys_mbox_free(&msg->conn->recvmbox);
1352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 sys_mbox_set_invalid(&msg->conn->recvmbox);
1353:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
1354:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               msg->err = ERR_OK;
1355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (!sys_mbox_valid(&msg->conn->acceptmbox)) {
1356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->err = sys_mbox_new(&msg->conn->acceptmbox, DEFAULT_ACCEPTMBOX_SIZE);
1357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
1358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (msg->err == ERR_OK) {
1359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->state = NETCONN_LISTEN;
1360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = lpcb;
1361:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_arg(msg->conn->pcb.tcp, msg->conn);
1362:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_accept(msg->conn->pcb.tcp, accept_function);
1363:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               } else {
1364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 /* since the old pcb is already deallocated, free lpcb now */
1365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_close(lpcb);
1366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = NULL;
1367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
1368:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             }
1369:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
1370:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else if (msg->conn->state == NETCONN_LISTEN) {
1371:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* already listening, allow updating of the backlog */
1372:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = ERR_OK;
1373:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_backlog_set(msg->conn->pcb.tcp, msg->msg.lb.backlog);
1374:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1375:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1376:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ARG;
ARM GAS  /tmp/ccUeKVGD.s 			page 41


1377:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1378:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1379:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1381:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1382:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1383:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1384:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1385:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Send some data on a RAW or UDP pcb contained in a netconn
1386:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_send
1387:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1388:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1389:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1390:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1391:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_send(void *m)
1392:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1393:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1394:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1395:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
1396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
1397:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
1399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
1400:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
1401:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1402:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_RAW:
1403:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (ip_addr_isany(&msg->msg.b->addr) || IP_IS_ANY_TYPE_VAL(msg->msg.b->addr)) {
1404:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = raw_send(msg->conn->pcb.raw, msg->msg.b->p);
1405:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1406:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = raw_sendto(msg->conn->pcb.raw, msg->msg.b->p, &msg->msg.b->addr);
1407:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1408:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1409:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1410:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1411:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       case NETCONN_UDP:
1412:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_CHECKSUM_ON_COPY
1413:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (ip_addr_isany(&msg->msg.b->addr) || IP_IS_ANY_TYPE_VAL(msg->msg.b->addr)) {
1414:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_send_chksum(msg->conn->pcb.udp, msg->msg.b->p,
1415:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->msg.b->flags & NETBUF_FLAG_CHKSUM, msg->msg.b->toport_chksum);
1416:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1417:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_sendto_chksum(msg->conn->pcb.udp, msg->msg.b->p,
1418:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             &msg->msg.b->addr, msg->msg.b->port,
1419:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->msg.b->flags & NETBUF_FLAG_CHKSUM, msg->msg.b->toport_chksum);
1420:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1421:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_CHECKSUM_ON_COPY */
1422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (ip_addr_isany_val(msg->msg.b->addr) || IP_IS_ANY_TYPE_VAL(msg->msg.b->addr)) {
1423:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_send(msg->conn->pcb.udp, msg->msg.b->p);
1424:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_sendto(msg->conn->pcb.udp, msg->msg.b->p, &msg->msg.b->addr, msg->msg.b->p
1426:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1427:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1428:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1429:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1430:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       default:
1431:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
1432:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1433:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
ARM GAS  /tmp/ccUeKVGD.s 			page 42


1434:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1436:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1437:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1438:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1439:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1440:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Indicate data has been received from a TCP pcb contained in a netconn
1441:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_recv
1442:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1443:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1444:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1445:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1446:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_recv(void *m)
1447:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1448:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1449:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1450:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   msg->err = ERR_OK;
1451:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp != NULL) {
1452:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1453:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       u32_t remaining = msg->msg.r.len;
1454:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       do {
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         u16_t recved = (remaining > 0xffff) ? 0xffff : (u16_t)remaining;
1456:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
1457:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         remaining -= recved;
1458:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } while (remaining != 0);
1459:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1460:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1462:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1463:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1464:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if TCP_LISTEN_BACKLOG
1465:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /** Indicate that a TCP pcb has been accepted
1466:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_accept
1467:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1468:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1469:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1470:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1471:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_accepted(void *m)
1472:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
1473:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1474:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1475:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   msg->err = ERR_OK;
1476:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp != NULL) {
1477:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1478:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_backlog_accepted(msg->conn->pcb.tcp);
1479:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1480:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1481:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
1482:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
1483:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* TCP_LISTEN_BACKLOG */
1484:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1485:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1486:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * See if more data needs to be written from a previous call to netconn_write.
1487:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called initially from lwip_netconn_do_write. If the first call can't send all data
1488:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * (because of low memory or empty send-buffer), this function is called again
1489:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * from sent_tcp() or poll_tcp() to send more data. If all data is sent, the
1490:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * blocking application thread (waiting in netconn_write) is released.
ARM GAS  /tmp/ccUeKVGD.s 			page 43


1491:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param conn netconn (that is currently in state NETCONN_WRITE) to process
1493:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @return ERR_OK
1494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *         ERR_MEM if LWIP_TCPIP_CORE_LOCKING=1 and sending hasn't yet finished
1495:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1496:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** static err_t
1497:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_writemore(struct netconn *conn  WRITE_DELAYED_PARAM)
1498:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 843              		.loc 1 1498 0
 844              		.cfi_startproc
 845              		@ args = 0, pretend = 0, frame = 0
 846              		@ frame_needed = 0, uses_anonymous_args = 0
 847              	.LVL101:
 848 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 849              	.LCFI6:
 850              		.cfi_def_cfa_offset 32
 851              		.cfi_offset 3, -32
 852              		.cfi_offset 4, -28
 853              		.cfi_offset 5, -24
 854              		.cfi_offset 6, -20
 855              		.cfi_offset 7, -16
 856              		.cfi_offset 8, -12
 857              		.cfi_offset 9, -8
 858              		.cfi_offset 14, -4
 859 0004 8846     		mov	r8, r1
 860              	.LVL102:
1499:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
1500:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   const void *dataptr;
1501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u16_t len, available;
1502:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t write_finished = 0;
1503:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   size_t diff;
1504:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t dontblock;
1505:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   u8_t apiflags;
1506:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn != NULL", conn != NULL);
 861              		.loc 1 1507 0
 862 0006 0446     		mov	r4, r0
 863 0008 B8B1     		cbz	r0, .L121
 864              	.LVL103:
 865              	.L89:
1508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_WRITE", (conn->state == NETCONN_WRITE));
 866              		.loc 1 1508 0
 867 000a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 868 000c 012B     		cmp	r3, #1
 869 000e 1CD1     		bne	.L122
 870              	.L90:
1509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 871              		.loc 1 1509 0
 872 0010 636A     		ldr	r3, [r4, #36]
 873 0012 13B3     		cbz	r3, .L123
 874              	.L91:
1510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->pcb.tcp != NULL", conn->pcb.tcp != NULL);
 875              		.loc 1 1510 0
 876 0014 6368     		ldr	r3, [r4, #4]
 877 0016 43B3     		cbz	r3, .L124
 878              	.L92:
1511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->write_offset < conn->current_msg->msg.w.len",
ARM GAS  /tmp/ccUeKVGD.s 			page 44


 879              		.loc 1 1511 0
 880 0018 226A     		ldr	r2, [r4, #32]
 881 001a 636A     		ldr	r3, [r4, #36]
 882 001c DB68     		ldr	r3, [r3, #12]
 883 001e 9A42     		cmp	r2, r3
 884 0020 2BD2     		bcs	.L125
 885              	.L93:
1512:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset < conn->current_msg->msg.w.len);
1513:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1514:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   apiflags = conn->current_msg->msg.w.apiflags;
 886              		.loc 1 1514 0
 887 0022 626A     		ldr	r2, [r4, #36]
 888 0024 92F81090 		ldrb	r9, [r2, #16]	@ zero_extendqisi2
 889              	.LVL104:
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   dontblock = netconn_is_nonblocking(conn) || (apiflags & NETCONN_DONTBLOCK);
 890              		.loc 1 1515 0
 891 0028 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 892 002a 13F0020F 		tst	r3, #2
 893 002e 2CD1     		bne	.L115
 894              		.loc 1 1515 0 is_stmt 0 discriminator 2
 895 0030 19F0040F 		tst	r9, #4
 896 0034 41D0     		beq	.L116
 897              		.loc 1 1515 0
 898 0036 0127     		movs	r7, #1
 899 0038 28E0     		b	.L94
 900              	.LVL105:
 901              	.L121:
1507:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->state == NETCONN_WRITE", (conn->state == NETCONN_WRITE));
 902              		.loc 1 1507 0 is_stmt 1 discriminator 1
 903 003a 744B     		ldr	r3, .L129
 904 003c 40F2E352 		movw	r2, #1507
 905 0040 7349     		ldr	r1, .L129+4
 906              	.LVL106:
 907 0042 7448     		ldr	r0, .L129+8
 908              	.LVL107:
 909 0044 FFF7FEFF 		bl	printf
 910              	.LVL108:
 911 0048 DFE7     		b	.L89
 912              	.L122:
1508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 913              		.loc 1 1508 0 discriminator 1
 914 004a 704B     		ldr	r3, .L129
 915 004c 40F2E452 		movw	r2, #1508
 916 0050 7149     		ldr	r1, .L129+12
 917 0052 7048     		ldr	r0, .L129+8
 918 0054 FFF7FEFF 		bl	printf
 919              	.LVL109:
 920 0058 DAE7     		b	.L90
 921              	.L123:
1509:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->pcb.tcp != NULL", conn->pcb.tcp != NULL);
 922              		.loc 1 1509 0 discriminator 1
 923 005a 6C4B     		ldr	r3, .L129
 924 005c 40F2E552 		movw	r2, #1509
 925 0060 6E49     		ldr	r1, .L129+16
 926 0062 6C48     		ldr	r0, .L129+8
 927 0064 FFF7FEFF 		bl	printf
 928              	.LVL110:
ARM GAS  /tmp/ccUeKVGD.s 			page 45


 929 0068 D4E7     		b	.L91
 930              	.L124:
1510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->write_offset < conn->current_msg->msg.w.len",
 931              		.loc 1 1510 0 discriminator 1
 932 006a 684B     		ldr	r3, .L129
 933 006c 40F2E652 		movw	r2, #1510
 934 0070 6B49     		ldr	r1, .L129+20
 935 0072 6848     		ldr	r0, .L129+8
 936 0074 FFF7FEFF 		bl	printf
 937              	.LVL111:
 938 0078 CEE7     		b	.L92
 939              	.L125:
1511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset < conn->current_msg->msg.w.len);
 940              		.loc 1 1511 0 discriminator 1
 941 007a 644B     		ldr	r3, .L129
 942 007c 4FF4BD62 		mov	r2, #1512
 943 0080 6849     		ldr	r1, .L129+24
 944 0082 6448     		ldr	r0, .L129+8
 945 0084 FFF7FEFF 		bl	printf
 946              	.LVL112:
 947 0088 CBE7     		b	.L93
 948              	.LVL113:
 949              	.L115:
 950              		.loc 1 1515 0
 951 008a 0127     		movs	r7, #1
 952              	.L94:
 953              		.loc 1 1515 0 is_stmt 0 discriminator 6
 954 008c FFB2     		uxtb	r7, r7
 955              	.LVL114:
1516:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1517:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_SNDTIMEO
1518:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((conn->send_timeout != 0) &&
1519:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((s32_t)(sys_now() - conn->current_msg->msg.w.time_started) >= conn->send_timeout)) {
1520:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     write_finished = 1;
1521:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->write_offset == 0) {
1522:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* nothing has been written */
1523:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = ERR_WOULDBLOCK;
1524:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = 0;
1525:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1526:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* partial write */
1527:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err = ERR_OK;
1528:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = conn->write_offset;
1529:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->write_offset = 0;
1530:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1531:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1532:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO */
1533:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     dataptr = (const u8_t*)conn->current_msg->msg.w.dataptr + conn->write_offset;
 956              		.loc 1 1534 0 is_stmt 1 discriminator 6
 957 008e 9668     		ldr	r6, [r2, #8]
 958 0090 236A     		ldr	r3, [r4, #32]
 959 0092 1E44     		add	r6, r6, r3
 960              	.LVL115:
1535:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     diff = conn->current_msg->msg.w.len - conn->write_offset;
 961              		.loc 1 1535 0 discriminator 6
 962 0094 D268     		ldr	r2, [r2, #12]
 963 0096 D51A     		subs	r5, r2, r3
ARM GAS  /tmp/ccUeKVGD.s 			page 46


 964              	.LVL116:
1536:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (diff > 0xffffUL) { /* max_u16_t */
 965              		.loc 1 1536 0 discriminator 6
 966 0098 B5F5803F 		cmp	r5, #65536
 967 009c 0FD3     		bcc	.L95
 968              	.LVL117:
1537:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = 0xffff;
1538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       apiflags |= TCP_WRITE_FLAG_MORE;
 969              		.loc 1 1538 0
 970 009e 49F00209 		orr	r9, r9, #2
 971              	.LVL118:
1537:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = 0xffff;
 972              		.loc 1 1537 0
 973 00a2 4FF6FF75 		movw	r5, #65535
 974              	.LVL119:
 975              	.L96:
1539:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1540:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = (u16_t)diff;
1541:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1542:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     available = tcp_sndbuf(conn->pcb.tcp);
 976              		.loc 1 1542 0
 977 00a6 6168     		ldr	r1, [r4, #4]
 978 00a8 B1F86010 		ldrh	r1, [r1, #96]
 979              	.LVL120:
1543:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (available < len) {
 980              		.loc 1 1543 0
 981 00ac 8D42     		cmp	r5, r1
 982 00ae 0BD9     		bls	.L97
 983              	.LVL121:
1544:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* don't try to write more than sendbuf */
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       len = available;
1546:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
 984              		.loc 1 1546 0
 985 00b0 3FB1     		cbz	r7, .L98
1547:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (!len) {
 986              		.loc 1 1547 0
 987 00b2 0029     		cmp	r1, #0
 988 00b4 3ED0     		beq	.L117
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
 989              		.loc 1 1545 0
 990 00b6 0D46     		mov	r5, r1
 991 00b8 06E0     		b	.L97
 992              	.LVL122:
 993              	.L116:
1515:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 994              		.loc 1 1515 0
 995 00ba 0027     		movs	r7, #0
 996 00bc E6E7     		b	.L94
 997              	.LVL123:
 998              	.L95:
1540:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 999              		.loc 1 1540 0
 1000 00be ADB2     		uxth	r5, r5
 1001              	.LVL124:
 1002 00c0 F1E7     		b	.L96
 1003              	.LVL125:
 1004              	.L98:
ARM GAS  /tmp/ccUeKVGD.s 			page 47


1548:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_WOULDBLOCK;
1549:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           goto err_mem;
1550:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1551:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1552:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         apiflags |= TCP_WRITE_FLAG_MORE;
 1005              		.loc 1 1552 0
 1006 00c2 49F00209 		orr	r9, r9, #2
 1007              	.LVL126:
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
 1008              		.loc 1 1545 0
 1009 00c6 0D46     		mov	r5, r1
 1010              	.LVL127:
 1011              	.L97:
1553:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1554:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1555:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_ASSERT("lwip_netconn_do_writemore: invalid length!", ((conn->write_offset + len) <= conn->
 1012              		.loc 1 1555 0
 1013 00c8 2B44     		add	r3, r3, r5
 1014              	.LVL128:
 1015 00ca 9A42     		cmp	r2, r3
 1016 00cc 2AD3     		bcc	.L126
 1017              	.LVL129:
 1018              	.L100:
1556:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_write(conn->pcb.tcp, dataptr, len, apiflags);
 1019              		.loc 1 1556 0
 1020 00ce 4B46     		mov	r3, r9
 1021 00d0 2A46     		mov	r2, r5
 1022 00d2 3146     		mov	r1, r6
 1023 00d4 6068     		ldr	r0, [r4, #4]
 1024 00d6 FFF7FEFF 		bl	tcp_write
 1025              	.LVL130:
 1026 00da 0646     		mov	r6, r0
 1027              	.LVL131:
1557:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* if OK or memory error, check available space */
1558:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if ((err == ERR_OK) || (err == ERR_MEM)) {
 1028              		.loc 1 1558 0
 1029 00dc 431C     		adds	r3, r0, #1
 1030 00de DBB2     		uxtb	r3, r3
 1031 00e0 012B     		cmp	r3, #1
 1032 00e2 2AD9     		bls	.L99
 1033              	.LVL132:
 1034              	.L101:
1559:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** err_mem:
1560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock && (len < conn->current_msg->msg.w.len)) {
1561:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write did not write everything: mark the pcb non-writable
1562:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            and let poll_tcp check writable space to mark the pcb writable again */
1563:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDMINUS, len);
1564:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->flags |= NETCONN_FLAG_CHECK_WRITESPACE;
1565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if ((tcp_sndbuf(conn->pcb.tcp) <= TCP_SNDLOWAT) ||
1566:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                  (tcp_sndqueuelen(conn->pcb.tcp) >= TCP_SNDQUEUELOWAT)) {
1567:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* The queued byte- or pbuf-count exceeds the configured low-water limit,
1568:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            let select mark this pcb as non-writable. */
1569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDMINUS, len);
1570:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1571:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1572:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1573:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_OK) {
ARM GAS  /tmp/ccUeKVGD.s 			page 48


 1035              		.loc 1 1573 0
 1036 00e4 002E     		cmp	r6, #0
 1037 00e6 4AD1     		bne	.L105
 1038              	.LBB10:
1574:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err_t out_err;
1575:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->write_offset += len;
 1039              		.loc 1 1575 0
 1040 00e8 236A     		ldr	r3, [r4, #32]
 1041 00ea 1D44     		add	r5, r5, r3
 1042              	.LVL133:
 1043 00ec 2562     		str	r5, [r4, #32]
1576:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((conn->write_offset == conn->current_msg->msg.w.len) || dontblock) {
 1044              		.loc 1 1576 0
 1045 00ee 636A     		ldr	r3, [r4, #36]
 1046 00f0 DA68     		ldr	r2, [r3, #12]
 1047 00f2 9542     		cmp	r5, r2
 1048 00f4 00D0     		beq	.L106
 1049              		.loc 1 1576 0 is_stmt 0 discriminator 1
 1050 00f6 0FB1     		cbz	r7, .L107
 1051              	.L106:
1577:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* return sent length */
1578:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = conn->write_offset;
 1052              		.loc 1 1578 0 is_stmt 1
 1053 00f8 DD60     		str	r5, [r3, #12]
 1054              	.LVL134:
1579:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* everything was written */
1580:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 1055              		.loc 1 1580 0
 1056 00fa 0127     		movs	r7, #1
 1057              	.LVL135:
 1058              	.L107:
1581:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1582:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       out_err = tcp_output(conn->pcb.tcp);
 1059              		.loc 1 1582 0
 1060 00fc 6068     		ldr	r0, [r4, #4]
 1061 00fe FFF7FEFF 		bl	tcp_output
 1062              	.LVL136:
1583:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
 1063              		.loc 1 1583 0
 1064 0102 10F10C0F 		cmn	r0, #12
 1065 0106 ACBF     		ite	ge
 1066 0108 0022     		movge	r2, #0
 1067 010a 0122     		movlt	r2, #1
 1068 010c 10F1040F 		cmn	r0, #4
 1069 0110 14BF     		ite	ne
 1070 0112 0023     		movne	r3, #0
 1071 0114 0123     		moveq	r3, #1
 1072 0116 1343     		orrs	r3, r2, r3
 1073 0118 6ED0     		beq	.L108
 1074              	.LVL137:
1584:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
1585:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            don't try writing any more but return the error
1586:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            to the application thread. */
1587:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         err = out_err;
1588:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
1589:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
 1075              		.loc 1 1589 0
ARM GAS  /tmp/ccUeKVGD.s 			page 49


 1076 011a 636A     		ldr	r3, [r4, #36]
 1077 011c 0022     		movs	r2, #0
 1078 011e DA60     		str	r2, [r3, #12]
1587:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 1079              		.loc 1 1587 0
 1080 0120 0646     		mov	r6, r0
 1081 0122 32E0     		b	.L109
 1082              	.LVL138:
 1083              	.L126:
 1084              	.LBE10:
1555:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     err = tcp_write(conn->pcb.tcp, dataptr, len, apiflags);
 1085              		.loc 1 1555 0 discriminator 1
 1086 0124 394B     		ldr	r3, .L129
 1087 0126 40F21362 		movw	r2, #1555
 1088              	.LVL139:
 1089 012a 3F49     		ldr	r1, .L129+28
 1090              	.LVL140:
 1091 012c 3948     		ldr	r0, .L129+8
 1092 012e FFF7FEFF 		bl	printf
 1093              	.LVL141:
 1094 0132 CCE7     		b	.L100
 1095              	.LVL142:
 1096              	.L117:
1545:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (dontblock) {
 1097              		.loc 1 1545 0
 1098 0134 0D46     		mov	r5, r1
1548:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           goto err_mem;
 1099              		.loc 1 1548 0
 1100 0136 6FF00606 		mvn	r6, #6
 1101              	.LVL143:
 1102              	.L99:
1560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write did not write everything: mark the pcb non-writable
 1103              		.loc 1 1560 0
 1104 013a 77B1     		cbz	r7, .L102
1560:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write did not write everything: mark the pcb non-writable
 1105              		.loc 1 1560 0 is_stmt 0 discriminator 1
 1106 013c 636A     		ldr	r3, [r4, #36]
 1107 013e DB68     		ldr	r3, [r3, #12]
 1108 0140 9D42     		cmp	r5, r3
 1109 0142 0AD2     		bcs	.L102
1563:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->flags |= NETCONN_FLAG_CHECK_WRITESPACE;
 1110              		.loc 1 1563 0 is_stmt 1
 1111 0144 A36A     		ldr	r3, [r4, #40]
 1112 0146 1BB1     		cbz	r3, .L103
1563:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->flags |= NETCONN_FLAG_CHECK_WRITESPACE;
 1113              		.loc 1 1563 0 is_stmt 0 discriminator 1
 1114 0148 2A46     		mov	r2, r5
 1115 014a 0321     		movs	r1, #3
 1116 014c 2046     		mov	r0, r4
 1117 014e 9847     		blx	r3
 1118              	.LVL144:
 1119              	.L103:
1564:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if ((tcp_sndbuf(conn->pcb.tcp) <= TCP_SNDLOWAT) ||
 1120              		.loc 1 1564 0 is_stmt 1
 1121 0150 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 1122 0152 43F01003 		orr	r3, r3, #16
 1123 0156 2377     		strb	r3, [r4, #28]
ARM GAS  /tmp/ccUeKVGD.s 			page 50


 1124 0158 C4E7     		b	.L101
 1125              	.L102:
1565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                  (tcp_sndqueuelen(conn->pcb.tcp) >= TCP_SNDQUEUELOWAT)) {
 1126              		.loc 1 1565 0
 1127 015a 6368     		ldr	r3, [r4, #4]
 1128 015c B3F86020 		ldrh	r2, [r3, #96]
 1129 0160 B2F5866F 		cmp	r2, #1072
 1130 0164 03D3     		bcc	.L104
1566:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* The queued byte- or pbuf-count exceeds the configured low-water limit,
 1131              		.loc 1 1566 0 discriminator 1
 1132 0166 B3F86230 		ldrh	r3, [r3, #98]
1565:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                  (tcp_sndqueuelen(conn->pcb.tcp) >= TCP_SNDQUEUELOWAT)) {
 1133              		.loc 1 1565 0 discriminator 1
 1134 016a 042B     		cmp	r3, #4
 1135 016c BAD9     		bls	.L101
 1136              	.L104:
1569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1137              		.loc 1 1569 0
 1138 016e A36A     		ldr	r3, [r4, #40]
 1139 0170 002B     		cmp	r3, #0
 1140 0172 B7D0     		beq	.L101
1569:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1141              		.loc 1 1569 0 is_stmt 0 discriminator 1
 1142 0174 2A46     		mov	r2, r5
 1143 0176 0321     		movs	r1, #3
 1144 0178 2046     		mov	r0, r4
 1145 017a 9847     		blx	r3
 1146              	.LVL145:
 1147 017c B2E7     		b	.L101
 1148              	.L105:
1590:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1591:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (err == ERR_MEM) {
 1149              		.loc 1 1591 0 is_stmt 1
 1150 017e B6F1FF3F 		cmp	r6, #-1
 1151 0182 1DD0     		beq	.L127
 1152              	.LVL146:
1592:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* If ERR_MEM, we wait for sent_tcp or poll_tcp to be called.
1593:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          For blocking sockets, we do NOT return to the application
1594:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          thread, since ERR_MEM is only a temporary error! Non-blocking
1595:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          will remain non-writable until sent_tcp/poll_tcp is called */
1596:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1597:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* tcp_write returned ERR_MEM, try tcp_output anyway */
1598:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       err_t out_err = tcp_output(conn->pcb.tcp);
1599:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
1600:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
1601:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            don't try writing any more but return the error
1602:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            to the application thread. */
1603:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         err = out_err;
1604:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
1605:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
1606:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (dontblock) {
1607:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write is done on ERR_MEM */
1608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         err = ERR_WOULDBLOCK;
1609:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
1610:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         conn->current_msg->msg.w.len = 0;
1611:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1612:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
ARM GAS  /tmp/ccUeKVGD.s 			page 51


1613:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* On errors != ERR_MEM, we don't try writing any more but return
1614:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****          the error to the application thread. */
1615:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       write_finished = 1;
1616:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.w.len = 0;
 1153              		.loc 1 1616 0
 1154 0184 636A     		ldr	r3, [r4, #36]
 1155 0186 0022     		movs	r2, #0
 1156 0188 DA60     		str	r2, [r3, #12]
 1157              	.LVL147:
 1158              	.L109:
 1159              	.LBB11:
1617:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1618:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1619:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (write_finished) {
1620:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* everything was written: set back connection state
1621:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        and back to application task */
1622:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_sem_t* op_completed_sem = LWIP_API_MSG_SEM(conn->current_msg);
 1160              		.loc 1 1622 0
 1161 018a 636A     		ldr	r3, [r4, #36]
 1162 018c 1868     		ldr	r0, [r3]
 1163 018e 00F10C05 		add	r5, r0, #12
 1164              	.LVL148:
1623:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 1165              		.loc 1 1623 0
 1166 0192 1E71     		strb	r6, [r3, #4]
1624:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
 1167              		.loc 1 1624 0
 1168 0194 0023     		movs	r3, #0
 1169 0196 6362     		str	r3, [r4, #36]
1625:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->write_offset = 0;
 1170              		.loc 1 1625 0
 1171 0198 2362     		str	r3, [r4, #32]
1626:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
 1172              		.loc 1 1626 0
 1173 019a 6370     		strb	r3, [r4, #1]
1627:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 1174              		.loc 1 1627 0
 1175 019c 4CB1     		cbz	r4, .L113
 1176              	.LBB12:
 1177              		.loc 1 1627 0 is_stmt 0 discriminator 1
 1178 019e FFF7FEFF 		bl	sys_arch_protect
 1179              	.LVL149:
 1180 01a2 94F90830 		ldrsb	r3, [r4, #8]
 1181 01a6 13F10C0F 		cmn	r3, #12
 1182 01aa 00DB     		blt	.L114
 1183              		.loc 1 1627 0 discriminator 2
 1184 01ac 2672     		strb	r6, [r4, #8]
 1185              	.L114:
 1186              		.loc 1 1627 0 discriminator 4
 1187 01ae FFF7FEFF 		bl	sys_arch_unprotect
 1188              	.LVL150:
 1189              	.L113:
 1190              	.LBE12:
1628:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1629:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (delayed)
 1191              		.loc 1 1629 0 is_stmt 1
 1192 01b2 B8F1000F 		cmp	r8, #0
ARM GAS  /tmp/ccUeKVGD.s 			page 52


 1193 01b6 24D1     		bne	.L128
 1194              	.LBE11:
1630:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1631:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     {
1632:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       sys_sem_signal(op_completed_sem);
1633:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1634:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1636:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   else {
1637:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
1638:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1639:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
1640:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return ERR_OK;
 1195              		.loc 1 1640 0
 1196 01b8 0026     		movs	r6, #0
 1197              	.LVL151:
 1198              	.L112:
1641:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1199              		.loc 1 1641 0
 1200 01ba 3046     		mov	r0, r6
 1201 01bc BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1202              	.LVL152:
 1203              	.L127:
 1204              	.LBB13:
1598:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (ERR_IS_FATAL(out_err) || (out_err == ERR_RTE)) {
 1205              		.loc 1 1598 0
 1206 01c0 6068     		ldr	r0, [r4, #4]
 1207 01c2 FFF7FEFF 		bl	tcp_output
 1208              	.LVL153:
1599:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* If tcp_output fails with fatal error or no route is found,
 1209              		.loc 1 1599 0
 1210 01c6 10F10C0F 		cmn	r0, #12
 1211 01ca ACBF     		ite	ge
 1212 01cc 0022     		movge	r2, #0
 1213 01ce 0122     		movlt	r2, #1
 1214 01d0 10F1040F 		cmn	r0, #4
 1215 01d4 14BF     		ite	ne
 1216 01d6 0023     		movne	r3, #0
 1217 01d8 0123     		moveq	r3, #1
 1218 01da 1343     		orrs	r3, r2, r3
 1219 01dc 04D0     		beq	.L111
 1220              	.LVL154:
1605:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (dontblock) {
 1221              		.loc 1 1605 0
 1222 01de 636A     		ldr	r3, [r4, #36]
 1223 01e0 0022     		movs	r2, #0
 1224 01e2 DA60     		str	r2, [r3, #12]
1603:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 1225              		.loc 1 1603 0
 1226 01e4 0646     		mov	r6, r0
 1227 01e6 D0E7     		b	.L109
 1228              	.LVL155:
 1229              	.L111:
1606:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* non-blocking write is done on ERR_MEM */
 1230              		.loc 1 1606 0
 1231 01e8 002F     		cmp	r7, #0
 1232 01ea E6D0     		beq	.L112
ARM GAS  /tmp/ccUeKVGD.s 			page 53


 1233              	.LVL156:
1610:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1234              		.loc 1 1610 0
 1235 01ec 636A     		ldr	r3, [r4, #36]
 1236 01ee 0022     		movs	r2, #0
 1237 01f0 DA60     		str	r2, [r3, #12]
1608:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_finished = 1;
 1238              		.loc 1 1608 0
 1239 01f2 6FF00606 		mvn	r6, #6
 1240 01f6 C8E7     		b	.L109
 1241              	.LVL157:
 1242              	.L108:
 1243              	.LBE13:
1619:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* everything was written: set back connection state
 1244              		.loc 1 1619 0
 1245 01f8 002F     		cmp	r7, #0
 1246 01fa C6D1     		bne	.L109
1637:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1247              		.loc 1 1637 0
 1248 01fc 4FF0FF36 		mov	r6, #-1
 1249              	.LVL158:
 1250 0200 DBE7     		b	.L112
 1251              	.LVL159:
 1252              	.L128:
 1253              	.LBB14:
1632:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1254              		.loc 1 1632 0
 1255 0202 2846     		mov	r0, r5
 1256 0204 FFF7FEFF 		bl	sys_sem_signal
 1257              	.LVL160:
 1258              	.LBE14:
1640:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1259              		.loc 1 1640 0
 1260 0208 0026     		movs	r6, #0
 1261 020a D6E7     		b	.L112
 1262              	.L130:
 1263              		.align	2
 1264              	.L129:
 1265 020c 00000000 		.word	.LC0
 1266 0210 00000000 		.word	.LC6
 1267 0214 54000000 		.word	.LC2
 1268 0218 00000000 		.word	.LC13
 1269 021c 10000000 		.word	.LC7
 1270 0220 20000000 		.word	.LC14
 1271 0224 38000000 		.word	.LC15
 1272 0228 6C000000 		.word	.LC16
 1273              		.cfi_endproc
 1274              	.LFE180:
 1276              		.section	.text.lwip_netconn_do_close_internal,"ax",%progbits
 1277              		.align	1
 1278              		.syntax unified
 1279              		.thumb
 1280              		.thumb_func
 1281              		.fpu fpv5-sp-d16
 1283              	lwip_netconn_do_close_internal:
 1284              	.LFB171:
 826:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   err_t err;
ARM GAS  /tmp/ccUeKVGD.s 			page 54


 1285              		.loc 1 826 0
 1286              		.cfi_startproc
 1287              		@ args = 0, pretend = 0, frame = 0
 1288              		@ frame_needed = 0, uses_anonymous_args = 0
 1289              	.LVL161:
 1290 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1291              	.LCFI7:
 1292              		.cfi_def_cfa_offset 32
 1293              		.cfi_offset 4, -32
 1294              		.cfi_offset 5, -28
 1295              		.cfi_offset 6, -24
 1296              		.cfi_offset 7, -20
 1297              		.cfi_offset 8, -16
 1298              		.cfi_offset 9, -12
 1299              		.cfi_offset 10, -8
 1300              		.cfi_offset 14, -4
 1301 0004 8846     		mov	r8, r1
 1302              	.LVL162:
 835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("this is for tcp netconns only", (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP));
 1303              		.loc 1 835 0
 1304 0006 0446     		mov	r4, r0
 1305 0008 0028     		cmp	r0, #0
 1306 000a 7CD0     		beq	.L161
 1307              	.LVL163:
 1308              	.L132:
 836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn must be in state NETCONN_CLOSE", (conn->state == NETCONN_CLOSE));
 1309              		.loc 1 836 0
 1310 000c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 1311 000e 03F0F003 		and	r3, r3, #240
 1312 0012 102B     		cmp	r3, #16
 1313 0014 7FD1     		bne	.L162
 1314              	.L133:
 837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb already closed", (conn->pcb.tcp != NULL));
 1315              		.loc 1 837 0
 1316 0016 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1317 0018 042B     		cmp	r3, #4
 1318 001a 40F08480 		bne	.L163
 1319              	.L134:
 838:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 1320              		.loc 1 838 0
 1321 001e 6368     		ldr	r3, [r4, #4]
 1322 0020 002B     		cmp	r3, #0
 1323 0022 00F08880 		beq	.L164
 1324              	.L135:
 839:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1325              		.loc 1 839 0
 1326 0026 636A     		ldr	r3, [r4, #36]
 1327 0028 002B     		cmp	r3, #0
 1328 002a 00F08C80 		beq	.L165
 1329              	.L136:
 841:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut = conn->current_msg->msg.sd.shut;
 1330              		.loc 1 841 0
 1331 002e 6668     		ldr	r6, [r4, #4]
 1332              	.LVL164:
 842:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_rx = shut & NETCONN_SHUT_RD;
 1333              		.loc 1 842 0
 1334 0030 636A     		ldr	r3, [r4, #36]
ARM GAS  /tmp/ccUeKVGD.s 			page 55


 1335 0032 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 1336              	.LVL165:
 843:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   shut_tx = shut & NETCONN_SHUT_WR;
 1337              		.loc 1 843 0
 1338 0034 03F00109 		and	r9, r3, #1
 1339              	.LVL166:
 844:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* shutting down both ends is the same as closing
 1340              		.loc 1 844 0
 1341 0038 03F00207 		and	r7, r3, #2
 1342              	.LVL167:
 847:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 1343              		.loc 1 847 0
 1344 003c 032B     		cmp	r3, #3
 1345 003e 0FD0     		beq	.L137
 849:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              ((tpcb->state == FIN_WAIT_1) ||
 1346              		.loc 1 849 0
 1347 0040 B9F1000F 		cmp	r9, #0
 1348 0044 06D0     		beq	.L138
 850:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == FIN_WAIT_2) ||
 1349              		.loc 1 850 0 discriminator 1
 1350 0046 327D     		ldrb	r2, [r6, #20]	@ zero_extendqisi2
 851:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               (tpcb->state == CLOSING))) {
 1351              		.loc 1 851 0 discriminator 1
 1352 0048 531F     		subs	r3, r2, #5
 1353              	.LVL168:
 1354 004a DBB2     		uxtb	r3, r3
 849:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****              ((tpcb->state == FIN_WAIT_1) ||
 1355              		.loc 1 849 0 discriminator 1
 1356 004c 082A     		cmp	r2, #8
 1357 004e 18BF     		it	ne
 1358 0050 012B     		cmpne	r3, #1
 1359 0052 05D9     		bls	.L137
 1360              	.L138:
 854:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 1361              		.loc 1 854 0
 1362 0054 002F     		cmp	r7, #0
 1363 0056 7ED0     		beq	.L157
 854:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close = 1;
 1364              		.loc 1 854 0 is_stmt 0 discriminator 1
 1365 0058 B37E     		ldrb	r3, [r6, #26]	@ zero_extendqisi2
 1366 005a 13F0100F 		tst	r3, #16
 1367 005e 7CD0     		beq	.L158
 1368              	.L137:
 862:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1369              		.loc 1 862 0 is_stmt 1
 1370 0060 0021     		movs	r1, #0
 1371 0062 3046     		mov	r0, r6
 1372 0064 FFF7FEFF 		bl	tcp_arg
 1373              	.LVL169:
 1374 0068 4FF0010A 		mov	r10, #1
 1375              	.L139:
 864:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_accept(tpcb, NULL);
 1376              		.loc 1 864 0
 1377 006c 337D     		ldrb	r3, [r6, #20]	@ zero_extendqisi2
 1378 006e 012B     		cmp	r3, #1
 1379 0070 76D0     		beq	.L166
 868:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recv(tpcb, NULL);
ARM GAS  /tmp/ccUeKVGD.s 			page 56


 1380              		.loc 1 868 0
 1381 0072 B9F1000F 		cmp	r9, #0
 1382 0076 78D1     		bne	.L167
 1383              	.L142:
 872:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, NULL);
 1384              		.loc 1 872 0
 1385 0078 002F     		cmp	r7, #0
 1386 007a 7FD1     		bne	.L168
 1387              	.L143:
 875:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_poll(tpcb, NULL, 0);
 1388              		.loc 1 875 0
 1389 007c BAF1000F 		cmp	r10, #0
 1390 0080 40F08180 		bne	.L169
 1391              	.L141:
 881:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SO_LINGER
 1392              		.loc 1 881 0
 1393 0084 BAF1000F 		cmp	r10, #0
 1394 0088 00F08780 		beq	.L144
 911:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1395              		.loc 1 911 0
 1396 008c 3046     		mov	r0, r6
 1397 008e FFF7FEFF 		bl	tcp_close
 1398              	.LVL170:
 1399 0092 0546     		mov	r5, r0
 1400              	.LVL171:
 1401              	.L145:
 916:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     close_finished = 1;
 1402              		.loc 1 916 0
 1403 0094 1DB1     		cbz	r5, .L146
 926:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Closing failed because of memory shortage, try again later. Even for
 1404              		.loc 1 926 0
 1405 0096 B5F1FF3F 		cmp	r5, #-1
 1406 009a 00F08580 		beq	.L170
 1407              	.LVL172:
 1408              	.L146:
 1409              	.LBB15:
 963:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg->err = err;
 1410              		.loc 1 963 0
 1411 009e 636A     		ldr	r3, [r4, #36]
 1412 00a0 1E68     		ldr	r6, [r3]
 1413              	.LVL173:
 1414 00a2 0C36     		adds	r6, r6, #12
 1415              	.LVL174:
 964:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->current_msg = NULL;
 1416              		.loc 1 964 0
 1417 00a4 1D71     		strb	r5, [r3, #4]
 965:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     conn->state = NETCONN_NONE;
 1418              		.loc 1 965 0
 1419 00a6 0023     		movs	r3, #0
 1420 00a8 6362     		str	r3, [r4, #36]
 966:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (err == ERR_OK) {
 1421              		.loc 1 966 0
 1422 00aa 6370     		strb	r3, [r4, #1]
 967:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (close) {
 1423              		.loc 1 967 0
 1424 00ac CDB9     		cbnz	r5, .L150
 968:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Set back some callback pointers as conn is going away */
ARM GAS  /tmp/ccUeKVGD.s 			page 57


 1425              		.loc 1 968 0
 1426 00ae BAF1000F 		cmp	r10, #0
 1427 00b2 06D0     		beq	.L151
 970:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Trigger select() in socket layer. Make sure everybody notices activity
 1428              		.loc 1 970 0
 1429 00b4 6360     		str	r3, [r4, #4]
 973:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1430              		.loc 1 973 0
 1431 00b6 A36A     		ldr	r3, [r4, #40]
 1432 00b8 1BB1     		cbz	r3, .L151
 973:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1433              		.loc 1 973 0 is_stmt 0 discriminator 1
 1434 00ba 0022     		movs	r2, #0
 1435 00bc 0421     		movs	r1, #4
 1436 00be 2046     		mov	r0, r4
 1437 00c0 9847     		blx	r3
 1438              	.LVL175:
 1439              	.L151:
 975:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_RCVPLUS, 0);
 1440              		.loc 1 975 0 is_stmt 1
 1441 00c2 B9F1000F 		cmp	r9, #0
 1442 00c6 05D0     		beq	.L152
 976:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1443              		.loc 1 976 0
 1444 00c8 A36A     		ldr	r3, [r4, #40]
 1445 00ca 1BB1     		cbz	r3, .L152
 976:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1446              		.loc 1 976 0 is_stmt 0 discriminator 1
 1447 00cc 0022     		movs	r2, #0
 1448 00ce 1146     		mov	r1, r2
 1449 00d0 2046     		mov	r0, r4
 1450 00d2 9847     		blx	r3
 1451              	.LVL176:
 1452              	.L152:
 978:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 1453              		.loc 1 978 0 is_stmt 1
 1454 00d4 2FB1     		cbz	r7, .L150
 979:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1455              		.loc 1 979 0
 1456 00d6 A36A     		ldr	r3, [r4, #40]
 1457 00d8 1BB1     		cbz	r3, .L150
 979:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 1458              		.loc 1 979 0 is_stmt 0 discriminator 1
 1459 00da 0022     		movs	r2, #0
 1460 00dc 0221     		movs	r1, #2
 1461 00de 2046     		mov	r0, r4
 1462 00e0 9847     		blx	r3
 1463              	.LVL177:
 1464              	.L150:
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1465              		.loc 1 982 0 is_stmt 1
 1466 00e2 4CB1     		cbz	r4, .L153
 1467              	.LBB16:
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1468              		.loc 1 982 0 is_stmt 0 discriminator 1
 1469 00e4 FFF7FEFF 		bl	sys_arch_protect
 1470              	.LVL178:
ARM GAS  /tmp/ccUeKVGD.s 			page 58


 1471 00e8 94F90830 		ldrsb	r3, [r4, #8]
 1472 00ec 13F10C0F 		cmn	r3, #12
 1473 00f0 00DB     		blt	.L154
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1474              		.loc 1 982 0 discriminator 2
 1475 00f2 2572     		strb	r5, [r4, #8]
 1476              	.L154:
 982:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 1477              		.loc 1 982 0 discriminator 4
 1478 00f4 FFF7FEFF 		bl	sys_arch_unprotect
 1479              	.LVL179:
 1480              	.L153:
 1481              	.LBE16:
 984:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 1482              		.loc 1 984 0 is_stmt 1
 1483 00f8 B8F1000F 		cmp	r8, #0
 1484 00fc 72D1     		bne	.L171
 990:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1485              		.loc 1 990 0
 1486 00fe 0025     		movs	r5, #0
 1487              	.LVL180:
 1488              	.L155:
 1489              	.LBE15:
1009:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 1490              		.loc 1 1009 0
 1491 0100 2846     		mov	r0, r5
 1492 0102 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1493              	.LVL181:
 1494              	.L161:
 835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("this is for tcp netconns only", (NETCONNTYPE_GROUP(conn->type) == NETCONN_TCP));
 1495              		.loc 1 835 0 discriminator 1
 1496 0106 404B     		ldr	r3, .L174
 1497 0108 40F24332 		movw	r2, #835
 1498 010c 3F49     		ldr	r1, .L174+4
 1499              	.LVL182:
 1500 010e 4048     		ldr	r0, .L174+8
 1501              	.LVL183:
 1502 0110 FFF7FEFF 		bl	printf
 1503              	.LVL184:
 1504 0114 7AE7     		b	.L132
 1505              	.L162:
 836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn must be in state NETCONN_CLOSE", (conn->state == NETCONN_CLOSE));
 1506              		.loc 1 836 0 discriminator 1
 1507 0116 3C4B     		ldr	r3, .L174
 1508 0118 4FF45172 		mov	r2, #836
 1509 011c 3D49     		ldr	r1, .L174+12
 1510 011e 3C48     		ldr	r0, .L174+8
 1511 0120 FFF7FEFF 		bl	printf
 1512              	.LVL185:
 1513 0124 77E7     		b	.L133
 1514              	.L163:
 837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("pcb already closed", (conn->pcb.tcp != NULL));
 1515              		.loc 1 837 0 discriminator 1
 1516 0126 384B     		ldr	r3, .L174
 1517 0128 40F24532 		movw	r2, #837
 1518 012c 3A49     		ldr	r1, .L174+16
 1519 012e 3848     		ldr	r0, .L174+8
ARM GAS  /tmp/ccUeKVGD.s 			page 59


 1520 0130 FFF7FEFF 		bl	printf
 1521              	.LVL186:
 1522 0134 73E7     		b	.L134
 1523              	.L164:
 838:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("conn->current_msg != NULL", conn->current_msg != NULL);
 1524              		.loc 1 838 0 discriminator 1
 1525 0136 344B     		ldr	r3, .L174
 1526 0138 40F24632 		movw	r2, #838
 1527 013c 3749     		ldr	r1, .L174+20
 1528 013e 3448     		ldr	r0, .L174+8
 1529 0140 FFF7FEFF 		bl	printf
 1530              	.LVL187:
 1531 0144 6FE7     		b	.L135
 1532              	.L165:
 839:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1533              		.loc 1 839 0 discriminator 1
 1534 0146 304B     		ldr	r3, .L174
 1535 0148 40F24732 		movw	r2, #839
 1536 014c 3449     		ldr	r1, .L174+24
 1537 014e 3048     		ldr	r0, .L174+8
 1538 0150 FFF7FEFF 		bl	printf
 1539              	.LVL188:
 1540 0154 6BE7     		b	.L136
 1541              	.LVL189:
 1542              	.L157:
 1543 0156 BA46     		mov	r10, r7
 1544 0158 88E7     		b	.L139
 1545              	.L158:
 1546 015a 4FF0000A 		mov	r10, #0
 1547 015e 85E7     		b	.L139
 1548              	.LVL190:
 1549              	.L166:
 865:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 1550              		.loc 1 865 0
 1551 0160 0021     		movs	r1, #0
 1552 0162 3046     		mov	r0, r6
 1553 0164 FFF7FEFF 		bl	tcp_accept
 1554              	.LVL191:
 1555 0168 8CE7     		b	.L141
 1556              	.L167:
 869:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_accept(tpcb, NULL);
 1557              		.loc 1 869 0
 1558 016a 0021     		movs	r1, #0
 1559 016c 3046     		mov	r0, r6
 1560 016e FFF7FEFF 		bl	tcp_recv
 1561              	.LVL192:
 870:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1562              		.loc 1 870 0
 1563 0172 0021     		movs	r1, #0
 1564 0174 3046     		mov	r0, r6
 1565 0176 FFF7FEFF 		bl	tcp_accept
 1566              	.LVL193:
 1567 017a 7DE7     		b	.L142
 1568              	.L168:
 873:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1569              		.loc 1 873 0
 1570 017c 0021     		movs	r1, #0
ARM GAS  /tmp/ccUeKVGD.s 			page 60


 1571 017e 3046     		mov	r0, r6
 1572 0180 FFF7FEFF 		bl	tcp_sent
 1573              	.LVL194:
 1574 0184 7AE7     		b	.L143
 1575              	.L169:
 876:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_err(tpcb, NULL);
 1576              		.loc 1 876 0
 1577 0186 0022     		movs	r2, #0
 1578 0188 1146     		mov	r1, r2
 1579 018a 3046     		mov	r0, r6
 1580 018c FFF7FEFF 		bl	tcp_poll
 1581              	.LVL195:
 877:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1582              		.loc 1 877 0
 1583 0190 0021     		movs	r1, #0
 1584 0192 3046     		mov	r0, r6
 1585 0194 FFF7FEFF 		bl	tcp_err
 1586              	.LVL196:
 1587 0198 74E7     		b	.L141
 1588              	.L144:
 914:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1589              		.loc 1 914 0
 1590 019a 3A46     		mov	r2, r7
 1591 019c 4946     		mov	r1, r9
 1592 019e 3046     		mov	r0, r6
 1593 01a0 FFF7FEFF 		bl	tcp_shutdown
 1594              	.LVL197:
 1595 01a4 0546     		mov	r5, r0
 1596              	.LVL198:
 1597 01a6 75E7     		b	.L145
 1598              	.L170:
 947:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SO_SNDTIMEO || LWIP_SO_LINGER */
 1599              		.loc 1 947 0
 1600 01a8 636A     		ldr	r3, [r4, #36]
 1601 01aa 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 1602 01ac 43B9     		cbnz	r3, .L147
 1603              	.LVL199:
 950:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* in this case, we want to RST the connection */
 1604              		.loc 1 950 0
 1605 01ae BAF1000F 		cmp	r10, #0
 1606 01b2 3FF474AF 		beq	.L146
 952:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           err = ERR_OK;
 1607              		.loc 1 952 0
 1608 01b6 3046     		mov	r0, r6
 1609 01b8 FFF7FEFF 		bl	tcp_abort
 1610              	.LVL200:
 953:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 1611              		.loc 1 953 0
 1612 01bc 0025     		movs	r5, #0
 1613 01be 6EE7     		b	.L146
 1614              	.LVL201:
 1615              	.L147:
 995:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 1616              		.loc 1 995 0
 1617 01c0 337D     		ldrb	r3, [r6, #20]	@ zero_extendqisi2
 1618 01c2 012B     		cmp	r3, #1
 1619 01c4 13D0     		beq	.L172
ARM GAS  /tmp/ccUeKVGD.s 			page 61


 1620              	.L149:
 996:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_sent(tpcb, sent_tcp);
 1621              		.loc 1 996 0
 1622 01c6 D7B9     		cbnz	r7, .L173
 1623              	.L156:
1000:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(tpcb, err_tcp);
 1624              		.loc 1 1000 0
 1625 01c8 0122     		movs	r2, #1
 1626 01ca 1649     		ldr	r1, .L174+28
 1627 01cc 3046     		mov	r0, r6
 1628 01ce FFF7FEFF 		bl	tcp_poll
 1629              	.LVL202:
1001:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(tpcb, conn);
 1630              		.loc 1 1001 0
 1631 01d2 1549     		ldr	r1, .L174+32
 1632 01d4 3046     		mov	r0, r6
 1633 01d6 FFF7FEFF 		bl	tcp_err
 1634              	.LVL203:
1002:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't restore recv callback: we don't want to receive any more data */
 1635              		.loc 1 1002 0
 1636 01da 2146     		mov	r1, r4
 1637 01dc 3046     		mov	r0, r6
 1638 01de FFF7FEFF 		bl	tcp_arg
 1639              	.LVL204:
1008:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 1640              		.loc 1 1008 0
 1641 01e2 8DE7     		b	.L155
 1642              	.LVL205:
 1643              	.L171:
 1644              	.LBB17:
 988:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1645              		.loc 1 988 0
 1646 01e4 3046     		mov	r0, r6
 1647 01e6 FFF7FEFF 		bl	sys_sem_signal
 1648              	.LVL206:
 990:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1649              		.loc 1 990 0
 1650 01ea 0025     		movs	r5, #0
 1651 01ec 88E7     		b	.L155
 1652              	.LVL207:
 1653              	.L172:
 1654              	.LBE17:
 995:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (shut_tx) {
 1655              		.loc 1 995 0 discriminator 1
 1656 01ee 064B     		ldr	r3, .L174
 1657 01f0 40F2E332 		movw	r2, #995
 1658 01f4 0D49     		ldr	r1, .L174+36
 1659 01f6 0648     		ldr	r0, .L174+8
 1660 01f8 FFF7FEFF 		bl	printf
 1661              	.LVL208:
 1662 01fc E3E7     		b	.L149
 1663              	.L173:
 997:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1664              		.loc 1 997 0
 1665 01fe 0C49     		ldr	r1, .L174+40
 1666 0200 3046     		mov	r0, r6
 1667 0202 FFF7FEFF 		bl	tcp_sent
ARM GAS  /tmp/ccUeKVGD.s 			page 62


 1668              	.LVL209:
 1669 0206 DFE7     		b	.L156
 1670              	.L175:
 1671              		.align	2
 1672              	.L174:
 1673 0208 00000000 		.word	.LC0
 1674 020c 00000000 		.word	.LC17
 1675 0210 54000000 		.word	.LC2
 1676 0214 10000000 		.word	.LC18
 1677 0218 30000000 		.word	.LC19
 1678 021c 54000000 		.word	.LC20
 1679 0220 10000000 		.word	.LC7
 1680 0224 00000000 		.word	poll_tcp
 1681 0228 00000000 		.word	err_tcp
 1682 022c 68000000 		.word	.LC21
 1683 0230 00000000 		.word	sent_tcp
 1684              		.cfi_endproc
 1685              	.LFE171:
 1687              		.section	.text.poll_tcp,"ax",%progbits
 1688              		.align	1
 1689              		.syntax unified
 1690              		.thumb
 1691              		.thumb_func
 1692              		.fpu fpv5-sp-d16
 1694              	poll_tcp:
 1695              	.LFB161:
 308:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 1696              		.loc 1 308 0
 1697              		.cfi_startproc
 1698              		@ args = 0, pretend = 0, frame = 0
 1699              		@ frame_needed = 0, uses_anonymous_args = 0
 1700              	.LVL210:
 1701 0000 10B5     		push	{r4, lr}
 1702              	.LCFI8:
 1703              		.cfi_def_cfa_offset 8
 1704              		.cfi_offset 4, -8
 1705              		.cfi_offset 14, -4
 1706              	.LVL211:
 312:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1707              		.loc 1 312 0
 1708 0002 0446     		mov	r4, r0
 1709 0004 F0B1     		cbz	r0, .L183
 1710              	.LVL212:
 1711              	.L177:
 314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 1712              		.loc 1 314 0
 1713 0006 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1714 0008 012B     		cmp	r3, #1
 1715 000a 23D0     		beq	.L184
 316:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if !LWIP_SO_SNDTIMEO && !LWIP_SO_LINGER
 1716              		.loc 1 316 0
 1717 000c 042B     		cmp	r3, #4
 1718 000e 26D0     		beq	.L185
 1719              	.L179:
 327:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* If the queued byte- or pbuf-count drops below the configured low-water limit,
 1720              		.loc 1 327 0
 1721 0010 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
ARM GAS  /tmp/ccUeKVGD.s 			page 63


 1722 0012 13F0100F 		tst	r3, #16
 1723 0016 13D0     		beq	.L181
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1724              		.loc 1 330 0
 1725 0018 6268     		ldr	r2, [r4, #4]
 1726 001a 8AB1     		cbz	r2, .L181
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1727              		.loc 1 330 0 is_stmt 0 discriminator 1
 1728 001c B2F86010 		ldrh	r1, [r2, #96]
 1729 0020 B1F5866F 		cmp	r1, #1072
 1730 0024 0CD3     		bcc	.L181
 331:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 1731              		.loc 1 331 0 is_stmt 1 discriminator 2
 1732 0026 B2F86220 		ldrh	r2, [r2, #98]
 330:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1733              		.loc 1 330 0 discriminator 2
 1734 002a 042A     		cmp	r2, #4
 1735 002c 08D8     		bhi	.L181
 332:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, 0);
 1736              		.loc 1 332 0
 1737 002e 23F01003 		bic	r3, r3, #16
 1738 0032 2377     		strb	r3, [r4, #28]
 333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1739              		.loc 1 333 0
 1740 0034 A36A     		ldr	r3, [r4, #40]
 1741 0036 1BB1     		cbz	r3, .L181
 333:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1742              		.loc 1 333 0 is_stmt 0 discriminator 1
 1743 0038 0022     		movs	r2, #0
 1744 003a 0221     		movs	r1, #2
 1745 003c 2046     		mov	r0, r4
 1746 003e 9847     		blx	r3
 1747              	.LVL213:
 1748              	.L181:
 338:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1749              		.loc 1 338 0 is_stmt 1
 1750 0040 0020     		movs	r0, #0
 1751 0042 10BD     		pop	{r4, pc}
 1752              	.LVL214:
 1753              	.L183:
 312:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1754              		.loc 1 312 0 discriminator 1
 1755 0044 0B4B     		ldr	r3, .L186
 1756 0046 4FF49C72 		mov	r2, #312
 1757 004a 0B49     		ldr	r1, .L186+4
 1758              	.LVL215:
 1759 004c 0B48     		ldr	r0, .L186+8
 1760              	.LVL216:
 1761 004e FFF7FEFF 		bl	printf
 1762              	.LVL217:
 1763 0052 D8E7     		b	.L177
 1764              	.L184:
 315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else if (conn->state == NETCONN_CLOSE) {
 1765              		.loc 1 315 0
 1766 0054 0121     		movs	r1, #1
 1767 0056 2046     		mov	r0, r4
 1768 0058 FFF7FEFF 		bl	lwip_netconn_do_writemore
ARM GAS  /tmp/ccUeKVGD.s 			page 64


 1769              	.LVL218:
 1770 005c D8E7     		b	.L179
 1771              	.L185:
 318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.sd.polls_left--;
 1772              		.loc 1 318 0
 1773 005e 636A     		ldr	r3, [r4, #36]
 1774 0060 1BB1     		cbz	r3, .L180
 318:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->current_msg->msg.sd.polls_left--;
 1775              		.loc 1 318 0 is_stmt 0 discriminator 1
 1776 0062 5A7A     		ldrb	r2, [r3, #9]	@ zero_extendqisi2
 1777 0064 0AB1     		cbz	r2, .L180
 319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1778              		.loc 1 319 0 is_stmt 1
 1779 0066 013A     		subs	r2, r2, #1
 1780 0068 5A72     		strb	r2, [r3, #9]
 1781              	.L180:
 322:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1782              		.loc 1 322 0
 1783 006a 0121     		movs	r1, #1
 1784 006c 2046     		mov	r0, r4
 1785 006e FFF7FEFF 		bl	lwip_netconn_do_close_internal
 1786              	.LVL219:
 1787 0072 CDE7     		b	.L179
 1788              	.L187:
 1789              		.align	2
 1790              	.L186:
 1791 0074 00000000 		.word	.LC0
 1792 0078 00000000 		.word	.LC6
 1793 007c 54000000 		.word	.LC2
 1794              		.cfi_endproc
 1795              	.LFE161:
 1797              		.section	.text.sent_tcp,"ax",%progbits
 1798              		.align	1
 1799              		.syntax unified
 1800              		.thumb
 1801              		.thumb_func
 1802              		.fpu fpv5-sp-d16
 1804              	sent_tcp:
 1805              	.LFB162:
 349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn = (struct netconn *)arg;
 1806              		.loc 1 349 0
 1807              		.cfi_startproc
 1808              		@ args = 0, pretend = 0, frame = 0
 1809              		@ frame_needed = 0, uses_anonymous_args = 0
 1810              	.LVL220:
 1811 0000 38B5     		push	{r3, r4, r5, lr}
 1812              	.LCFI9:
 1813              		.cfi_def_cfa_offset 16
 1814              		.cfi_offset 3, -16
 1815              		.cfi_offset 4, -12
 1816              		.cfi_offset 5, -8
 1817              		.cfi_offset 14, -4
 1818 0002 1546     		mov	r5, r2
 1819              	.LVL221:
 353:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1820              		.loc 1 353 0
 1821 0004 0446     		mov	r4, r0
ARM GAS  /tmp/ccUeKVGD.s 			page 65


 1822 0006 E0B1     		cbz	r0, .L194
 1823              	.LVL222:
 1824              	.L189:
 355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (conn->state == NETCONN_WRITE) {
 1825              		.loc 1 355 0
 1826 0008 CCB1     		cbz	r4, .L190
 356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_writemore(conn  WRITE_DELAYED);
 1827              		.loc 1 356 0
 1828 000a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 1829 000c 012B     		cmp	r3, #1
 1830 000e 20D0     		beq	.L195
 358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_close_internal(conn  WRITE_DELAYED);
 1831              		.loc 1 358 0
 1832 0010 042B     		cmp	r3, #4
 1833 0012 23D0     		beq	.L196
 1834              	.L192:
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1835              		.loc 1 364 0
 1836 0014 6368     		ldr	r3, [r4, #4]
 1837 0016 93B1     		cbz	r3, .L190
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1838              		.loc 1 364 0 is_stmt 0 discriminator 1
 1839 0018 B3F86020 		ldrh	r2, [r3, #96]
 1840 001c B2F5866F 		cmp	r2, #1072
 1841 0020 0DD3     		bcc	.L190
 365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       conn->flags &= ~NETCONN_FLAG_CHECK_WRITESPACE;
 1842              		.loc 1 365 0 is_stmt 1 discriminator 2
 1843 0022 B3F86230 		ldrh	r3, [r3, #98]
 364:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (tcp_sndqueuelen(conn->pcb.tcp) < TCP_SNDQUEUELOWAT)) {
 1844              		.loc 1 364 0 discriminator 2
 1845 0026 042B     		cmp	r3, #4
 1846 0028 09D8     		bhi	.L190
 366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       API_EVENT(conn, NETCONN_EVT_SENDPLUS, len);
 1847              		.loc 1 366 0
 1848 002a 237F     		ldrb	r3, [r4, #28]	@ zero_extendqisi2
 1849 002c 23F01003 		bic	r3, r3, #16
 1850 0030 2377     		strb	r3, [r4, #28]
 367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1851              		.loc 1 367 0
 1852 0032 A36A     		ldr	r3, [r4, #40]
 1853 0034 1BB1     		cbz	r3, .L190
 367:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1854              		.loc 1 367 0 is_stmt 0 discriminator 1
 1855 0036 2A46     		mov	r2, r5
 1856 0038 0221     		movs	r1, #2
 1857 003a 2046     		mov	r0, r4
 1858 003c 9847     		blx	r3
 1859              	.LVL223:
 1860              	.L190:
 372:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1861              		.loc 1 372 0 is_stmt 1
 1862 003e 0020     		movs	r0, #0
 1863 0040 38BD     		pop	{r3, r4, r5, pc}
 1864              	.LVL224:
 1865              	.L194:
 353:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1866              		.loc 1 353 0 discriminator 1
ARM GAS  /tmp/ccUeKVGD.s 			page 66


 1867 0042 094B     		ldr	r3, .L197
 1868 0044 40F26112 		movw	r2, #353
 1869              	.LVL225:
 1870 0048 0849     		ldr	r1, .L197+4
 1871              	.LVL226:
 1872 004a 0948     		ldr	r0, .L197+8
 1873              	.LVL227:
 1874 004c FFF7FEFF 		bl	printf
 1875              	.LVL228:
 1876 0050 DAE7     		b	.L189
 1877              	.L195:
 357:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (conn->state == NETCONN_CLOSE) {
 1878              		.loc 1 357 0
 1879 0052 0121     		movs	r1, #1
 1880 0054 2046     		mov	r0, r4
 1881 0056 FFF7FEFF 		bl	lwip_netconn_do_writemore
 1882              	.LVL229:
 1883 005a DBE7     		b	.L192
 1884              	.L196:
 359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1885              		.loc 1 359 0
 1886 005c 0121     		movs	r1, #1
 1887 005e 2046     		mov	r0, r4
 1888 0060 FFF7FEFF 		bl	lwip_netconn_do_close_internal
 1889              	.LVL230:
 1890 0064 D6E7     		b	.L192
 1891              	.L198:
 1892 0066 00BF     		.align	2
 1893              	.L197:
 1894 0068 00000000 		.word	.LC0
 1895 006c 00000000 		.word	.LC6
 1896 0070 54000000 		.word	.LC2
 1897              		.cfi_endproc
 1898              	.LFE162:
 1900              		.section	.text.recv_tcp,"ax",%progbits
 1901              		.align	1
 1902              		.syntax unified
 1903              		.thumb
 1904              		.thumb_func
 1905              		.fpu fpv5-sp-d16
 1907              	recv_tcp:
 1908              	.LFB160:
 244:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 1909              		.loc 1 244 0
 1910              		.cfi_startproc
 1911              		@ args = 0, pretend = 0, frame = 0
 1912              		@ frame_needed = 0, uses_anonymous_args = 0
 1913              	.LVL231:
 1914 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1915              	.LCFI10:
 1916              		.cfi_def_cfa_offset 24
 1917              		.cfi_offset 4, -24
 1918              		.cfi_offset 5, -20
 1919              		.cfi_offset 6, -16
 1920              		.cfi_offset 7, -12
 1921              		.cfi_offset 8, -8
 1922              		.cfi_offset 14, -4
ARM GAS  /tmp/ccUeKVGD.s 			page 67


 1923 0004 0446     		mov	r4, r0
 1924 0006 1546     		mov	r5, r2
 1925 0008 9846     		mov	r8, r3
 249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have an argument", arg != NULL);
 1926              		.loc 1 249 0
 1927 000a 0F46     		mov	r7, r1
 1928 000c E9B1     		cbz	r1, .L213
 1929              	.LVL232:
 1930              	.L200:
 250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 1931              		.loc 1 250 0
 1932 000e 1CB3     		cbz	r4, .L214
 1933              	.L201:
 1934              	.LVL233:
 253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 1935              		.loc 1 253 0
 1936 0010 002C     		cmp	r4, #0
 1937 0012 4AD0     		beq	.L208
 256:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1938              		.loc 1 256 0
 1939 0014 6368     		ldr	r3, [r4, #4]
 1940 0016 BB42     		cmp	r3, r7
 1941 0018 06D0     		beq	.L203
 256:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 1942              		.loc 1 256 0 is_stmt 0 discriminator 1
 1943 001a 284B     		ldr	r3, .L216
 1944 001c 4FF48072 		mov	r2, #256
 1945 0020 2749     		ldr	r1, .L216+4
 1946 0022 2848     		ldr	r0, .L216+8
 1947 0024 FFF7FEFF 		bl	printf
 1948              	.LVL234:
 1949              	.L203:
 258:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* recvmbox already deleted */
 1950              		.loc 1 258 0 is_stmt 1
 1951 0028 04F11006 		add	r6, r4, #16
 1952 002c 3046     		mov	r0, r6
 1953 002e FFF7FEFF 		bl	sys_mbox_valid
 1954              	.LVL235:
 1955 0032 C0B9     		cbnz	r0, .L204
 260:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       tcp_recved(pcb, p->tot_len);
 1956              		.loc 1 260 0
 1957 0034 002D     		cmp	r5, #0
 1958 0036 3BD0     		beq	.L209
 261:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       pbuf_free(p);
 1959              		.loc 1 261 0
 1960 0038 2989     		ldrh	r1, [r5, #8]
 1961 003a 3846     		mov	r0, r7
 1962 003c FFF7FEFF 		bl	tcp_recved
 1963              	.LVL236:
 262:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 1964              		.loc 1 262 0
 1965 0040 2846     		mov	r0, r5
 1966 0042 FFF7FEFF 		bl	pbuf_free
 1967              	.LVL237:
 264:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 1968              		.loc 1 264 0
 1969 0046 0025     		movs	r5, #0
ARM GAS  /tmp/ccUeKVGD.s 			page 68


 1970              	.LVL238:
 1971 0048 1EE0     		b	.L202
 1972              	.LVL239:
 1973              	.L213:
 249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recv_tcp must have an argument", arg != NULL);
 1974              		.loc 1 249 0 discriminator 1
 1975 004a 1C4B     		ldr	r3, .L216
 1976              	.LVL240:
 1977 004c F922     		movs	r2, #249
 1978              	.LVL241:
 1979 004e 1E49     		ldr	r1, .L216+12
 1980              	.LVL242:
 1981 0050 1C48     		ldr	r0, .L216+8
 1982              	.LVL243:
 1983 0052 FFF7FEFF 		bl	printf
 1984              	.LVL244:
 1985 0056 DAE7     		b	.L200
 1986              	.L214:
 250:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn = (struct netconn *)arg;
 1987              		.loc 1 250 0 discriminator 1
 1988 0058 184B     		ldr	r3, .L216
 1989 005a FA22     		movs	r2, #250
 1990 005c 1B49     		ldr	r1, .L216+16
 1991 005e 1948     		ldr	r0, .L216+8
 1992 0060 FFF7FEFF 		bl	printf
 1993              	.LVL245:
 1994 0064 D4E7     		b	.L201
 1995              	.LVL246:
 1996              	.L204:
 271:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     NETCONN_SET_SAFE_ERR(conn, err);
 1997              		.loc 1 271 0
 1998 0066 B8F1000F 		cmp	r8, #0
 1999 006a 10D1     		bne	.L215
 2000              	.L205:
 275:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     len = p->tot_len;
 2001              		.loc 1 275 0
 2002 006c DDB1     		cbz	r5, .L210
 276:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2003              		.loc 1 276 0
 2004 006e 2F89     		ldrh	r7, [r5, #8]
 2005              	.LVL247:
 2006              	.L207:
 281:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* don't deallocate p: it is presented to us later again from tcp_fasttmr! */
 2007              		.loc 1 281 0
 2008 0070 2946     		mov	r1, r5
 2009 0072 3046     		mov	r0, r6
 2010 0074 FFF7FEFF 		bl	sys_mbox_trypost
 2011              	.LVL248:
 2012 0078 0546     		mov	r5, r0
 2013              	.LVL249:
 2014 007a D8B9     		cbnz	r0, .L211
 289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2015              		.loc 1 289 0
 2016 007c A36A     		ldr	r3, [r4, #40]
 2017 007e 1BB1     		cbz	r3, .L202
 289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2018              		.loc 1 289 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccUeKVGD.s 			page 69


 2019 0080 3A46     		mov	r2, r7
 2020 0082 0021     		movs	r1, #0
 2021 0084 2046     		mov	r0, r4
 2022 0086 9847     		blx	r3
 2023              	.LVL250:
 2024              	.L202:
 293:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2025              		.loc 1 293 0 is_stmt 1
 2026 0088 2846     		mov	r0, r5
 2027 008a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2028              	.LVL251:
 2029              	.L215:
 2030              	.LBB18:
 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2031              		.loc 1 272 0 discriminator 1
 2032 008e FFF7FEFF 		bl	sys_arch_protect
 2033              	.LVL252:
 2034 0092 94F90830 		ldrsb	r3, [r4, #8]
 2035 0096 13F10C0F 		cmn	r3, #12
 2036 009a 01DB     		blt	.L206
 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2037              		.loc 1 272 0 is_stmt 0 discriminator 2
 2038 009c 84F80880 		strb	r8, [r4, #8]
 2039              	.L206:
 272:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2040              		.loc 1 272 0 discriminator 4
 2041 00a0 FFF7FEFF 		bl	sys_arch_unprotect
 2042              	.LVL253:
 2043 00a4 E2E7     		b	.L205
 2044              	.L210:
 2045              	.LBE18:
 278:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2046              		.loc 1 278 0 is_stmt 1
 2047 00a6 0027     		movs	r7, #0
 2048              	.LVL254:
 2049 00a8 E2E7     		b	.L207
 2050              	.LVL255:
 2051              	.L208:
 254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2052              		.loc 1 254 0
 2053 00aa 6FF00505 		mvn	r5, #5
 2054              	.LVL256:
 2055 00ae EBE7     		b	.L202
 2056              	.LVL257:
 2057              	.L209:
 264:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2058              		.loc 1 264 0
 2059 00b0 0025     		movs	r5, #0
 2060              	.LVL258:
 2061 00b2 E9E7     		b	.L202
 2062              	.LVL259:
 2063              	.L211:
 283:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2064              		.loc 1 283 0
 2065 00b4 4FF0FF35 		mov	r5, #-1
 2066 00b8 E6E7     		b	.L202
 2067              	.L217:
ARM GAS  /tmp/ccUeKVGD.s 			page 70


 2068 00ba 00BF     		.align	2
 2069              	.L216:
 2070 00bc 00000000 		.word	.LC0
 2071 00c0 44000000 		.word	.LC24
 2072 00c4 54000000 		.word	.LC2
 2073 00c8 00000000 		.word	.LC22
 2074 00cc 24000000 		.word	.LC23
 2075              		.cfi_endproc
 2076              	.LFE160:
 2078              		.section	.text.lwip_netconn_do_newconn,"ax",%progbits
 2079              		.align	1
 2080              		.global	lwip_netconn_do_newconn
 2081              		.syntax unified
 2082              		.thumb
 2083              		.thumb_func
 2084              		.fpu fpv5-sp-d16
 2086              	lwip_netconn_do_newconn:
 2087              	.LFB167:
 624:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2088              		.loc 1 624 0
 2089              		.cfi_startproc
 2090              		@ args = 0, pretend = 0, frame = 0
 2091              		@ frame_needed = 0, uses_anonymous_args = 0
 2092              	.LVL260:
 2093 0000 10B5     		push	{r4, lr}
 2094              	.LCFI11:
 2095              		.cfi_def_cfa_offset 8
 2096              		.cfi_offset 4, -8
 2097              		.cfi_offset 14, -4
 2098 0002 0446     		mov	r4, r0
 2099              	.LVL261:
 627:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp == NULL) {
 2100              		.loc 1 627 0
 2101 0004 0023     		movs	r3, #0
 2102 0006 0371     		strb	r3, [r0, #4]
 628:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     pcb_new(msg);
 2103              		.loc 1 628 0
 2104 0008 0368     		ldr	r3, [r0]
 2105 000a 5B68     		ldr	r3, [r3, #4]
 2106 000c 7BB1     		cbz	r3, .L223
 2107              	.LVL262:
 2108              	.L219:
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2109              		.loc 1 635 0
 2110 000e 2368     		ldr	r3, [r4]
 2111 0010 63B1     		cbz	r3, .L218
 2112              	.LBB19:
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2113              		.loc 1 635 0 is_stmt 0 discriminator 1
 2114 0012 FFF7FEFF 		bl	sys_arch_protect
 2115              	.LVL263:
 2116 0016 2368     		ldr	r3, [r4]
 2117 0018 93F90820 		ldrsb	r2, [r3, #8]
 2118 001c 12F10C0F 		cmn	r2, #12
 2119 0020 02DB     		blt	.L221
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2120              		.loc 1 635 0 discriminator 2
ARM GAS  /tmp/ccUeKVGD.s 			page 71


 2121 0022 94F90420 		ldrsb	r2, [r4, #4]
 2122 0026 1A72     		strb	r2, [r3, #8]
 2123              	.L221:
 635:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2124              		.loc 1 635 0 discriminator 4
 2125 0028 FFF7FEFF 		bl	sys_arch_unprotect
 2126              	.LVL264:
 2127              	.L218:
 2128              	.LBE19:
 636:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2129              		.loc 1 636 0 is_stmt 1
 2130 002c 10BD     		pop	{r4, pc}
 2131              	.LVL265:
 2132              	.L223:
 629:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2133              		.loc 1 629 0
 2134 002e FFF7FEFF 		bl	pcb_new
 2135              	.LVL266:
 2136 0032 ECE7     		b	.L219
 2137              		.cfi_endproc
 2138              	.LFE167:
 2140              		.section	.text.netconn_alloc,"ax",%progbits
 2141              		.align	1
 2142              		.global	netconn_alloc
 2143              		.syntax unified
 2144              		.thumb
 2145              		.thumb_func
 2146              		.fpu fpv5-sp-d16
 2148              	netconn_alloc:
 2149              	.LFB168:
 649:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *conn;
 2150              		.loc 1 649 0
 2151              		.cfi_startproc
 2152              		@ args = 0, pretend = 0, frame = 0
 2153              		@ frame_needed = 0, uses_anonymous_args = 0
 2154              	.LVL267:
 2155 0000 70B5     		push	{r4, r5, r6, lr}
 2156              	.LCFI12:
 2157              		.cfi_def_cfa_offset 16
 2158              		.cfi_offset 4, -16
 2159              		.cfi_offset 5, -12
 2160              		.cfi_offset 6, -8
 2161              		.cfi_offset 14, -4
 2162 0002 0546     		mov	r5, r0
 2163 0004 0E46     		mov	r6, r1
 653:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (conn == NULL) {
 2164              		.loc 1 653 0
 2165 0006 0720     		movs	r0, #7
 2166              	.LVL268:
 2167 0008 FFF7FEFF 		bl	memp_malloc
 2168              	.LVL269:
 654:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return NULL;
 2169              		.loc 1 654 0
 2170 000c 0446     		mov	r4, r0
 2171 000e 18B3     		cbz	r0, .L224
 658:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->type = t;
 2172              		.loc 1 658 0
ARM GAS  /tmp/ccUeKVGD.s 			page 72


 2173 0010 0023     		movs	r3, #0
 2174 0012 0372     		strb	r3, [r0, #8]
 659:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->pcb.tcp = NULL;
 2175              		.loc 1 659 0
 2176 0014 0570     		strb	r5, [r0]
 660:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2177              		.loc 1 660 0
 2178 0016 4360     		str	r3, [r0, #4]
 663:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 2179              		.loc 1 663 0
 2180 0018 05F0F005 		and	r5, r5, #240
 2181 001c 102D     		cmp	r5, #16
 2182 001e 01D0     		beq	.L227
 2183 0020 202D     		cmp	r5, #32
 2184 0022 1BD1     		bne	.L231
 2185              	.L227:
 2186              	.LVL270:
 684:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 2187              		.loc 1 684 0
 2188 0024 04F11005 		add	r5, r4, #16
 2189 0028 0621     		movs	r1, #6
 2190 002a 2846     		mov	r0, r5
 2191              	.LVL271:
 2192 002c FFF7FEFF 		bl	sys_mbox_new
 2193              	.LVL272:
 2194 0030 D8B9     		cbnz	r0, .L228
 688:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_free(&conn->recvmbox);
 2195              		.loc 1 688 0
 2196 0032 0021     		movs	r1, #0
 2197 0034 04F10C00 		add	r0, r4, #12
 2198 0038 FFF7FEFF 		bl	sys_sem_new
 2199              	.LVL273:
 2200 003c D8B9     		cbnz	r0, .L232
 695:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 2201              		.loc 1 695 0
 2202 003e 04F11400 		add	r0, r4, #20
 2203 0042 FFF7FEFF 		bl	sys_mbox_set_invalid
 2204              	.LVL274:
 697:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_SOCKET
 2205              		.loc 1 697 0
 2206 0046 0023     		movs	r3, #0
 2207 0048 6370     		strb	r3, [r4, #1]
 700:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_SOCKET */
 2208              		.loc 1 700 0
 2209 004a 4FF0FF32 		mov	r2, #-1
 2210 004e A261     		str	r2, [r4, #24]
 702:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 2211              		.loc 1 702 0
 2212 0050 A662     		str	r6, [r4, #40]
 704:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   conn->write_offset = 0;
 2213              		.loc 1 704 0
 2214 0052 6362     		str	r3, [r4, #36]
 705:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 2215              		.loc 1 705 0
 2216 0054 2362     		str	r3, [r4, #32]
 720:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return conn;
 2217              		.loc 1 720 0
ARM GAS  /tmp/ccUeKVGD.s 			page 73


 2218 0056 2377     		strb	r3, [r4, #28]
 2219              	.LVL275:
 2220              	.L224:
 725:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2221              		.loc 1 725 0
 2222 0058 2046     		mov	r0, r4
 2223 005a 70BD     		pop	{r4, r5, r6, pc}
 2224              	.LVL276:
 2225              	.L231:
 680:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 2226              		.loc 1 680 0
 2227 005c 084B     		ldr	r3, .L233
 2228 005e 4FF42A72 		mov	r2, #680
 2229 0062 0849     		ldr	r1, .L233+4
 2230 0064 0848     		ldr	r0, .L233+8
 2231              	.LVL277:
 2232 0066 FFF7FEFF 		bl	printf
 2233              	.LVL278:
 2234              	.L228:
 723:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   return NULL;
 2235              		.loc 1 723 0
 2236 006a 2146     		mov	r1, r4
 2237 006c 0720     		movs	r0, #7
 2238 006e FFF7FEFF 		bl	memp_free
 2239              	.LVL279:
 724:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2240              		.loc 1 724 0
 2241 0072 0024     		movs	r4, #0
 2242              	.LVL280:
 2243 0074 F0E7     		b	.L224
 2244              	.LVL281:
 2245              	.L232:
 689:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     goto free_and_return;
 2246              		.loc 1 689 0
 2247 0076 2846     		mov	r0, r5
 2248 0078 FFF7FEFF 		bl	sys_mbox_free
 2249              	.LVL282:
 690:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2250              		.loc 1 690 0
 2251 007c F5E7     		b	.L228
 2252              	.L234:
 2253 007e 00BF     		.align	2
 2254              	.L233:
 2255 0080 00000000 		.word	.LC0
 2256 0084 00000000 		.word	.LC25
 2257 0088 54000000 		.word	.LC2
 2258              		.cfi_endproc
 2259              	.LFE168:
 2261              		.section	.text.netconn_free,"ax",%progbits
 2262              		.align	1
 2263              		.global	netconn_free
 2264              		.syntax unified
 2265              		.thumb
 2266              		.thumb_func
 2267              		.fpu fpv5-sp-d16
 2269              	netconn_free:
 2270              	.LFB169:
ARM GAS  /tmp/ccUeKVGD.s 			page 74


 735:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("PCB must be deallocated outside this function", conn->pcb.tcp == NULL);
 2271              		.loc 1 735 0
 2272              		.cfi_startproc
 2273              		@ args = 0, pretend = 0, frame = 0
 2274              		@ frame_needed = 0, uses_anonymous_args = 0
 2275              	.LVL283:
 2276 0000 38B5     		push	{r3, r4, r5, lr}
 2277              	.LCFI13:
 2278              		.cfi_def_cfa_offset 16
 2279              		.cfi_offset 3, -16
 2280              		.cfi_offset 4, -12
 2281              		.cfi_offset 5, -8
 2282              		.cfi_offset 14, -4
 2283 0002 0446     		mov	r4, r0
 736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recvmbox must be deallocated before calling this function",
 2284              		.loc 1 736 0
 2285 0004 4368     		ldr	r3, [r0, #4]
 2286 0006 33B1     		cbz	r3, .L236
 736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("recvmbox must be deallocated before calling this function",
 2287              		.loc 1 736 0 is_stmt 0 discriminator 1
 2288 0008 164B     		ldr	r3, .L242
 2289 000a 4FF43872 		mov	r2, #736
 2290 000e 1649     		ldr	r1, .L242+4
 2291 0010 1648     		ldr	r0, .L242+8
 2292              	.LVL284:
 2293 0012 FFF7FEFF 		bl	printf
 2294              	.LVL285:
 2295              	.L236:
 737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->recvmbox));
 2296              		.loc 1 737 0 is_stmt 1
 2297 0016 04F11000 		add	r0, r4, #16
 2298 001a FFF7FEFF 		bl	sys_mbox_valid
 2299              	.LVL286:
 2300 001e 88B9     		cbnz	r0, .L240
 2301              	.L237:
 740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->acceptmbox));
 2302              		.loc 1 740 0
 2303 0020 04F11400 		add	r0, r4, #20
 2304 0024 FFF7FEFF 		bl	sys_mbox_valid
 2305              	.LVL287:
 2306 0028 A0B9     		cbnz	r0, .L241
 2307              	.L238:
 745:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   sys_sem_set_invalid(&conn->op_completed);
 2308              		.loc 1 745 0
 2309 002a 04F10C05 		add	r5, r4, #12
 2310 002e 2846     		mov	r0, r5
 2311 0030 FFF7FEFF 		bl	sys_sem_free
 2312              	.LVL288:
 746:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif
 2313              		.loc 1 746 0
 2314 0034 2846     		mov	r0, r5
 2315 0036 FFF7FEFF 		bl	sys_sem_set_invalid
 2316              	.LVL289:
 749:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 2317              		.loc 1 749 0
 2318 003a 2146     		mov	r1, r4
 2319 003c 0720     		movs	r0, #7
ARM GAS  /tmp/ccUeKVGD.s 			page 75


 2320 003e FFF7FEFF 		bl	memp_free
 2321              	.LVL290:
 750:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2322              		.loc 1 750 0
 2323 0042 38BD     		pop	{r3, r4, r5, pc}
 2324              	.LVL291:
 2325              	.L240:
 737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->recvmbox));
 2326              		.loc 1 737 0 discriminator 1
 2327 0044 074B     		ldr	r3, .L242
 2328 0046 40F2E222 		movw	r2, #738
 2329 004a 0949     		ldr	r1, .L242+12
 2330 004c 0748     		ldr	r0, .L242+8
 2331 004e FFF7FEFF 		bl	printf
 2332              	.LVL292:
 2333 0052 E5E7     		b	.L237
 2334              	.L241:
 740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     !sys_mbox_valid(&conn->acceptmbox));
 2335              		.loc 1 740 0 discriminator 1
 2336 0054 034B     		ldr	r3, .L242
 2337 0056 40F2E522 		movw	r2, #741
 2338 005a 0649     		ldr	r1, .L242+16
 2339 005c 0348     		ldr	r0, .L242+8
 2340 005e FFF7FEFF 		bl	printf
 2341              	.LVL293:
 2342 0062 E2E7     		b	.L238
 2343              	.L243:
 2344              		.align	2
 2345              	.L242:
 2346 0064 00000000 		.word	.LC0
 2347 0068 00000000 		.word	.LC26
 2348 006c 54000000 		.word	.LC2
 2349 0070 30000000 		.word	.LC27
 2350 0074 6C000000 		.word	.LC28
 2351              		.cfi_endproc
 2352              	.LFE169:
 2354              		.section	.text.netconn_drain,"ax",%progbits
 2355              		.align	1
 2356              		.syntax unified
 2357              		.thumb
 2358              		.thumb_func
 2359              		.fpu fpv5-sp-d16
 2361              	netconn_drain:
 2362              	.LFB170:
 762:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   void *mem;
 2363              		.loc 1 762 0
 2364              		.cfi_startproc
 2365              		@ args = 0, pretend = 0, frame = 8
 2366              		@ frame_needed = 0, uses_anonymous_args = 0
 2367              	.LVL294:
 2368 0000 70B5     		push	{r4, r5, r6, lr}
 2369              	.LCFI14:
 2370              		.cfi_def_cfa_offset 16
 2371              		.cfi_offset 4, -16
 2372              		.cfi_offset 5, -12
 2373              		.cfi_offset 6, -8
 2374              		.cfi_offset 14, -4
ARM GAS  /tmp/ccUeKVGD.s 			page 76


 2375 0002 82B0     		sub	sp, sp, #8
 2376              	.LCFI15:
 2377              		.cfi_def_cfa_offset 24
 2378 0004 0446     		mov	r4, r0
 771:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->recvmbox, &mem) != SYS_MBOX_EMPTY) {
 2379              		.loc 1 771 0
 2380 0006 00F11005 		add	r5, r0, #16
 2381 000a 2846     		mov	r0, r5
 2382              	.LVL295:
 2383 000c FFF7FEFF 		bl	sys_mbox_valid
 2384              	.LVL296:
 2385 0010 00BB     		cbnz	r0, .L245
 2386              	.L246:
 795:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     while (sys_mbox_tryfetch(&conn->acceptmbox, &mem) != SYS_MBOX_EMPTY) {
 2387              		.loc 1 795 0
 2388 0012 1434     		adds	r4, r4, #20
 2389              	.LVL297:
 2390 0014 2046     		mov	r0, r4
 2391 0016 FFF7FEFF 		bl	sys_mbox_valid
 2392              	.LVL298:
 2393 001a 0028     		cmp	r0, #0
 2394 001c 3FD0     		beq	.L244
 2395              	.L253:
 796:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (mem != &netconn_aborted) {
 2396              		.loc 1 796 0
 2397 001e 01A9     		add	r1, sp, #4
 2398 0020 2046     		mov	r0, r4
 2399 0022 FFF7FEFF 		bl	sys_arch_mbox_tryfetch
 2400              	.LVL299:
 2401 0026 B0F1FF3F 		cmp	r0, #-1
 2402 002a 32D0     		beq	.L257
 797:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         struct netconn *newconn = (struct netconn *)mem;
 2403              		.loc 1 797 0
 2404 002c 019D     		ldr	r5, [sp, #4]
 2405 002e 1D4B     		ldr	r3, .L259
 2406 0030 9D42     		cmp	r5, r3
 2407 0032 F4D0     		beq	.L253
 2408              	.LVL300:
 2409              	.LBB20:
 802:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (newconn->pcb.tcp != NULL) {
 2410              		.loc 1 802 0
 2411 0034 2846     		mov	r0, r5
 2412 0036 FFF7E3FF 		bl	netconn_drain
 2413              	.LVL301:
 803:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_abort(newconn->pcb.tcp);
 2414              		.loc 1 803 0
 2415 003a 6868     		ldr	r0, [r5, #4]
 2416 003c 18B1     		cbz	r0, .L254
 804:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           newconn->pcb.tcp = NULL;
 2417              		.loc 1 804 0
 2418 003e FFF7FEFF 		bl	tcp_abort
 2419              	.LVL302:
 805:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 2420              		.loc 1 805 0
 2421 0042 0023     		movs	r3, #0
 2422 0044 6B60     		str	r3, [r5, #4]
 2423              	.L254:
ARM GAS  /tmp/ccUeKVGD.s 			page 77


 807:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 2424              		.loc 1 807 0
 2425 0046 2846     		mov	r0, r5
 2426 0048 FFF7FEFF 		bl	netconn_free
 2427              	.LVL303:
 2428 004c E7E7     		b	.L253
 2429              	.LVL304:
 2430              	.L247:
 2431              	.LBE20:
 786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 2432              		.loc 1 786 0
 2433 004e 0198     		ldr	r0, [sp, #4]
 2434 0050 FFF7FEFF 		bl	netbuf_delete
 2435              	.LVL305:
 2436              	.L245:
 772:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 2437              		.loc 1 772 0
 2438 0054 01A9     		add	r1, sp, #4
 2439 0056 2846     		mov	r0, r5
 2440 0058 FFF7FEFF 		bl	sys_arch_mbox_tryfetch
 2441              	.LVL306:
 2442 005c B0F1FF3F 		cmp	r0, #-1
 2443 0060 10D0     		beq	.L258
 774:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (mem != NULL) {
 2444              		.loc 1 774 0
 2445 0062 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 2446 0064 03F0F003 		and	r3, r3, #240
 2447 0068 102B     		cmp	r3, #16
 2448 006a F0D1     		bne	.L247
 775:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           p = (struct pbuf*)mem;
 2449              		.loc 1 775 0
 2450 006c 019E     		ldr	r6, [sp, #4]
 2451 006e 002E     		cmp	r6, #0
 2452 0070 F0D0     		beq	.L245
 2453              	.LVL307:
 778:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             tcp_recved(conn->pcb.tcp, p->tot_len);
 2454              		.loc 1 778 0
 2455 0072 6068     		ldr	r0, [r4, #4]
 2456 0074 10B1     		cbz	r0, .L249
 779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           }
 2457              		.loc 1 779 0
 2458 0076 3189     		ldrh	r1, [r6, #8]
 2459 0078 FFF7FEFF 		bl	tcp_recved
 2460              	.LVL308:
 2461              	.L249:
 781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 2462              		.loc 1 781 0
 2463 007c 3046     		mov	r0, r6
 2464 007e FFF7FEFF 		bl	pbuf_free
 2465              	.LVL309:
 2466 0082 E7E7     		b	.L245
 2467              	.LVL310:
 2468              	.L258:
 789:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->recvmbox);
 2469              		.loc 1 789 0
 2470 0084 2846     		mov	r0, r5
 2471 0086 FFF7FEFF 		bl	sys_mbox_free
ARM GAS  /tmp/ccUeKVGD.s 			page 78


 2472              	.LVL311:
 790:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2473              		.loc 1 790 0
 2474 008a 2846     		mov	r0, r5
 2475 008c FFF7FEFF 		bl	sys_mbox_set_invalid
 2476              	.LVL312:
 2477 0090 BFE7     		b	.L246
 2478              	.LVL313:
 2479              	.L257:
 810:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&conn->acceptmbox);
 2480              		.loc 1 810 0
 2481 0092 2046     		mov	r0, r4
 2482 0094 FFF7FEFF 		bl	sys_mbox_free
 2483              	.LVL314:
 811:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2484              		.loc 1 811 0
 2485 0098 2046     		mov	r0, r4
 2486 009a FFF7FEFF 		bl	sys_mbox_set_invalid
 2487              	.LVL315:
 2488              	.L244:
 814:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2489              		.loc 1 814 0
 2490 009e 02B0     		add	sp, sp, #8
 2491              	.LCFI16:
 2492              		.cfi_def_cfa_offset 16
 2493              		@ sp needed
 2494 00a0 70BD     		pop	{r4, r5, r6, pc}
 2495              	.LVL316:
 2496              	.L260:
 2497 00a2 00BF     		.align	2
 2498              	.L259:
 2499 00a4 00000000 		.word	netconn_aborted
 2500              		.cfi_endproc
 2501              	.LFE170:
 2503              		.section	.text.accept_function,"ax",%progbits
 2504              		.align	1
 2505              		.syntax unified
 2506              		.thumb
 2507              		.thumb_func
 2508              		.fpu fpv5-sp-d16
 2510              	accept_function:
 2511              	.LFB165:
 476:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct netconn *newconn;
 2512              		.loc 1 476 0
 2513              		.cfi_startproc
 2514              		@ args = 0, pretend = 0, frame = 0
 2515              		@ frame_needed = 0, uses_anonymous_args = 0
 2516              	.LVL317:
 2517 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2518              	.LCFI17:
 2519              		.cfi_def_cfa_offset 24
 2520              		.cfi_offset 4, -24
 2521              		.cfi_offset 5, -20
 2522              		.cfi_offset 6, -16
 2523              		.cfi_offset 7, -12
 2524              		.cfi_offset 8, -8
 2525              		.cfi_offset 14, -4
ARM GAS  /tmp/ccUeKVGD.s 			page 79


 2526              	.LVL318:
 480:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_VAL;
 2527              		.loc 1 480 0
 2528 0004 0028     		cmp	r0, #0
 2529 0006 6AD0     		beq	.L266
 2530 0008 0446     		mov	r4, r0
 2531 000a 1646     		mov	r6, r2
 2532 000c 0D46     		mov	r5, r1
 483:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     LWIP_DEBUGF(API_MSG_DEBUG, ("accept_function: acceptmbox already deleted\n"));
 2533              		.loc 1 483 0
 2534 000e 00F11407 		add	r7, r0, #20
 2535 0012 3846     		mov	r0, r7
 2536              	.LVL319:
 2537 0014 FFF7FEFF 		bl	sys_mbox_valid
 2538              	.LVL320:
 2539 0018 0028     		cmp	r0, #0
 2540 001a 63D0     		beq	.L267
 488:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* out-of-pcbs during connect: pass on this error to the application */
 2541              		.loc 1 488 0
 2542 001c CDB1     		cbz	r5, .L273
 501:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (newconn == NULL) {
 2543              		.loc 1 501 0
 2544 001e A16A     		ldr	r1, [r4, #40]
 2545 0020 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 2546 0022 FFF7FEFF 		bl	netconn_alloc
 2547              	.LVL321:
 502:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* outof netconns: pass on this error to the application */
 2548              		.loc 1 502 0
 2549 0026 8046     		mov	r8, r0
 2550 0028 18B3     		cbz	r0, .L274
 510:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   setup_tcp(newconn);
 2551              		.loc 1 510 0
 2552 002a 4560     		str	r5, [r0, #4]
 511:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* no protection: when creating the pcb, the netconn is not yet known
 2553              		.loc 1 511 0
 2554 002c FFF7FEFF 		bl	setup_tcp
 2555              	.LVL322:
 514:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2556              		.loc 1 514 0
 2557 0030 88F80860 		strb	r6, [r8, #8]
 519:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* When returning != ERR_OK, the pcb is aborted in tcp_process(),
 2558              		.loc 1 519 0
 2559 0034 4146     		mov	r1, r8
 2560 0036 3846     		mov	r0, r7
 2561 0038 FFF7FEFF 		bl	sys_mbox_trypost
 2562              	.LVL323:
 2563 003c 0546     		mov	r5, r0
 2564              	.LVL324:
 2565 003e 30BB     		cbnz	r0, .L275
 538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2566              		.loc 1 538 0
 2567 0040 A36A     		ldr	r3, [r4, #40]
 2568 0042 1BB1     		cbz	r3, .L262
 538:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2569              		.loc 1 538 0 is_stmt 0 discriminator 1
 2570 0044 0022     		movs	r2, #0
 2571 0046 1146     		mov	r1, r2
ARM GAS  /tmp/ccUeKVGD.s 			page 80


 2572 0048 2046     		mov	r0, r4
 2573 004a 9847     		blx	r3
 2574              	.LVL325:
 2575              	.L262:
 542:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 2576              		.loc 1 542 0 is_stmt 1
 2577 004c 2846     		mov	r0, r5
 2578 004e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2579              	.LVL326:
 2580              	.L273:
 490:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 2581              		.loc 1 490 0
 2582 0052 2C49     		ldr	r1, .L276
 2583 0054 3846     		mov	r0, r7
 2584 0056 FFF7FEFF 		bl	sys_mbox_trypost
 2585              	.LVL327:
 2586 005a 0028     		cmp	r0, #0
 2587 005c 45D1     		bne	.L268
 492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2588              		.loc 1 492 0
 2589 005e A36A     		ldr	r3, [r4, #40]
 2590 0060 002B     		cmp	r3, #0
 2591 0062 45D0     		beq	.L269
 492:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2592              		.loc 1 492 0 is_stmt 0 discriminator 1
 2593 0064 0022     		movs	r2, #0
 2594 0066 1146     		mov	r1, r2
 2595 0068 2046     		mov	r0, r4
 2596 006a 9847     		blx	r3
 2597              	.LVL328:
 494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2598              		.loc 1 494 0 is_stmt 1 discriminator 1
 2599 006c 6FF00505 		mvn	r5, #5
 2600              	.LVL329:
 2601 0070 ECE7     		b	.L262
 2602              	.LVL330:
 2603              	.L274:
 504:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* Register event with callback */
 2604              		.loc 1 504 0
 2605 0072 2449     		ldr	r1, .L276
 2606 0074 3846     		mov	r0, r7
 2607              	.LVL331:
 2608 0076 FFF7FEFF 		bl	sys_mbox_trypost
 2609              	.LVL332:
 2610 007a E0BB     		cbnz	r0, .L270
 506:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2611              		.loc 1 506 0
 2612 007c A36A     		ldr	r3, [r4, #40]
 2613 007e EBB3     		cbz	r3, .L271
 506:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2614              		.loc 1 506 0 is_stmt 0 discriminator 1
 2615 0080 0022     		movs	r2, #0
 2616 0082 1146     		mov	r1, r2
 2617 0084 2046     		mov	r0, r4
 2618 0086 9847     		blx	r3
 2619              	.LVL333:
 508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
ARM GAS  /tmp/ccUeKVGD.s 			page 81


 2620              		.loc 1 508 0 is_stmt 1 discriminator 1
 2621 0088 4FF0FF35 		mov	r5, #-1
 2622              	.LVL334:
 2623 008c DEE7     		b	.L262
 2624              	.L275:
 2625              	.LBB21:
 523:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_arg(pcb, NULL);
 2626              		.loc 1 523 0
 2627 008e D8F80440 		ldr	r4, [r8, #4]
 2628              	.LVL335:
 524:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_recv(pcb, NULL);
 2629              		.loc 1 524 0
 2630 0092 0021     		movs	r1, #0
 2631 0094 2046     		mov	r0, r4
 2632 0096 FFF7FEFF 		bl	tcp_arg
 2633              	.LVL336:
 525:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_sent(pcb, NULL);
 2634              		.loc 1 525 0
 2635 009a 0021     		movs	r1, #0
 2636 009c 2046     		mov	r0, r4
 2637 009e FFF7FEFF 		bl	tcp_recv
 2638              	.LVL337:
 526:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_poll(pcb, NULL, 0);
 2639              		.loc 1 526 0
 2640 00a2 0021     		movs	r1, #0
 2641 00a4 2046     		mov	r0, r4
 2642 00a6 FFF7FEFF 		bl	tcp_sent
 2643              	.LVL338:
 527:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     tcp_err(pcb, NULL);
 2644              		.loc 1 527 0
 2645 00aa 0022     		movs	r2, #0
 2646 00ac 1146     		mov	r1, r2
 2647 00ae 2046     		mov	r0, r4
 2648 00b0 FFF7FEFF 		bl	tcp_poll
 2649              	.LVL339:
 528:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* remove reference from to the pcb from this netconn */
 2650              		.loc 1 528 0
 2651 00b4 0021     		movs	r1, #0
 2652 00b6 2046     		mov	r0, r4
 2653 00b8 FFF7FEFF 		bl	tcp_err
 2654              	.LVL340:
 530:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* no need to drain since we know the recvmbox is empty. */
 2655              		.loc 1 530 0
 2656 00bc 0023     		movs	r3, #0
 2657 00be C8F80430 		str	r3, [r8, #4]
 532:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     sys_mbox_set_invalid(&newconn->recvmbox);
 2658              		.loc 1 532 0
 2659 00c2 08F11004 		add	r4, r8, #16
 2660              	.LVL341:
 2661 00c6 2046     		mov	r0, r4
 2662 00c8 FFF7FEFF 		bl	sys_mbox_free
 2663              	.LVL342:
 533:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     netconn_free(newconn);
 2664              		.loc 1 533 0
 2665 00cc 2046     		mov	r0, r4
 2666 00ce FFF7FEFF 		bl	sys_mbox_set_invalid
 2667              	.LVL343:
ARM GAS  /tmp/ccUeKVGD.s 			page 82


 534:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     return ERR_MEM;
 2668              		.loc 1 534 0
 2669 00d2 4046     		mov	r0, r8
 2670 00d4 FFF7FEFF 		bl	netconn_free
 2671              	.LVL344:
 535:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 2672              		.loc 1 535 0
 2673 00d8 4FF0FF35 		mov	r5, #-1
 2674 00dc B6E7     		b	.L262
 2675              	.LVL345:
 2676              	.L266:
 2677              	.LBE21:
 481:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2678              		.loc 1 481 0
 2679 00de 6FF00505 		mvn	r5, #5
 2680 00e2 B3E7     		b	.L262
 2681              	.LVL346:
 2682              	.L267:
 485:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2683              		.loc 1 485 0
 2684 00e4 6FF00505 		mvn	r5, #5
 2685              	.LVL347:
 2686 00e8 B0E7     		b	.L262
 2687              	.LVL348:
 2688              	.L268:
 494:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2689              		.loc 1 494 0
 2690 00ea 6FF00505 		mvn	r5, #5
 2691              	.LVL349:
 2692 00ee ADE7     		b	.L262
 2693              	.LVL350:
 2694              	.L269:
 2695 00f0 6FF00505 		mvn	r5, #5
 2696              	.LVL351:
 2697 00f4 AAE7     		b	.L262
 2698              	.LVL352:
 2699              	.L270:
 508:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2700              		.loc 1 508 0
 2701 00f6 4FF0FF35 		mov	r5, #-1
 2702              	.LVL353:
 2703 00fa A7E7     		b	.L262
 2704              	.LVL354:
 2705              	.L271:
 2706 00fc 4FF0FF35 		mov	r5, #-1
 2707              	.LVL355:
 2708 0100 A4E7     		b	.L262
 2709              	.L277:
 2710 0102 00BF     		.align	2
 2711              	.L276:
 2712 0104 00000000 		.word	netconn_aborted
 2713              		.cfi_endproc
 2714              	.LFE165:
 2716              		.section	.text.lwip_netconn_do_delconn,"ax",%progbits
 2717              		.align	1
 2718              		.global	lwip_netconn_do_delconn
 2719              		.syntax unified
ARM GAS  /tmp/ccUeKVGD.s 			page 83


 2720              		.thumb
 2721              		.thumb_func
 2722              		.fpu fpv5-sp-d16
 2724              	lwip_netconn_do_delconn:
 2725              	.LFB172:
1020:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2726              		.loc 1 1020 0
 2727              		.cfi_startproc
 2728              		@ args = 0, pretend = 0, frame = 0
 2729              		@ frame_needed = 0, uses_anonymous_args = 0
 2730              	.LVL356:
 2731 0000 38B5     		push	{r3, r4, r5, lr}
 2732              	.LCFI18:
 2733              		.cfi_def_cfa_offset 16
 2734              		.cfi_offset 3, -16
 2735              		.cfi_offset 4, -12
 2736              		.cfi_offset 5, -8
 2737              		.cfi_offset 14, -4
 2738 0002 0446     		mov	r4, r0
 2739              	.LVL357:
1023:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   LWIP_ASSERT("netconn state error", /* this only happens for TCP netconns */
 2740              		.loc 1 1023 0
 2741 0004 0368     		ldr	r3, [r0]
 2742 0006 5D78     		ldrb	r5, [r3, #1]	@ zero_extendqisi2
 2743              	.LVL358:
1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
 2744              		.loc 1 1024 0
 2745 0008 25B1     		cbz	r5, .L279
1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
 2746              		.loc 1 1024 0 is_stmt 0 discriminator 1
 2747 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2748 000c 03F0F003 		and	r3, r3, #240
 2749 0010 102B     		cmp	r3, #16
 2750 0012 1FD1     		bne	.L296
 2751              	.LVL359:
 2752              	.L279:
1045:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_CONNECT)) ||
 2753              		.loc 1 1045 0 is_stmt 1
 2754 0014 AB1E     		subs	r3, r5, #2
 2755 0016 18BF     		it	ne
 2756 0018 0123     		movne	r3, #1
1044:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_LISTEN) &&
 2757              		.loc 1 1044 0
 2758 001a 002D     		cmp	r5, #0
 2759 001c 08BF     		it	eq
 2760 001e 0023     		moveq	r3, #0
 2761 0020 03B3     		cbz	r3, .L280
1045:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****        (state != NETCONN_CONNECT)) ||
 2762              		.loc 1 1045 0
 2763 0022 032D     		cmp	r5, #3
 2764 0024 1ED0     		beq	.L280
 2765              	.L281:
1050:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
 2766              		.loc 1 1050 0
 2767 0026 FB23     		movs	r3, #251
 2768 0028 2371     		strb	r3, [r4, #4]
 2769              	.L283:
ARM GAS  /tmp/ccUeKVGD.s 			page 84


1108:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     TCPIP_APIMSG_ACK(msg);
 2770              		.loc 1 1108 0
 2771 002a 2068     		ldr	r0, [r4]
 2772 002c 0C30     		adds	r0, r0, #12
 2773 002e FFF7FEFF 		bl	sys_sem_valid
 2774              	.LVL360:
 2775 0032 70B1     		cbz	r0, .L278
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2776              		.loc 1 1109 0
 2777 0034 2368     		ldr	r3, [r4]
 2778 0036 63B1     		cbz	r3, .L278
 2779              	.LBB22:
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2780              		.loc 1 1109 0 is_stmt 0 discriminator 1
 2781 0038 FFF7FEFF 		bl	sys_arch_protect
 2782              	.LVL361:
 2783 003c 2368     		ldr	r3, [r4]
 2784 003e 93F90820 		ldrsb	r2, [r3, #8]
 2785 0042 12F10C0F 		cmn	r2, #12
 2786 0046 02DB     		blt	.L294
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2787              		.loc 1 1109 0 discriminator 2
 2788 0048 94F90420 		ldrsb	r2, [r4, #4]
 2789 004c 1A72     		strb	r2, [r3, #8]
 2790              	.L294:
1109:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2791              		.loc 1 1109 0 discriminator 4
 2792 004e FFF7FEFF 		bl	sys_arch_unprotect
 2793              	.LVL362:
 2794              	.L278:
 2795              	.LBE22:
1111:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2796              		.loc 1 1111 0 is_stmt 1
 2797 0052 38BD     		pop	{r3, r4, r5, pc}
 2798              	.LVL363:
 2799              	.L296:
1024:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     (state == NETCONN_NONE) || (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP));
 2800              		.loc 1 1024 0 discriminator 2
 2801 0054 414B     		ldr	r3, .L301
 2802 0056 40F20142 		movw	r2, #1025
 2803 005a 4149     		ldr	r1, .L301+4
 2804 005c 4148     		ldr	r0, .L301+8
 2805              	.LVL364:
 2806 005e FFF7FEFF 		bl	printf
 2807              	.LVL365:
 2808 0062 D7E7     		b	.L279
 2809              	.L280:
1046:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((state == NETCONN_CONNECT) && !IN_NONBLOCKING_CONNECT(msg->conn))) {
 2810              		.loc 1 1046 0
 2811 0064 032D     		cmp	r5, #3
 2812 0066 27D0     		beq	.L297
 2813              	.L282:
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
 2814              		.loc 1 1054 0
 2815 0068 032D     		cmp	r5, #3
 2816 006a 2BD0     		beq	.L298
 2817              	.L284:
ARM GAS  /tmp/ccUeKVGD.s 			page 85


1056:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Drain and delete mboxes */
 2818              		.loc 1 1056 0
 2819 006c 0023     		movs	r3, #0
 2820 006e 2371     		strb	r3, [r4, #4]
1058:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2821              		.loc 1 1058 0
 2822 0070 2068     		ldr	r0, [r4]
 2823 0072 FFF7FEFF 		bl	netconn_drain
 2824              	.LVL366:
1060:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 2825              		.loc 1 1060 0
 2826 0076 2268     		ldr	r2, [r4]
 2827 0078 5168     		ldr	r1, [r2, #4]
 2828 007a 79B1     		cbz	r1, .L285
1062:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 2829              		.loc 1 1062 0
 2830 007c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 2831 007e 03F0F003 		and	r3, r3, #240
 2832 0082 102B     		cmp	r3, #16
 2833 0084 2BD0     		beq	.L287
 2834 0086 202B     		cmp	r3, #32
 2835 0088 05D1     		bne	.L286
1070:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         udp_remove(msg->conn->pcb.udp);
 2836              		.loc 1 1070 0
 2837 008a 0023     		movs	r3, #0
 2838 008c CB61     		str	r3, [r1, #28]
1071:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
 2839              		.loc 1 1071 0
 2840 008e 2368     		ldr	r3, [r4]
 2841 0090 5868     		ldr	r0, [r3, #4]
 2842 0092 FFF7FEFF 		bl	udp_remove
 2843              	.LVL367:
 2844              	.L286:
1099:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 2845              		.loc 1 1099 0
 2846 0096 2368     		ldr	r3, [r4]
 2847 0098 0022     		movs	r2, #0
 2848 009a 5A60     		str	r2, [r3, #4]
 2849              	.L285:
1105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_SENDPLUS, 0);
 2850              		.loc 1 1105 0
 2851 009c 2068     		ldr	r0, [r4]
 2852 009e 836A     		ldr	r3, [r0, #40]
 2853 00a0 13B1     		cbz	r3, .L293
1105:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     API_EVENT(msg->conn, NETCONN_EVT_SENDPLUS, 0);
 2854              		.loc 1 1105 0 is_stmt 0 discriminator 1
 2855 00a2 0022     		movs	r2, #0
 2856 00a4 1146     		mov	r1, r2
 2857 00a6 9847     		blx	r3
 2858              	.LVL368:
 2859              	.L293:
1106:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2860              		.loc 1 1106 0 is_stmt 1
 2861 00a8 2068     		ldr	r0, [r4]
 2862 00aa 836A     		ldr	r3, [r0, #40]
 2863 00ac 002B     		cmp	r3, #0
 2864 00ae BCD0     		beq	.L283
ARM GAS  /tmp/ccUeKVGD.s 			page 86


1106:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 2865              		.loc 1 1106 0 is_stmt 0 discriminator 1
 2866 00b0 0022     		movs	r2, #0
 2867 00b2 0221     		movs	r1, #2
 2868 00b4 9847     		blx	r3
 2869              	.LVL369:
 2870 00b6 B8E7     		b	.L283
 2871              	.L297:
1047:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This means either a blocking write or blocking connect is running
 2872              		.loc 1 1047 0 is_stmt 1
 2873 00b8 2368     		ldr	r3, [r4]
 2874 00ba 1B7F     		ldrb	r3, [r3, #28]	@ zero_extendqisi2
 2875 00bc 13F0040F 		tst	r3, #4
 2876 00c0 D2D1     		bne	.L282
 2877 00c2 B0E7     		b	.L281
 2878              	.L298:
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
 2879              		.loc 1 1054 0 discriminator 1
 2880 00c4 2368     		ldr	r3, [r4]
 2881 00c6 1B7F     		ldrb	r3, [r3, #28]	@ zero_extendqisi2
 2882 00c8 13F0040F 		tst	r3, #4
 2883 00cc CED1     		bne	.L284
1054:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (state != NETCONN_CONNECT) || IN_NONBLOCKING_CONNECT(msg->conn));
 2884              		.loc 1 1054 0 is_stmt 0 discriminator 2
 2885 00ce 234B     		ldr	r3, .L301
 2886 00d0 40F21F42 		movw	r2, #1055
 2887 00d4 2449     		ldr	r1, .L301+12
 2888 00d6 2348     		ldr	r0, .L301+8
 2889 00d8 FFF7FEFF 		bl	printf
 2890              	.LVL370:
 2891 00dc C6E7     		b	.L284
 2892              	.L287:
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 2893              		.loc 1 1076 0 is_stmt 1
 2894 00de 536A     		ldr	r3, [r2, #36]
 2895 00e0 002B     		cmp	r3, #0
 2896 00e2 2FD0     		beq	.L299
 2897              	.L289:
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 2898              		.loc 1 1076 0 is_stmt 0 discriminator 3
 2899 00e4 1D4B     		ldr	r3, .L301
 2900 00e6 40F23542 		movw	r2, #1077
 2901 00ea 2049     		ldr	r1, .L301+16
 2902 00ec 1D48     		ldr	r0, .L301+8
 2903 00ee FFF7FEFF 		bl	printf
 2904              	.LVL371:
 2905              	.L290:
1078:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->msg.sd.shut = NETCONN_SHUT_RDWR;
 2906              		.loc 1 1078 0 is_stmt 1
 2907 00f2 2368     		ldr	r3, [r4]
 2908 00f4 0422     		movs	r2, #4
 2909 00f6 5A70     		strb	r2, [r3, #1]
1079:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
 2910              		.loc 1 1079 0
 2911 00f8 0323     		movs	r3, #3
 2912 00fa 2372     		strb	r3, [r4, #8]
1080:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
ARM GAS  /tmp/ccUeKVGD.s 			page 87


 2913              		.loc 1 1080 0
 2914 00fc 2368     		ldr	r3, [r4]
 2915 00fe 5C62     		str	r4, [r3, #36]
1082:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
 2916              		.loc 1 1082 0
 2917 0100 0021     		movs	r1, #0
 2918 0102 2068     		ldr	r0, [r4]
 2919 0104 FFF7FEFF 		bl	lwip_netconn_do_close_internal
 2920              	.LVL372:
 2921 0108 0028     		cmp	r0, #0
 2922 010a A2D0     		beq	.L278
1083:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
 2923              		.loc 1 1083 0
 2924 010c 2368     		ldr	r3, [r4]
 2925 010e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2926 0110 042B     		cmp	r3, #4
 2927 0112 1BD1     		bne	.L300
 2928              	.L292:
1084:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 2929              		.loc 1 1084 0
 2930 0114 164D     		ldr	r5, .L301+20
 2931              	.LVL373:
 2932 0116 2846     		mov	r0, r5
 2933 0118 FFF7FEFF 		bl	sys_mutex_unlock
 2934              	.LVL374:
1085:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
 2935              		.loc 1 1085 0
 2936 011c 2068     		ldr	r0, [r4]
 2937 011e 0021     		movs	r1, #0
 2938 0120 0C30     		adds	r0, r0, #12
 2939 0122 FFF7FEFF 		bl	sys_arch_sem_wait
 2940              	.LVL375:
1086:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
 2941              		.loc 1 1086 0
 2942 0126 2846     		mov	r0, r5
 2943 0128 FFF7FEFF 		bl	sys_mutex_lock
 2944              	.LVL376:
1087:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 2945              		.loc 1 1087 0
 2946 012c 2368     		ldr	r3, [r4]
 2947 012e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2948 0130 002B     		cmp	r3, #0
 2949 0132 8ED0     		beq	.L278
1087:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 2950              		.loc 1 1087 0 is_stmt 0 discriminator 1
 2951 0134 094B     		ldr	r3, .L301
 2952 0136 40F23F42 		movw	r2, #1087
 2953 013a 0E49     		ldr	r1, .L301+24
 2954 013c 0948     		ldr	r0, .L301+8
 2955 013e FFF7FEFF 		bl	printf
 2956              	.LVL377:
 2957 0142 86E7     		b	.L278
 2958              	.LVL378:
 2959              	.L299:
1076:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 2960              		.loc 1 1076 0 is_stmt 1 discriminator 2
 2961 0144 136A     		ldr	r3, [r2, #32]
ARM GAS  /tmp/ccUeKVGD.s 			page 88


 2962 0146 002B     		cmp	r3, #0
 2963 0148 D3D0     		beq	.L290
 2964 014a CBE7     		b	.L289
 2965              	.L300:
1083:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
 2966              		.loc 1 1083 0 discriminator 1
 2967 014c 034B     		ldr	r3, .L301
 2968 014e 40F23B42 		movw	r2, #1083
 2969 0152 0849     		ldr	r1, .L301+24
 2970 0154 0348     		ldr	r0, .L301+8
 2971 0156 FFF7FEFF 		bl	printf
 2972              	.LVL379:
 2973 015a DBE7     		b	.L292
 2974              	.L302:
 2975              		.align	2
 2976              	.L301:
 2977 015c 00000000 		.word	.LC0
 2978 0160 00000000 		.word	.LC29
 2979 0164 54000000 		.word	.LC2
 2980 0168 14000000 		.word	.LC30
 2981 016c 34000000 		.word	.LC31
 2982 0170 00000000 		.word	lock_tcpip_core
 2983 0174 50000000 		.word	.LC32
 2984              		.cfi_endproc
 2985              	.LFE172:
 2987              		.section	.text.lwip_netconn_do_bind,"ax",%progbits
 2988              		.align	1
 2989              		.global	lwip_netconn_do_bind
 2990              		.syntax unified
 2991              		.thumb
 2992              		.thumb_func
 2993              		.fpu fpv5-sp-d16
 2995              	lwip_netconn_do_bind:
 2996              	.LFB173:
1122:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 2997              		.loc 1 1122 0
 2998              		.cfi_startproc
 2999              		@ args = 0, pretend = 0, frame = 0
 3000              		@ frame_needed = 0, uses_anonymous_args = 0
 3001              	.LVL380:
 3002 0000 10B5     		push	{r4, lr}
 3003              	.LCFI19:
 3004              		.cfi_def_cfa_offset 8
 3005              		.cfi_offset 4, -8
 3006              		.cfi_offset 14, -4
 3007 0002 0446     		mov	r4, r0
 3008              	.LVL381:
1125:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3009              		.loc 1 1125 0
 3010 0004 0368     		ldr	r3, [r0]
 3011 0006 93F90820 		ldrsb	r2, [r3, #8]
 3012 000a 12F10C0F 		cmn	r2, #12
 3013 000e 10DA     		bge	.L304
1126:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3014              		.loc 1 1126 0
 3015 0010 0271     		strb	r2, [r0, #4]
 3016              	.LVL382:
ARM GAS  /tmp/ccUeKVGD.s 			page 89


 3017              	.L305:
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3018              		.loc 1 1151 0
 3019 0012 2368     		ldr	r3, [r4]
 3020 0014 63B1     		cbz	r3, .L303
 3021              	.LBB23:
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3022              		.loc 1 1151 0 is_stmt 0 discriminator 1
 3023 0016 FFF7FEFF 		bl	sys_arch_protect
 3024              	.LVL383:
 3025 001a 2368     		ldr	r3, [r4]
 3026 001c 93F90820 		ldrsb	r2, [r3, #8]
 3027 0020 12F10C0F 		cmn	r2, #12
 3028 0024 02DB     		blt	.L309
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3029              		.loc 1 1151 0 discriminator 2
 3030 0026 94F90420 		ldrsb	r2, [r4, #4]
 3031 002a 1A72     		strb	r2, [r3, #8]
 3032              	.L309:
1151:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3033              		.loc 1 1151 0 discriminator 4
 3034 002c FFF7FEFF 		bl	sys_arch_unprotect
 3035              	.LVL384:
 3036              	.L303:
 3037              	.LBE23:
1152:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3038              		.loc 1 1152 0 is_stmt 1
 3039 0030 10BD     		pop	{r4, pc}
 3040              	.LVL385:
 3041              	.L304:
1128:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 3042              		.loc 1 1128 0
 3043 0032 FA22     		movs	r2, #250
 3044 0034 0271     		strb	r2, [r0, #4]
1129:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
 3045              		.loc 1 1129 0
 3046 0036 5868     		ldr	r0, [r3, #4]
 3047              	.LVL386:
 3048 0038 0028     		cmp	r0, #0
 3049 003a EAD0     		beq	.L305
1130:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 3050              		.loc 1 1130 0
 3051 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3052 003e 03F0F003 		and	r3, r3, #240
 3053 0042 102B     		cmp	r3, #16
 3054 0044 07D0     		beq	.L306
 3055 0046 202B     		cmp	r3, #32
 3056 0048 E3D1     		bne	.L305
1138:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
 3057              		.loc 1 1138 0
 3058 004a A289     		ldrh	r2, [r4, #12]
 3059 004c A168     		ldr	r1, [r4, #8]
 3060 004e FFF7FEFF 		bl	udp_bind
 3061              	.LVL387:
 3062 0052 2071     		strb	r0, [r4, #4]
1139:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 3063              		.loc 1 1139 0
ARM GAS  /tmp/ccUeKVGD.s 			page 90


 3064 0054 DDE7     		b	.L305
 3065              	.L306:
1143:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         break;
 3066              		.loc 1 1143 0
 3067 0056 A289     		ldrh	r2, [r4, #12]
 3068 0058 A168     		ldr	r1, [r4, #8]
 3069 005a FFF7FEFF 		bl	tcp_bind
 3070              	.LVL388:
 3071 005e 2071     		strb	r0, [r4, #4]
1144:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 3072              		.loc 1 1144 0
 3073 0060 D7E7     		b	.L305
 3074              		.cfi_endproc
 3075              	.LFE173:
 3077              		.section	.text.lwip_netconn_do_connect,"ax",%progbits
 3078              		.align	1
 3079              		.global	lwip_netconn_do_connect
 3080              		.syntax unified
 3081              		.thumb
 3082              		.thumb_func
 3083              		.fpu fpv5-sp-d16
 3085              	lwip_netconn_do_connect:
 3086              	.LFB175:
1213:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3087              		.loc 1 1213 0
 3088              		.cfi_startproc
 3089              		@ args = 0, pretend = 0, frame = 0
 3090              		@ frame_needed = 0, uses_anonymous_args = 0
 3091              	.LVL389:
 3092 0000 38B5     		push	{r3, r4, r5, lr}
 3093              	.LCFI20:
 3094              		.cfi_def_cfa_offset 16
 3095              		.cfi_offset 3, -16
 3096              		.cfi_offset 4, -12
 3097              		.cfi_offset 5, -8
 3098              		.cfi_offset 14, -4
 3099 0002 0446     		mov	r4, r0
 3100              	.LVL390:
1216:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* This may happen when calling netconn_connect() a second time */
 3101              		.loc 1 1216 0
 3102 0004 0268     		ldr	r2, [r0]
 3103 0006 5068     		ldr	r0, [r2, #4]
 3104              	.LVL391:
 3105 0008 60B1     		cbz	r0, .L327
1220:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 3106              		.loc 1 1220 0
 3107 000a 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3108 000c 03F0F003 		and	r3, r3, #240
 3109 0010 102B     		cmp	r3, #16
 3110 0012 19D0     		beq	.L315
 3111 0014 202B     		cmp	r3, #32
 3112 0016 6AD1     		bne	.L325
1228:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
 3113              		.loc 1 1228 0
 3114 0018 A289     		ldrh	r2, [r4, #12]
 3115 001a A168     		ldr	r1, [r4, #8]
 3116 001c FFF7FEFF 		bl	udp_connect
ARM GAS  /tmp/ccUeKVGD.s 			page 91


 3117              	.LVL392:
 3118 0020 2071     		strb	r0, [r4, #4]
1229:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
 3119              		.loc 1 1229 0
 3120 0022 01E0     		b	.L313
 3121              	.L327:
1218:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3122              		.loc 1 1218 0
 3123 0024 F123     		movs	r3, #241
 3124 0026 2371     		strb	r3, [r4, #4]
 3125              	.L313:
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3126              		.loc 1 1272 0
 3127 0028 2368     		ldr	r3, [r4]
 3128 002a 63B1     		cbz	r3, .L311
 3129              	.LBB24:
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3130              		.loc 1 1272 0 is_stmt 0 discriminator 1
 3131 002c FFF7FEFF 		bl	sys_arch_protect
 3132              	.LVL393:
 3133 0030 2368     		ldr	r3, [r4]
 3134 0032 93F90820 		ldrsb	r2, [r3, #8]
 3135 0036 12F10C0F 		cmn	r2, #12
 3136 003a 02DB     		blt	.L324
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3137              		.loc 1 1272 0 discriminator 2
 3138 003c 94F90420 		ldrsb	r2, [r4, #4]
 3139 0040 1A72     		strb	r2, [r3, #8]
 3140              	.L324:
1272:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3141              		.loc 1 1272 0 discriminator 4
 3142 0042 FFF7FEFF 		bl	sys_arch_unprotect
 3143              	.LVL394:
 3144              	.L311:
 3145              	.LBE24:
1273:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3146              		.loc 1 1273 0 is_stmt 1
 3147 0046 38BD     		pop	{r3, r4, r5, pc}
 3148              	.LVL395:
 3149              	.L315:
1234:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ALREADY;
 3150              		.loc 1 1234 0
 3151 0048 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 3152 004a 032B     		cmp	r3, #3
 3153 004c 03D0     		beq	.L328
1236:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_ISCONN;
 3154              		.loc 1 1236 0
 3155 004e 2BB1     		cbz	r3, .L318
1237:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 3156              		.loc 1 1237 0
 3157 0050 F623     		movs	r3, #246
 3158 0052 2371     		strb	r3, [r4, #4]
 3159 0054 E8E7     		b	.L313
 3160              	.L328:
1235:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->state != NETCONN_NONE) {
 3161              		.loc 1 1235 0
 3162 0056 F723     		movs	r3, #247
ARM GAS  /tmp/ccUeKVGD.s 			page 92


 3163 0058 2371     		strb	r3, [r4, #4]
 3164 005a E5E7     		b	.L313
 3165              	.L318:
1239:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_connect(msg->conn->pcb.tcp, API_EXPR_REF(msg->msg.bc.ipaddr),
 3166              		.loc 1 1239 0
 3167 005c 1046     		mov	r0, r2
 3168 005e FFF7FEFF 		bl	setup_tcp
 3169              	.LVL396:
1240:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->msg.bc.port, lwip_netconn_do_connected);
 3170              		.loc 1 1240 0
 3171 0062 2068     		ldr	r0, [r4]
 3172 0064 274B     		ldr	r3, .L330
 3173 0066 A289     		ldrh	r2, [r4, #12]
 3174 0068 A168     		ldr	r1, [r4, #8]
 3175 006a 4068     		ldr	r0, [r0, #4]
 3176 006c FFF7FEFF 		bl	tcp_connect
 3177              	.LVL397:
 3178 0070 2071     		strb	r0, [r4, #4]
1242:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           u8_t non_blocking = netconn_is_nonblocking(msg->conn);
 3179              		.loc 1 1242 0
 3180 0072 0028     		cmp	r0, #0
 3181 0074 D8D1     		bne	.L313
 3182              	.LBB25:
1243:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->state = NETCONN_CONNECT;
 3183              		.loc 1 1243 0
 3184 0076 2268     		ldr	r2, [r4]
 3185 0078 137F     		ldrb	r3, [r2, #28]	@ zero_extendqisi2
 3186              	.LVL398:
1244:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           SET_NONBLOCKING_CONNECT(msg->conn, non_blocking);
 3187              		.loc 1 1244 0
 3188 007a 0321     		movs	r1, #3
 3189 007c 5170     		strb	r1, [r2, #1]
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
 3190              		.loc 1 1245 0
 3191 007e 13F00203 		ands	r3, r3, #2
 3192              	.LVL399:
 3193 0082 08D0     		beq	.L319
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
 3194              		.loc 1 1245 0 is_stmt 0 discriminator 1
 3195 0084 2168     		ldr	r1, [r4]
 3196 0086 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 3197              	.LVL400:
 3198 0088 42F00402 		orr	r2, r2, #4
 3199 008c 0A77     		strb	r2, [r1, #28]
 3200              	.L320:
1246:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             msg->err = ERR_INPROGRESS;
 3201              		.loc 1 1246 0 is_stmt 1
 3202 008e 43B1     		cbz	r3, .L321
1247:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
 3203              		.loc 1 1247 0
 3204 0090 FB23     		movs	r3, #251
 3205 0092 2371     		strb	r3, [r4, #4]
 3206 0094 C8E7     		b	.L313
 3207              	.LVL401:
 3208              	.L319:
1245:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           if (non_blocking) {
 3209              		.loc 1 1245 0 discriminator 2
ARM GAS  /tmp/ccUeKVGD.s 			page 93


 3210 0096 2168     		ldr	r1, [r4]
 3211 0098 0A7F     		ldrb	r2, [r1, #28]	@ zero_extendqisi2
 3212              	.LVL402:
 3213 009a 22F00402 		bic	r2, r2, #4
 3214 009e 0A77     		strb	r2, [r1, #28]
 3215 00a0 F5E7     		b	.L320
 3216              	.L321:
1249:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* sys_sem_signal() is called from lwip_netconn_do_connected (or err_tcp()),
 3217              		.loc 1 1249 0
 3218 00a2 2368     		ldr	r3, [r4]
 3219 00a4 5C62     		str	r4, [r3, #36]
1253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             UNLOCK_TCPIP_CORE();
 3220              		.loc 1 1253 0
 3221 00a6 2368     		ldr	r3, [r4]
 3222 00a8 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3223 00aa 032B     		cmp	r3, #3
 3224 00ac 17D1     		bne	.L329
 3225              	.L322:
1254:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 3226              		.loc 1 1254 0
 3227 00ae 164D     		ldr	r5, .L330+4
 3228 00b0 2846     		mov	r0, r5
 3229 00b2 FFF7FEFF 		bl	sys_mutex_unlock
 3230              	.LVL403:
1255:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LOCK_TCPIP_CORE();
 3231              		.loc 1 1255 0
 3232 00b6 2068     		ldr	r0, [r4]
 3233 00b8 0021     		movs	r1, #0
 3234 00ba 0C30     		adds	r0, r0, #12
 3235 00bc FFF7FEFF 		bl	sys_arch_sem_wait
 3236              	.LVL404:
1256:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             LWIP_ASSERT("state!", msg->conn->state != NETCONN_CONNECT);
 3237              		.loc 1 1256 0
 3238 00c0 2846     		mov	r0, r5
 3239 00c2 FFF7FEFF 		bl	sys_mutex_lock
 3240              	.LVL405:
1257:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 3241              		.loc 1 1257 0
 3242 00c6 2368     		ldr	r3, [r4]
 3243 00c8 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3244 00ca 032B     		cmp	r3, #3
 3245 00cc BBD1     		bne	.L311
1257:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 3246              		.loc 1 1257 0 is_stmt 0 discriminator 1
 3247 00ce 0F4B     		ldr	r3, .L330+8
 3248 00d0 40F2E942 		movw	r2, #1257
 3249 00d4 0E49     		ldr	r1, .L330+12
 3250 00d6 0F48     		ldr	r0, .L330+16
 3251 00d8 FFF7FEFF 		bl	printf
 3252              	.LVL406:
 3253 00dc B3E7     		b	.L311
 3254              	.L329:
1253:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             UNLOCK_TCPIP_CORE();
 3255              		.loc 1 1253 0 is_stmt 1 discriminator 1
 3256 00de 0B4B     		ldr	r3, .L330+8
 3257 00e0 40F2E542 		movw	r2, #1253
 3258 00e4 0A49     		ldr	r1, .L330+12
ARM GAS  /tmp/ccUeKVGD.s 			page 94


 3259 00e6 0B48     		ldr	r0, .L330+16
 3260 00e8 FFF7FEFF 		bl	printf
 3261              	.LVL407:
 3262 00ec DFE7     		b	.L322
 3263              	.L325:
 3264              	.LBE25:
1266:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
 3265              		.loc 1 1266 0 discriminator 1
 3266 00ee 074B     		ldr	r3, .L330+8
 3267 00f0 40F2F242 		movw	r2, #1266
 3268 00f4 0849     		ldr	r1, .L330+20
 3269 00f6 0748     		ldr	r0, .L330+16
 3270 00f8 FFF7FEFF 		bl	printf
 3271              	.LVL408:
 3272 00fc FA23     		movs	r3, #250
 3273 00fe 2371     		strb	r3, [r4, #4]
1267:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 3274              		.loc 1 1267 0 discriminator 1
 3275 0100 92E7     		b	.L313
 3276              	.L331:
 3277 0102 00BF     		.align	2
 3278              	.L330:
 3279 0104 00000000 		.word	lwip_netconn_do_connected
 3280 0108 00000000 		.word	lock_tcpip_core
 3281 010c 00000000 		.word	.LC0
 3282 0110 50000000 		.word	.LC32
 3283 0114 54000000 		.word	.LC2
 3284 0118 00000000 		.word	.LC33
 3285              		.cfi_endproc
 3286              	.LFE175:
 3288              		.section	.text.lwip_netconn_do_disconnect,"ax",%progbits
 3289              		.align	1
 3290              		.global	lwip_netconn_do_disconnect
 3291              		.syntax unified
 3292              		.thumb
 3293              		.thumb_func
 3294              		.fpu fpv5-sp-d16
 3296              	lwip_netconn_do_disconnect:
 3297              	.LFB176:
1284:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3298              		.loc 1 1284 0
 3299              		.cfi_startproc
 3300              		@ args = 0, pretend = 0, frame = 0
 3301              		@ frame_needed = 0, uses_anonymous_args = 0
 3302              	.LVL409:
 3303 0000 10B5     		push	{r4, lr}
 3304              	.LCFI21:
 3305              		.cfi_def_cfa_offset 8
 3306              		.cfi_offset 4, -8
 3307              		.cfi_offset 14, -4
 3308 0002 0446     		mov	r4, r0
 3309              	.LVL410:
1288:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     udp_disconnect(msg->conn->pcb.udp);
 3310              		.loc 1 1288 0
 3311 0004 0268     		ldr	r2, [r0]
 3312 0006 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3313 0008 03F0F003 		and	r3, r3, #240
ARM GAS  /tmp/ccUeKVGD.s 			page 95


 3314 000c 202B     		cmp	r3, #32
 3315 000e 11D0     		beq	.L338
1294:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
 3316              		.loc 1 1294 0
 3317 0010 FA23     		movs	r3, #250
 3318 0012 0371     		strb	r3, [r0, #4]
 3319              	.LVL411:
 3320              	.L334:
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3321              		.loc 1 1296 0
 3322 0014 2368     		ldr	r3, [r4]
 3323 0016 63B1     		cbz	r3, .L332
 3324              	.LBB26:
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3325              		.loc 1 1296 0 is_stmt 0 discriminator 1
 3326 0018 FFF7FEFF 		bl	sys_arch_protect
 3327              	.LVL412:
 3328 001c 2368     		ldr	r3, [r4]
 3329 001e 93F90820 		ldrsb	r2, [r3, #8]
 3330 0022 12F10C0F 		cmn	r2, #12
 3331 0026 02DB     		blt	.L336
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3332              		.loc 1 1296 0 discriminator 2
 3333 0028 94F90420 		ldrsb	r2, [r4, #4]
 3334 002c 1A72     		strb	r2, [r3, #8]
 3335              	.L336:
1296:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3336              		.loc 1 1296 0 discriminator 4
 3337 002e FFF7FEFF 		bl	sys_arch_unprotect
 3338              	.LVL413:
 3339              	.L332:
 3340              	.LBE26:
1297:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3341              		.loc 1 1297 0 is_stmt 1
 3342 0032 10BD     		pop	{r4, pc}
 3343              	.LVL414:
 3344              	.L338:
1289:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
 3345              		.loc 1 1289 0
 3346 0034 5068     		ldr	r0, [r2, #4]
 3347              	.LVL415:
 3348 0036 FFF7FEFF 		bl	udp_disconnect
 3349              	.LVL416:
1290:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
 3350              		.loc 1 1290 0
 3351 003a 0023     		movs	r3, #0
 3352 003c 2371     		strb	r3, [r4, #4]
 3353 003e E9E7     		b	.L334
 3354              		.cfi_endproc
 3355              	.LFE176:
 3357              		.section	.text.lwip_netconn_do_listen,"ax",%progbits
 3358              		.align	1
 3359              		.global	lwip_netconn_do_listen
 3360              		.syntax unified
 3361              		.thumb
 3362              		.thumb_func
 3363              		.fpu fpv5-sp-d16
ARM GAS  /tmp/ccUeKVGD.s 			page 96


 3365              	lwip_netconn_do_listen:
 3366              	.LFB177:
1308:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3367              		.loc 1 1308 0
 3368              		.cfi_startproc
 3369              		@ args = 0, pretend = 0, frame = 8
 3370              		@ frame_needed = 0, uses_anonymous_args = 0
 3371              	.LVL417:
 3372 0000 30B5     		push	{r4, r5, lr}
 3373              	.LCFI22:
 3374              		.cfi_def_cfa_offset 12
 3375              		.cfi_offset 4, -12
 3376              		.cfi_offset 5, -8
 3377              		.cfi_offset 14, -4
 3378 0002 83B0     		sub	sp, sp, #12
 3379              	.LCFI23:
 3380              		.cfi_def_cfa_offset 24
 3381 0004 0446     		mov	r4, r0
 3382              	.LVL418:
1311:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3383              		.loc 1 1311 0
 3384 0006 0368     		ldr	r3, [r0]
 3385 0008 93F90820 		ldrsb	r2, [r3, #8]
 3386 000c 12F10C0F 		cmn	r2, #12
 3387 0010 11DA     		bge	.L340
1312:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3388              		.loc 1 1312 0
 3389 0012 0271     		strb	r2, [r0, #4]
 3390              	.LVL419:
 3391              	.L341:
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3392              		.loc 1 1380 0
 3393 0014 2368     		ldr	r3, [r4]
 3394 0016 63B1     		cbz	r3, .L339
 3395              	.LBB27:
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3396              		.loc 1 1380 0 is_stmt 0 discriminator 1
 3397 0018 FFF7FEFF 		bl	sys_arch_protect
 3398              	.LVL420:
 3399 001c 2368     		ldr	r3, [r4]
 3400 001e 93F90820 		ldrsb	r2, [r3, #8]
 3401 0022 12F10C0F 		cmn	r2, #12
 3402 0026 02DB     		blt	.L351
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3403              		.loc 1 1380 0 discriminator 2
 3404 0028 94F90420 		ldrsb	r2, [r4, #4]
 3405 002c 1A72     		strb	r2, [r3, #8]
 3406              	.L351:
1380:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3407              		.loc 1 1380 0 discriminator 4
 3408 002e FFF7FEFF 		bl	sys_arch_unprotect
 3409              	.LVL421:
 3410              	.L339:
 3411              	.LBE27:
1381:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
 3412              		.loc 1 1381 0 is_stmt 1
 3413 0032 03B0     		add	sp, sp, #12
ARM GAS  /tmp/ccUeKVGD.s 			page 97


 3414              	.LCFI24:
 3415              		.cfi_remember_state
 3416              		.cfi_def_cfa_offset 12
 3417              		@ sp needed
 3418 0034 30BD     		pop	{r4, r5, pc}
 3419              	.LVL422:
 3420              	.L340:
 3421              	.LCFI25:
 3422              		.cfi_restore_state
1314:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 3423              		.loc 1 1314 0
 3424 0036 F522     		movs	r2, #245
 3425 0038 0271     		strb	r2, [r0, #4]
1315:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
 3426              		.loc 1 1315 0
 3427 003a 5868     		ldr	r0, [r3, #4]
 3428              	.LVL423:
 3429 003c 0028     		cmp	r0, #0
 3430 003e E9D0     		beq	.L341
1316:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (msg->conn->state == NETCONN_NONE) {
 3431              		.loc 1 1316 0
 3432 0040 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3433 0042 02F0F002 		and	r2, r2, #240
 3434 0046 102A     		cmp	r2, #16
 3435 0048 02D0     		beq	.L353
1376:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 3436              		.loc 1 1376 0
 3437 004a F023     		movs	r3, #240
 3438 004c 2371     		strb	r3, [r4, #4]
 3439 004e E1E7     		b	.L341
 3440              	.L353:
1317:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           struct tcp_pcb* lpcb;
 3441              		.loc 1 1317 0
 3442 0050 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3443 0052 002B     		cmp	r3, #0
 3444 0054 45D1     		bne	.L343
 3445              	.LBB28:
1319:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             /* connection is not closed, cannot listen */
 3446              		.loc 1 1319 0
 3447 0056 037D     		ldrb	r3, [r0, #20]	@ zero_extendqisi2
 3448 0058 13B1     		cbz	r3, .L344
1321:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           } else {
 3449              		.loc 1 1321 0
 3450 005a FA23     		movs	r3, #250
 3451 005c 2371     		strb	r3, [r4, #4]
 3452 005e D9E7     		b	.L341
 3453              	.L344:
 3454              	.LVL424:
 3455              	.LBB29:
1342:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3456              		.loc 1 1342 0
 3457 0060 0DF10702 		add	r2, sp, #7
 3458 0064 FF21     		movs	r1, #255
 3459 0066 FFF7FEFF 		bl	tcp_listen_with_backlog_and_err
 3460              	.LVL425:
1344:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               /* in this case, the old pcb is still allocated */
 3461              		.loc 1 1344 0
ARM GAS  /tmp/ccUeKVGD.s 			page 98


 3462 006a 0546     		mov	r5, r0
 3463 006c F0B1     		cbz	r0, .L354
1349:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 /** @todo: should we drain the recvmbox here? */
 3464              		.loc 1 1349 0
 3465 006e 2068     		ldr	r0, [r4]
 3466              	.LVL426:
 3467 0070 1030     		adds	r0, r0, #16
 3468 0072 FFF7FEFF 		bl	sys_mbox_valid
 3469              	.LVL427:
 3470 0076 E8B9     		cbnz	r0, .L355
 3471              	.L347:
1354:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               if (!sys_mbox_valid(&msg->conn->acceptmbox)) {
 3472              		.loc 1 1354 0
 3473 0078 0023     		movs	r3, #0
 3474 007a 2371     		strb	r3, [r4, #4]
1355:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->err = sys_mbox_new(&msg->conn->acceptmbox, DEFAULT_ACCEPTMBOX_SIZE);
 3475              		.loc 1 1355 0
 3476 007c 2068     		ldr	r0, [r4]
 3477 007e 1430     		adds	r0, r0, #20
 3478 0080 FFF7FEFF 		bl	sys_mbox_valid
 3479              	.LVL428:
 3480 0084 F8B1     		cbz	r0, .L356
 3481              	.L348:
1358:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->state = NETCONN_LISTEN;
 3482              		.loc 1 1358 0
 3483 0086 94F90430 		ldrsb	r3, [r4, #4]
 3484 008a 1BBB     		cbnz	r3, .L349
1359:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = lpcb;
 3485              		.loc 1 1359 0
 3486 008c 2368     		ldr	r3, [r4]
 3487 008e 0222     		movs	r2, #2
 3488 0090 5A70     		strb	r2, [r3, #1]
1360:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_arg(msg->conn->pcb.tcp, msg->conn);
 3489              		.loc 1 1360 0
 3490 0092 2368     		ldr	r3, [r4]
 3491 0094 5D60     		str	r5, [r3, #4]
1361:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 tcp_accept(msg->conn->pcb.tcp, accept_function);
 3492              		.loc 1 1361 0
 3493 0096 2368     		ldr	r3, [r4]
 3494 0098 1946     		mov	r1, r3
 3495 009a 5868     		ldr	r0, [r3, #4]
 3496 009c FFF7FEFF 		bl	tcp_arg
 3497              	.LVL429:
1362:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               } else {
 3498              		.loc 1 1362 0
 3499 00a0 2368     		ldr	r3, [r4]
 3500 00a2 1249     		ldr	r1, .L357
 3501 00a4 5868     		ldr	r0, [r3, #4]
 3502 00a6 FFF7FEFF 		bl	tcp_accept
 3503              	.LVL430:
 3504 00aa B3E7     		b	.L341
 3505              	.LVL431:
 3506              	.L354:
1346:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****             } else {
 3507              		.loc 1 1346 0
 3508 00ac 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 3509 00b0 2371     		strb	r3, [r4, #4]
ARM GAS  /tmp/ccUeKVGD.s 			page 99


 3510 00b2 AFE7     		b	.L341
 3511              	.LVL432:
 3512              	.L355:
1351:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 sys_mbox_set_invalid(&msg->conn->recvmbox);
 3513              		.loc 1 1351 0
 3514 00b4 2068     		ldr	r0, [r4]
 3515 00b6 1030     		adds	r0, r0, #16
 3516 00b8 FFF7FEFF 		bl	sys_mbox_free
 3517              	.LVL433:
1352:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
 3518              		.loc 1 1352 0
 3519 00bc 2068     		ldr	r0, [r4]
 3520 00be 1030     		adds	r0, r0, #16
 3521 00c0 FFF7FEFF 		bl	sys_mbox_set_invalid
 3522              	.LVL434:
 3523 00c4 D8E7     		b	.L347
 3524              	.L356:
1356:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
 3525              		.loc 1 1356 0
 3526 00c6 2068     		ldr	r0, [r4]
 3527 00c8 0621     		movs	r1, #6
 3528 00ca 1430     		adds	r0, r0, #20
 3529 00cc FFF7FEFF 		bl	sys_mbox_new
 3530              	.LVL435:
 3531 00d0 2071     		strb	r0, [r4, #4]
 3532 00d2 D8E7     		b	.L348
 3533              	.L349:
1365:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****                 msg->conn->pcb.tcp = NULL;
 3534              		.loc 1 1365 0
 3535 00d4 2846     		mov	r0, r5
 3536 00d6 FFF7FEFF 		bl	tcp_close
 3537              	.LVL436:
1366:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****               }
 3538              		.loc 1 1366 0
 3539 00da 2368     		ldr	r3, [r4]
 3540 00dc 0022     		movs	r2, #0
 3541 00de 5A60     		str	r2, [r3, #4]
 3542 00e0 98E7     		b	.L341
 3543              	.LVL437:
 3544              	.L343:
 3545              	.LBE29:
 3546              	.LBE28:
1370:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           /* already listening, allow updating of the backlog */
 3547              		.loc 1 1370 0
 3548 00e2 022B     		cmp	r3, #2
 3549 00e4 96D1     		bne	.L341
1372:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           tcp_backlog_set(msg->conn->pcb.tcp, msg->msg.lb.backlog);
 3550              		.loc 1 1372 0
 3551 00e6 0023     		movs	r3, #0
 3552 00e8 2371     		strb	r3, [r4, #4]
 3553 00ea 93E7     		b	.L341
 3554              	.L358:
 3555              		.align	2
 3556              	.L357:
 3557 00ec 00000000 		.word	accept_function
 3558              		.cfi_endproc
 3559              	.LFE177:
ARM GAS  /tmp/ccUeKVGD.s 			page 100


 3561              		.section	.text.lwip_netconn_do_send,"ax",%progbits
 3562              		.align	1
 3563              		.global	lwip_netconn_do_send
 3564              		.syntax unified
 3565              		.thumb
 3566              		.thumb_func
 3567              		.fpu fpv5-sp-d16
 3569              	lwip_netconn_do_send:
 3570              	.LFB178:
1392:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3571              		.loc 1 1392 0
 3572              		.cfi_startproc
 3573              		@ args = 0, pretend = 0, frame = 0
 3574              		@ frame_needed = 0, uses_anonymous_args = 0
 3575              	.LVL438:
 3576 0000 10B5     		push	{r4, lr}
 3577              	.LCFI26:
 3578              		.cfi_def_cfa_offset 8
 3579              		.cfi_offset 4, -8
 3580              		.cfi_offset 14, -4
 3581 0002 0446     		mov	r4, r0
 3582              	.LVL439:
1395:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3583              		.loc 1 1395 0
 3584 0004 0368     		ldr	r3, [r0]
 3585 0006 93F90820 		ldrsb	r2, [r3, #8]
 3586 000a 12F10C0F 		cmn	r2, #12
 3587 000e 10DA     		bge	.L360
1396:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
 3588              		.loc 1 1396 0
 3589 0010 0271     		strb	r2, [r0, #4]
 3590              	.LVL440:
 3591              	.L361:
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3592              		.loc 1 1435 0
 3593 0012 2368     		ldr	r3, [r4]
 3594 0014 63B1     		cbz	r3, .L359
 3595              	.LBB30:
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3596              		.loc 1 1435 0 is_stmt 0 discriminator 1
 3597 0016 FFF7FEFF 		bl	sys_arch_protect
 3598              	.LVL441:
 3599 001a 2368     		ldr	r3, [r4]
 3600 001c 93F90820 		ldrsb	r2, [r3, #8]
 3601 0020 12F10C0F 		cmn	r2, #12
 3602 0024 02DB     		blt	.L365
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3603              		.loc 1 1435 0 discriminator 2
 3604 0026 94F90420 		ldrsb	r2, [r4, #4]
 3605 002a 1A72     		strb	r2, [r3, #8]
 3606              	.L365:
1435:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3607              		.loc 1 1435 0 discriminator 4
 3608 002c FFF7FEFF 		bl	sys_arch_unprotect
 3609              	.LVL442:
 3610              	.L359:
 3611              	.LBE30:
ARM GAS  /tmp/ccUeKVGD.s 			page 101


1436:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3612              		.loc 1 1436 0 is_stmt 1
 3613 0030 10BD     		pop	{r4, pc}
 3614              	.LVL443:
 3615              	.L360:
1398:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->conn->pcb.tcp != NULL) {
 3616              		.loc 1 1398 0
 3617 0032 F522     		movs	r2, #245
 3618 0034 0271     		strb	r2, [r0, #4]
1399:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       switch (NETCONNTYPE_GROUP(msg->conn->type)) {
 3619              		.loc 1 1399 0
 3620 0036 5868     		ldr	r0, [r3, #4]
 3621              	.LVL444:
 3622 0038 0028     		cmp	r0, #0
 3623 003a EAD0     		beq	.L361
1400:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
 3624              		.loc 1 1400 0
 3625 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3626 003e 03F0F003 		and	r3, r3, #240
 3627 0042 202B     		cmp	r3, #32
 3628 0044 E5D1     		bne	.L361
1422:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = udp_send(msg->conn->pcb.udp, msg->msg.b->p);
 3629              		.loc 1 1422 0
 3630 0046 A168     		ldr	r1, [r4, #8]
 3631 0048 8B68     		ldr	r3, [r1, #8]
 3632 004a 23B9     		cbnz	r3, .L363
1423:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
 3633              		.loc 1 1423 0
 3634 004c 0968     		ldr	r1, [r1]
 3635 004e FFF7FEFF 		bl	udp_send
 3636              	.LVL445:
 3637 0052 2071     		strb	r0, [r4, #4]
 3638 0054 DDE7     		b	.L361
 3639              	.L363:
1425:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 3640              		.loc 1 1425 0
 3641 0056 8B89     		ldrh	r3, [r1, #12]
 3642 0058 01F10802 		add	r2, r1, #8
 3643 005c 0968     		ldr	r1, [r1]
 3644 005e FFF7FEFF 		bl	udp_sendto
 3645              	.LVL446:
 3646 0062 2071     		strb	r0, [r4, #4]
 3647 0064 D5E7     		b	.L361
 3648              		.cfi_endproc
 3649              	.LFE178:
 3651              		.section	.text.lwip_netconn_do_recv,"ax",%progbits
 3652              		.align	1
 3653              		.global	lwip_netconn_do_recv
 3654              		.syntax unified
 3655              		.thumb
 3656              		.thumb_func
 3657              		.fpu fpv5-sp-d16
 3659              	lwip_netconn_do_recv:
 3660              	.LFB179:
1447:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
 3661              		.loc 1 1447 0
 3662              		.cfi_startproc
ARM GAS  /tmp/ccUeKVGD.s 			page 102


 3663              		@ args = 0, pretend = 0, frame = 0
 3664              		@ frame_needed = 0, uses_anonymous_args = 0
 3665              	.LVL447:
 3666 0000 70B5     		push	{r4, r5, r6, lr}
 3667              	.LCFI27:
 3668              		.cfi_def_cfa_offset 16
 3669              		.cfi_offset 4, -16
 3670              		.cfi_offset 5, -12
 3671              		.cfi_offset 6, -8
 3672              		.cfi_offset 14, -4
 3673 0002 0546     		mov	r5, r0
 3674              	.LVL448:
1450:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.tcp != NULL) {
 3675              		.loc 1 1450 0
 3676 0004 0023     		movs	r3, #0
 3677 0006 0371     		strb	r3, [r0, #4]
1451:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
 3678              		.loc 1 1451 0
 3679 0008 0368     		ldr	r3, [r0]
 3680 000a 5A68     		ldr	r2, [r3, #4]
 3681 000c 22B1     		cbz	r2, .L368
1452:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       u32_t remaining = msg->msg.r.len;
 3682              		.loc 1 1452 0
 3683 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3684 0010 03F0F003 		and	r3, r3, #240
 3685 0014 102B     		cmp	r3, #16
 3686 0016 0FD0     		beq	.L375
 3687              	.LVL449:
 3688              	.L368:
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3689              		.loc 1 1461 0
 3690 0018 2B68     		ldr	r3, [r5]
 3691 001a 63B1     		cbz	r3, .L367
 3692              	.LBB31:
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3693              		.loc 1 1461 0 is_stmt 0 discriminator 1
 3694 001c FFF7FEFF 		bl	sys_arch_protect
 3695              	.LVL450:
 3696 0020 2B68     		ldr	r3, [r5]
 3697 0022 93F90820 		ldrsb	r2, [r3, #8]
 3698 0026 12F10C0F 		cmn	r2, #12
 3699 002a 02DB     		blt	.L372
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3700              		.loc 1 1461 0 discriminator 2
 3701 002c 95F90420 		ldrsb	r2, [r5, #4]
 3702 0030 1A72     		strb	r2, [r3, #8]
 3703              	.L372:
1461:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3704              		.loc 1 1461 0 discriminator 4
 3705 0032 FFF7FEFF 		bl	sys_arch_unprotect
 3706              	.LVL451:
 3707              	.L367:
 3708              	.LBE31:
1462:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
 3709              		.loc 1 1462 0 is_stmt 1
 3710 0036 70BD     		pop	{r4, r5, r6, pc}
 3711              	.LVL452:
ARM GAS  /tmp/ccUeKVGD.s 			page 103


 3712              	.L375:
 3713              	.LBB32:
1453:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       do {
 3714              		.loc 1 1453 0
 3715 0038 8468     		ldr	r4, [r0, #8]
 3716              	.LVL453:
 3717 003a 08E0     		b	.L370
 3718              	.LVL454:
 3719              	.L373:
 3720              	.LBB33:
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
 3721              		.loc 1 1455 0
 3722 003c 4FF6FF76 		movw	r6, #65535
 3723              	.L369:
 3724              	.LVL455:
1456:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         remaining -= recved;
 3725              		.loc 1 1456 0 discriminator 4
 3726 0040 2B68     		ldr	r3, [r5]
 3727 0042 3146     		mov	r1, r6
 3728 0044 5868     		ldr	r0, [r3, #4]
 3729 0046 FFF7FEFF 		bl	tcp_recved
 3730              	.LVL456:
 3731              	.LBE33:
1458:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
 3732              		.loc 1 1458 0 discriminator 4
 3733 004a A41B     		subs	r4, r4, r6
 3734              	.LVL457:
 3735 004c E4D0     		beq	.L368
 3736              	.LVL458:
 3737              	.L370:
 3738              	.LBB34:
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
 3739              		.loc 1 1455 0
 3740 004e B4F5803F 		cmp	r4, #65536
 3741 0052 F3D2     		bcs	.L373
1455:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         tcp_recved(msg->conn->pcb.tcp, recved);
 3742              		.loc 1 1455 0 is_stmt 0 discriminator 1
 3743 0054 A6B2     		uxth	r6, r4
 3744 0056 F3E7     		b	.L369
 3745              	.LBE34:
 3746              	.LBE32:
 3747              		.cfi_endproc
 3748              	.LFE179:
 3750              		.section	.text.lwip_netconn_do_write,"ax",%progbits
 3751              		.align	1
 3752              		.global	lwip_netconn_do_write
 3753              		.syntax unified
 3754              		.thumb
 3755              		.thumb_func
 3756              		.fpu fpv5-sp-d16
 3758              	lwip_netconn_do_write:
 3759              	.LFB181:
1642:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1643:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1644:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1645:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Send some data on a TCP pcb contained in a netconn
1646:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_write
ARM GAS  /tmp/ccUeKVGD.s 			page 104


1647:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1648:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1649:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1650:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1651:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_write(void *m)
1652:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 3760              		.loc 1 1652 0 is_stmt 1
 3761              		.cfi_startproc
 3762              		@ args = 0, pretend = 0, frame = 0
 3763              		@ frame_needed = 0, uses_anonymous_args = 0
 3764              	.LVL459:
 3765 0000 38B5     		push	{r3, r4, r5, lr}
 3766              	.LCFI28:
 3767              		.cfi_def_cfa_offset 16
 3768              		.cfi_offset 3, -16
 3769              		.cfi_offset 4, -12
 3770              		.cfi_offset 5, -8
 3771              		.cfi_offset 14, -4
 3772 0002 0446     		mov	r4, r0
 3773              	.LVL460:
1653:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
1654:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1655:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (ERR_IS_FATAL(msg->conn->last_err)) {
 3774              		.loc 1 1655 0
 3775 0004 0368     		ldr	r3, [r0]
 3776 0006 93F90820 		ldrsb	r2, [r3, #8]
 3777 000a 12F10C0F 		cmn	r2, #12
 3778 000e 0FDA     		bge	.L377
1656:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = msg->conn->last_err;
 3779              		.loc 1 1656 0
 3780 0010 0271     		strb	r2, [r0, #4]
 3781              	.L378:
1657:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1658:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) {
1659:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1660:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->conn->state != NETCONN_NONE) {
1661:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* netconn is connecting, closing or in blocking write */
1662:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_INPROGRESS;
1663:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->pcb.tcp != NULL) {
1664:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_WRITE;
1665:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* set all the variables used by lwip_netconn_do_writemore */
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("already writing or closing", msg->conn->current_msg == NULL &&
1667:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
1668:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("msg->msg.w.len != 0", msg->msg.w.len != 0);
1669:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
1670:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset = 0;
1671:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1672:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if (lwip_netconn_do_writemore(msg->conn, 0) != ERR_OK) {
1673:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_WRITE);
1674:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
1675:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1676:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
1677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state != NETCONN_WRITE);
1678:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1679:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1680:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         lwip_netconn_do_writemore(msg->conn);
1681:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
ARM GAS  /tmp/ccUeKVGD.s 			page 105


1682:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* for both cases: if lwip_netconn_do_writemore was called, don't ACK the APIMSG
1683:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            since lwip_netconn_do_writemore ACKs it! */
1684:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         return;
1685:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1686:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_CONN;
1687:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1688:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCP */
1689:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_VAL;
1690:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1691:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if (LWIP_UDP || LWIP_RAW)
1692:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1693:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_VAL;
1694:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* (LWIP_UDP || LWIP_RAW) */
1695:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1696:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1697:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
 3782              		.loc 1 1697 0
 3783 0012 63B1     		cbz	r3, .L376
 3784              	.LBB35:
 3785              		.loc 1 1697 0 is_stmt 0 discriminator 1
 3786 0014 FFF7FEFF 		bl	sys_arch_protect
 3787              	.LVL461:
 3788 0018 2368     		ldr	r3, [r4]
 3789 001a 93F90820 		ldrsb	r2, [r3, #8]
 3790 001e 12F10C0F 		cmn	r2, #12
 3791 0022 02DB     		blt	.L387
 3792              		.loc 1 1697 0 discriminator 2
 3793 0024 94F90420 		ldrsb	r2, [r4, #4]
 3794 0028 1A72     		strb	r2, [r3, #8]
 3795              	.L387:
 3796              		.loc 1 1697 0 discriminator 4
 3797 002a FFF7FEFF 		bl	sys_arch_unprotect
 3798              	.LVL462:
 3799              	.L376:
 3800              	.LBE35:
1698:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 3801              		.loc 1 1698 0 is_stmt 1
 3802 002e 38BD     		pop	{r3, r4, r5, pc}
 3803              	.LVL463:
 3804              	.L377:
1658:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
 3805              		.loc 1 1658 0
 3806 0030 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3807 0032 02F0F002 		and	r2, r2, #240
 3808 0036 102A     		cmp	r2, #16
 3809 0038 02D0     		beq	.L389
1693:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* (LWIP_UDP || LWIP_RAW) */
 3810              		.loc 1 1693 0
 3811 003a FA22     		movs	r2, #250
 3812 003c 0271     		strb	r2, [r0, #4]
 3813 003e E8E7     		b	.L378
 3814              	.L389:
1660:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* netconn is connecting, closing or in blocking write */
 3815              		.loc 1 1660 0
 3816 0040 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3817 0042 12B1     		cbz	r2, .L380
1662:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else if (msg->conn->pcb.tcp != NULL) {
ARM GAS  /tmp/ccUeKVGD.s 			page 106


 3818              		.loc 1 1662 0
 3819 0044 FB22     		movs	r2, #251
 3820 0046 0271     		strb	r2, [r0, #4]
 3821 0048 E3E7     		b	.L378
 3822              	.L380:
1663:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_WRITE;
 3823              		.loc 1 1663 0
 3824 004a 5A68     		ldr	r2, [r3, #4]
 3825 004c 002A     		cmp	r2, #0
 3826 004e 48D0     		beq	.L381
1664:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* set all the variables used by lwip_netconn_do_writemore */
 3827              		.loc 1 1664 0
 3828 0050 0122     		movs	r2, #1
 3829 0052 5A70     		strb	r2, [r3, #1]
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 3830              		.loc 1 1666 0
 3831 0054 0368     		ldr	r3, [r0]
 3832 0056 5A6A     		ldr	r2, [r3, #36]
 3833 0058 002A     		cmp	r2, #0
 3834 005a 2ED0     		beq	.L390
 3835              	.L382:
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 3836              		.loc 1 1666 0 is_stmt 0 discriminator 3
 3837 005c 224B     		ldr	r3, .L393
 3838 005e 40F28362 		movw	r2, #1667
 3839 0062 2249     		ldr	r1, .L393+4
 3840 0064 2248     		ldr	r0, .L393+8
 3841              	.LVL464:
 3842 0066 FFF7FEFF 		bl	printf
 3843              	.LVL465:
 3844              	.L383:
1668:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
 3845              		.loc 1 1668 0 is_stmt 1
 3846 006a E368     		ldr	r3, [r4, #12]
 3847 006c 4BB3     		cbz	r3, .L391
 3848              	.L384:
1669:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset = 0;
 3849              		.loc 1 1669 0
 3850 006e 2368     		ldr	r3, [r4]
 3851 0070 5C62     		str	r4, [r3, #36]
1670:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 3852              		.loc 1 1670 0
 3853 0072 2368     		ldr	r3, [r4]
 3854 0074 0021     		movs	r1, #0
 3855 0076 1962     		str	r1, [r3, #32]
1672:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state == NETCONN_WRITE);
 3856              		.loc 1 1672 0
 3857 0078 2068     		ldr	r0, [r4]
 3858 007a FFF7FEFF 		bl	lwip_netconn_do_writemore
 3859              	.LVL466:
 3860 007e 0028     		cmp	r0, #0
 3861 0080 D5D0     		beq	.L376
1673:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
 3862              		.loc 1 1673 0
 3863 0082 2368     		ldr	r3, [r4]
 3864 0084 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3865 0086 012B     		cmp	r3, #1
ARM GAS  /tmp/ccUeKVGD.s 			page 107


 3866 0088 23D1     		bne	.L392
 3867              	.L386:
1674:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 3868              		.loc 1 1674 0
 3869 008a 1A4D     		ldr	r5, .L393+12
 3870 008c 2846     		mov	r0, r5
 3871 008e FFF7FEFF 		bl	sys_mutex_unlock
 3872              	.LVL467:
1675:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LOCK_TCPIP_CORE();
 3873              		.loc 1 1675 0
 3874 0092 2068     		ldr	r0, [r4]
 3875 0094 0021     		movs	r1, #0
 3876 0096 0C30     		adds	r0, r0, #12
 3877 0098 FFF7FEFF 		bl	sys_arch_sem_wait
 3878              	.LVL468:
1676:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           LWIP_ASSERT("state!", msg->conn->state != NETCONN_WRITE);
 3879              		.loc 1 1676 0
 3880 009c 2846     		mov	r0, r5
 3881 009e FFF7FEFF 		bl	sys_mutex_lock
 3882              	.LVL469:
1677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 3883              		.loc 1 1677 0
 3884 00a2 2368     		ldr	r3, [r4]
 3885 00a4 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 3886 00a6 012B     		cmp	r3, #1
 3887 00a8 C1D1     		bne	.L376
1677:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
 3888              		.loc 1 1677 0 is_stmt 0 discriminator 1
 3889 00aa 0F4B     		ldr	r3, .L393
 3890 00ac 40F28D62 		movw	r2, #1677
 3891 00b0 1149     		ldr	r1, .L393+16
 3892 00b2 0F48     		ldr	r0, .L393+8
 3893 00b4 FFF7FEFF 		bl	printf
 3894              	.LVL470:
 3895 00b8 B9E7     		b	.L376
 3896              	.LVL471:
 3897              	.L390:
1666:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->conn->write_offset == 0);
 3898              		.loc 1 1666 0 is_stmt 1 discriminator 2
 3899 00ba 1B6A     		ldr	r3, [r3, #32]
 3900 00bc 002B     		cmp	r3, #0
 3901 00be D4D0     		beq	.L383
 3902 00c0 CCE7     		b	.L382
 3903              	.LVL472:
 3904              	.L391:
1668:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = msg;
 3905              		.loc 1 1668 0 discriminator 1
 3906 00c2 094B     		ldr	r3, .L393
 3907 00c4 40F28462 		movw	r2, #1668
 3908 00c8 0C49     		ldr	r1, .L393+20
 3909 00ca 0948     		ldr	r0, .L393+8
 3910 00cc FFF7FEFF 		bl	printf
 3911              	.LVL473:
 3912 00d0 CDE7     		b	.L384
 3913              	.L392:
1673:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           UNLOCK_TCPIP_CORE();
 3914              		.loc 1 1673 0 discriminator 1
ARM GAS  /tmp/ccUeKVGD.s 			page 108


 3915 00d2 054B     		ldr	r3, .L393
 3916 00d4 40F28962 		movw	r2, #1673
 3917 00d8 0749     		ldr	r1, .L393+16
 3918 00da 0548     		ldr	r0, .L393+8
 3919 00dc FFF7FEFF 		bl	printf
 3920              	.LVL474:
 3921 00e0 D3E7     		b	.L386
 3922              	.LVL475:
 3923              	.L381:
1686:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 3924              		.loc 1 1686 0
 3925 00e2 F522     		movs	r2, #245
 3926 00e4 0271     		strb	r2, [r0, #4]
 3927 00e6 94E7     		b	.L378
 3928              	.L394:
 3929              		.align	2
 3930              	.L393:
 3931 00e8 00000000 		.word	.LC0
 3932 00ec 34000000 		.word	.LC31
 3933 00f0 54000000 		.word	.LC2
 3934 00f4 00000000 		.word	lock_tcpip_core
 3935 00f8 50000000 		.word	.LC32
 3936 00fc 00000000 		.word	.LC34
 3937              		.cfi_endproc
 3938              	.LFE181:
 3940              		.section	.text.lwip_netconn_do_getaddr,"ax",%progbits
 3941              		.align	1
 3942              		.global	lwip_netconn_do_getaddr
 3943              		.syntax unified
 3944              		.thumb
 3945              		.thumb_func
 3946              		.fpu fpv5-sp-d16
 3948              	lwip_netconn_do_getaddr:
 3949              	.LFB182:
1699:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1700:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1701:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Return a connection's local or remote address
1702:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_getaddr
1703:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1704:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1705:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1706:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1707:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_getaddr(void *m)
1708:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 3950              		.loc 1 1708 0
 3951              		.cfi_startproc
 3952              		@ args = 0, pretend = 0, frame = 0
 3953              		@ frame_needed = 0, uses_anonymous_args = 0
 3954              	.LVL476:
 3955 0000 10B5     		push	{r4, lr}
 3956              	.LCFI29:
 3957              		.cfi_def_cfa_offset 8
 3958              		.cfi_offset 4, -8
 3959              		.cfi_offset 14, -4
 3960 0002 0446     		mov	r4, r0
 3961              	.LVL477:
1709:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
ARM GAS  /tmp/ccUeKVGD.s 			page 109


1710:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1711:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if (msg->conn->pcb.ip != NULL) {
 3962              		.loc 1 1711 0
 3963 0004 0368     		ldr	r3, [r0]
 3964 0006 5B68     		ldr	r3, [r3, #4]
 3965 0008 002B     		cmp	r3, #0
 3966 000a 3FD0     		beq	.L396
1712:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (msg->msg.ad.local) {
 3967              		.loc 1 1712 0
 3968 000c 027C     		ldrb	r2, [r0, #16]	@ zero_extendqisi2
 3969 000e 9AB1     		cbz	r2, .L397
1713:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(API_EXPR_DEREF(msg->msg.ad.ipaddr),
 3970              		.loc 1 1713 0
 3971 0010 8268     		ldr	r2, [r0, #8]
 3972 0012 1B68     		ldr	r3, [r3]
 3973 0014 1360     		str	r3, [r2]
 3974              	.L398:
1714:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->local_ip);
1715:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1716:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ip_addr_copy(API_EXPR_DEREF(msg->msg.ad.ipaddr),
1717:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->remote_ip);
1718:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1719:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1720:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_OK;
 3975              		.loc 1 1720 0
 3976 0016 0023     		movs	r3, #0
 3977 0018 2371     		strb	r3, [r4, #4]
1721:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     switch (NETCONNTYPE_GROUP(msg->conn->type)) {
 3978              		.loc 1 1721 0
 3979 001a 2268     		ldr	r2, [r4]
 3980 001c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3981 001e 03F0F003 		and	r3, r3, #240
 3982 0022 102B     		cmp	r3, #16
 3983 0024 18D0     		beq	.L400
 3984 0026 202B     		cmp	r3, #32
 3985 0028 28D1     		bne	.L410
1722:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_RAW
1723:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_RAW:
1724:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.ad.local) {
1725:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.raw->protocol;
1726:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1727:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* return an error as connecting is only a helper for upper layers */
1728:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_CONN;
1729:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1730:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1731:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_RAW */
1732:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_UDP
1733:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_UDP:
1734:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.ad.local) {
 3986              		.loc 1 1734 0
 3987 002a 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 3988 002c 43B1     		cbz	r3, .L402
1735:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.udp->local_port;
 3989              		.loc 1 1735 0
 3990 002e 5268     		ldr	r2, [r2, #4]
 3991 0030 E368     		ldr	r3, [r4, #12]
 3992 0032 528A     		ldrh	r2, [r2, #18]
ARM GAS  /tmp/ccUeKVGD.s 			page 110


 3993 0034 1A80     		strh	r2, [r3]	@ movhi
 3994 0036 2BE0     		b	.L403
 3995              	.L397:
1716:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->pcb.ip->remote_ip);
 3996              		.loc 1 1716 0
 3997 0038 8268     		ldr	r2, [r0, #8]
 3998 003a 5B68     		ldr	r3, [r3, #4]
 3999 003c 1360     		str	r3, [r2]
 4000 003e EAE7     		b	.L398
 4001              	.L402:
1736:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1737:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         if ((msg->conn->pcb.udp->flags & UDP_FLAGS_CONNECTED) == 0) {
 4002              		.loc 1 1737 0
 4003 0040 5368     		ldr	r3, [r2, #4]
 4004 0042 1A7C     		ldrb	r2, [r3, #16]	@ zero_extendqisi2
 4005 0044 12F0040F 		tst	r2, #4
 4006 0048 02D1     		bne	.L404
1738:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           msg->err = ERR_CONN;
 4007              		.loc 1 1738 0
 4008 004a F523     		movs	r3, #245
 4009 004c 2371     		strb	r3, [r4, #4]
 4010 004e 1FE0     		b	.L403
 4011              	.L404:
1739:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         } else {
1740:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           API_EXPR_DEREF(msg->msg.ad.port) = msg->conn->pcb.udp->remote_port;
 4012              		.loc 1 1740 0
 4013 0050 E268     		ldr	r2, [r4, #12]
 4014 0052 9B8A     		ldrh	r3, [r3, #20]
 4015 0054 1380     		strh	r3, [r2]	@ movhi
 4016 0056 1BE0     		b	.L403
 4017              	.L400:
1741:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         }
1742:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1743:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1744:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_UDP */
1745:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1746:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     case NETCONN_TCP:
1747:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if ((msg->msg.ad.local == 0) &&
 4018              		.loc 1 1747 0
 4019 0058 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 4020 005a 1BB9     		cbnz	r3, .L405
1748:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           ((msg->conn->pcb.tcp->state == CLOSED) || (msg->conn->pcb.tcp->state == LISTEN))) {
 4021              		.loc 1 1748 0 discriminator 1
 4022 005c 5168     		ldr	r1, [r2, #4]
 4023 005e 097D     		ldrb	r1, [r1, #20]	@ zero_extendqisi2
1747:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****           ((msg->conn->pcb.tcp->state == CLOSED) || (msg->conn->pcb.tcp->state == LISTEN))) {
 4024              		.loc 1 1747 0 discriminator 1
 4025 0060 0129     		cmp	r1, #1
 4026 0062 05D9     		bls	.L412
 4027              	.L405:
1749:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* pcb is not connected and remote name is requested */
1750:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = ERR_CONN;
1751:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1752:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         API_EXPR_DEREF(msg->msg.ad.port) = (msg->msg.ad.local ? msg->conn->pcb.tcp->local_port : ms
 4028              		.loc 1 1752 0
 4029 0064 3BB1     		cbz	r3, .L406
 4030              		.loc 1 1752 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccUeKVGD.s 			page 111


 4031 0066 5368     		ldr	r3, [r2, #4]
 4032 0068 DA8A     		ldrh	r2, [r3, #22]
 4033              	.L407:
 4034              		.loc 1 1752 0 discriminator 4
 4035 006a E368     		ldr	r3, [r4, #12]
 4036 006c 1A80     		strh	r2, [r3]	@ movhi
 4037 006e 0FE0     		b	.L403
 4038              	.L412:
1750:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
 4039              		.loc 1 1750 0 is_stmt 1
 4040 0070 F523     		movs	r3, #245
 4041 0072 2371     		strb	r3, [r4, #4]
 4042 0074 0CE0     		b	.L403
 4043              	.L406:
 4044              		.loc 1 1752 0 discriminator 2
 4045 0076 5368     		ldr	r3, [r2, #4]
 4046 0078 1A8B     		ldrh	r2, [r3, #24]
 4047 007a F6E7     		b	.L407
 4048              	.L410:
1753:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1754:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
1755:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1756:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     default:
1757:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("invalid netconn_type", 0);
 4049              		.loc 1 1757 0 discriminator 1
 4050 007c 0C4B     		ldr	r3, .L413
 4051 007e 40F2DD62 		movw	r2, #1757
 4052 0082 0C49     		ldr	r1, .L413+4
 4053 0084 0C48     		ldr	r0, .L413+8
 4054              	.LVL478:
 4055 0086 FFF7FEFF 		bl	printf
 4056              	.LVL479:
1758:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       break;
 4057              		.loc 1 1758 0 discriminator 1
 4058 008a 01E0     		b	.L403
 4059              	.LVL480:
 4060              	.L396:
1759:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1760:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else {
1761:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
 4061              		.loc 1 1761 0
 4062 008c F523     		movs	r3, #245
 4063 008e 0371     		strb	r3, [r0, #4]
 4064              	.LVL481:
 4065              	.L403:
1762:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1763:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
 4066              		.loc 1 1763 0
 4067 0090 2368     		ldr	r3, [r4]
 4068 0092 63B1     		cbz	r3, .L395
 4069              	.LBB36:
 4070              		.loc 1 1763 0 is_stmt 0 discriminator 1
 4071 0094 FFF7FEFF 		bl	sys_arch_protect
 4072              	.LVL482:
 4073 0098 2368     		ldr	r3, [r4]
 4074 009a 93F90820 		ldrsb	r2, [r3, #8]
 4075 009e 12F10C0F 		cmn	r2, #12
ARM GAS  /tmp/ccUeKVGD.s 			page 112


 4076 00a2 02DB     		blt	.L409
 4077              		.loc 1 1763 0 discriminator 2
 4078 00a4 94F90420 		ldrsb	r2, [r4, #4]
 4079 00a8 1A72     		strb	r2, [r3, #8]
 4080              	.L409:
 4081              		.loc 1 1763 0 discriminator 4
 4082 00aa FFF7FEFF 		bl	sys_arch_unprotect
 4083              	.LVL483:
 4084              	.L395:
 4085              	.LBE36:
1764:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4086              		.loc 1 1764 0 is_stmt 1
 4087 00ae 10BD     		pop	{r4, pc}
 4088              	.LVL484:
 4089              	.L414:
 4090              		.align	2
 4091              	.L413:
 4092 00b0 00000000 		.word	.LC0
 4093 00b4 00000000 		.word	.LC35
 4094 00b8 54000000 		.word	.LC2
 4095              		.cfi_endproc
 4096              	.LFE182:
 4098              		.section	.text.lwip_netconn_do_close,"ax",%progbits
 4099              		.align	1
 4100              		.global	lwip_netconn_do_close
 4101              		.syntax unified
 4102              		.thumb
 4103              		.thumb_func
 4104              		.fpu fpv5-sp-d16
 4106              	lwip_netconn_do_close:
 4107              	.LFB183:
1765:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1766:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** /**
1767:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Close or half-shutdown a TCP pcb contained in a netconn
1768:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * Called from netconn_close
1769:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * In contrast to closing sockets, the netconn is not deallocated.
1770:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  *
1771:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  * @param m the api_msg_msg pointing to the connection
1772:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****  */
1773:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** void
1774:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** lwip_netconn_do_close(void *m)
1775:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** {
 4108              		.loc 1 1775 0
 4109              		.cfi_startproc
 4110              		@ args = 0, pretend = 0, frame = 0
 4111              		@ frame_needed = 0, uses_anonymous_args = 0
 4112              	.LVL485:
 4113 0000 38B5     		push	{r3, r4, r5, lr}
 4114              	.LCFI30:
 4115              		.cfi_def_cfa_offset 16
 4116              		.cfi_offset 3, -16
 4117              		.cfi_offset 4, -12
 4118              		.cfi_offset 5, -8
 4119              		.cfi_offset 14, -4
 4120 0002 0446     		mov	r4, r0
 4121              	.LVL486:
1776:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   struct api_msg *msg = (struct api_msg*)m;
ARM GAS  /tmp/ccUeKVGD.s 			page 113


1777:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** 
1778:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCP
1779:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   enum netconn_state state = msg->conn->state;
 4122              		.loc 1 1779 0
 4123 0004 0068     		ldr	r0, [r0]
 4124              	.LVL487:
 4125 0006 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 4126              	.LVL488:
1780:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   /* First check if this is a TCP netconn and if it is in a correct state
1781:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (LISTEN doesn't support half shutdown) */
1782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   if ((msg->conn->pcb.tcp != NULL) &&
 4127              		.loc 1 1782 0
 4128 0008 4368     		ldr	r3, [r0, #4]
 4129 000a 23B1     		cbz	r3, .L416
1783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) &&
 4130              		.loc 1 1783 0 discriminator 1
 4131 000c 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
1782:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       (NETCONNTYPE_GROUP(msg->conn->type) == NETCONN_TCP) &&
 4132              		.loc 1 1782 0 discriminator 1
 4133 000e 03F0F003 		and	r3, r3, #240
 4134 0012 102B     		cmp	r3, #16
 4135 0014 10D0     		beq	.L428
 4136              	.L416:
1784:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
1785:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Check if we are in a connected state */
1786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (state == NETCONN_CONNECT) {
1787:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* TCP connect in progress: cannot shutdown */
1788:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_CONN;
1789:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (state == NETCONN_WRITE) {
1790:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN_FULLDUPLEX
1791:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.sd.shut & NETCONN_SHUT_WR) {
1792:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* close requested, abort running write */
1793:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_sem_t* write_completed_sem;
1794:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("msg->conn->current_msg != NULL", msg->conn->current_msg != NULL);
1795:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         write_completed_sem = LWIP_API_MSG_SEM(msg->conn->current_msg);
1796:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg->err = ERR_CLSD;
1797:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->current_msg = NULL;
1798:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset = 0;
1799:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->state = NETCONN_NONE;
1800:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         state = NETCONN_NONE;
1801:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         NETCONN_SET_SAFE_ERR(msg->conn, ERR_CLSD);
1802:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_sem_signal(write_completed_sem);
1803:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       } else {
1804:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("msg->msg.sd.shut == NETCONN_SHUT_RD", msg->msg.sd.shut == NETCONN_SHUT_RD);
1805:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* In this case, let the write continue and do not interfere with
1806:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****            conn->current_msg or conn->state! */
1807:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->err = tcp_shutdown(msg->conn->pcb.tcp, 1, 0);
1808:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1809:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1810:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     if (state == NETCONN_NONE) {
1811:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_NETCONN_FULLDUPLEX */
1812:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->err = ERR_INPROGRESS;
1813:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
1814:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
1815:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (msg->msg.sd.shut & NETCONN_SHUT_RD) {
1816:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Drain and delete mboxes */
1817:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         netconn_drain(msg->conn);
ARM GAS  /tmp/ccUeKVGD.s 			page 114


1818:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       LWIP_ASSERT("already writing or closing", msg->conn->current_msg == NULL &&
1820:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
1821:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->state = NETCONN_CLOSE;
1822:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg = msg;
1823:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
1824:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       if (lwip_netconn_do_close_internal(msg->conn, 0) != ERR_OK) {
1825:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
1826:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         UNLOCK_TCPIP_CORE();
1827:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
1828:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LOCK_TCPIP_CORE();
1829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
1830:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
1831:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
1832:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       lwip_netconn_do_close_internal(msg->conn);
1833:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
1834:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* for tcp netconns, lwip_netconn_do_close_internal ACKs the message */
1835:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       return;
1836:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     }
1837:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   } else
1838:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #endif /* LWIP_TCP */
1839:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   {
1840:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     msg->err = ERR_CONN;
 4137              		.loc 1 1840 0
 4138 0016 F523     		movs	r3, #245
 4139 0018 2371     		strb	r3, [r4, #4]
 4140              	.L419:
1841:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   }
1842:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****   TCPIP_APIMSG_ACK(msg);
 4141              		.loc 1 1842 0
 4142 001a 60B1     		cbz	r0, .L415
 4143              	.LBB37:
 4144              		.loc 1 1842 0 is_stmt 0 discriminator 1
 4145 001c FFF7FEFF 		bl	sys_arch_protect
 4146              	.LVL489:
 4147 0020 2368     		ldr	r3, [r4]
 4148 0022 93F90820 		ldrsb	r2, [r3, #8]
 4149 0026 12F10C0F 		cmn	r2, #12
 4150 002a 02DB     		blt	.L426
 4151              		.loc 1 1842 0 discriminator 2
 4152 002c 94F90420 		ldrsb	r2, [r4, #4]
 4153 0030 1A72     		strb	r2, [r3, #8]
 4154              	.L426:
 4155              		.loc 1 1842 0 discriminator 4
 4156 0032 FFF7FEFF 		bl	sys_arch_unprotect
 4157              	.LVL490:
 4158              	.L415:
 4159              	.LBE37:
1843:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** }
 4160              		.loc 1 1843 0 is_stmt 1
 4161 0036 38BD     		pop	{r3, r4, r5, pc}
 4162              	.LVL491:
 4163              	.L428:
1784:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
 4164              		.loc 1 1784 0
 4165 0038 237A     		ldrb	r3, [r4, #8]	@ zero_extendqisi2
1783:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       ((msg->msg.sd.shut == NETCONN_SHUT_RDWR) || (state != NETCONN_LISTEN))) {
ARM GAS  /tmp/ccUeKVGD.s 			page 115


 4166              		.loc 1 1783 0
 4167 003a 032B     		cmp	r3, #3
 4168 003c 01D0     		beq	.L417
1784:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     /* Check if we are in a connected state */
 4169              		.loc 1 1784 0
 4170 003e 022A     		cmp	r2, #2
 4171 0040 E9D0     		beq	.L416
 4172              	.L417:
1786:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       /* TCP connect in progress: cannot shutdown */
 4173              		.loc 1 1786 0
 4174 0042 032A     		cmp	r2, #3
 4175 0044 36D0     		beq	.L429
1789:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_NETCONN_FULLDUPLEX
 4176              		.loc 1 1789 0
 4177 0046 012A     		cmp	r2, #1
 4178 0048 37D0     		beq	.L430
1815:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         /* Drain and delete mboxes */
 4179              		.loc 1 1815 0
 4180 004a 13F0010F 		tst	r3, #1
 4181 004e 37D1     		bne	.L431
 4182              	.LVL492:
 4183              	.L421:
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
 4184              		.loc 1 1819 0
 4185 0050 2368     		ldr	r3, [r4]
 4186 0052 5A6A     		ldr	r2, [r3, #36]
 4187 0054 002A     		cmp	r2, #0
 4188 0056 36D0     		beq	.L432
 4189              	.L422:
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
 4190              		.loc 1 1819 0 is_stmt 0 discriminator 3
 4191 0058 214B     		ldr	r3, .L434
 4192 005a 40F21C72 		movw	r2, #1820
 4193 005e 2149     		ldr	r1, .L434+4
 4194 0060 2148     		ldr	r0, .L434+8
 4195 0062 FFF7FEFF 		bl	printf
 4196              	.LVL493:
 4197              	.L423:
1821:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       msg->conn->current_msg = msg;
 4198              		.loc 1 1821 0 is_stmt 1
 4199 0066 2368     		ldr	r3, [r4]
 4200 0068 0422     		movs	r2, #4
 4201 006a 5A70     		strb	r2, [r3, #1]
1822:Middlewares/Third_Party/LwIP/src/api/api_msg.c **** #if LWIP_TCPIP_CORE_LOCKING
 4202              		.loc 1 1822 0
 4203 006c 2368     		ldr	r3, [r4]
 4204 006e 5C62     		str	r4, [r3, #36]
1824:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_CLOSE);
 4205              		.loc 1 1824 0
 4206 0070 0021     		movs	r1, #0
 4207 0072 2068     		ldr	r0, [r4]
 4208 0074 FFF7FEFF 		bl	lwip_netconn_do_close_internal
 4209              	.LVL494:
 4210 0078 0028     		cmp	r0, #0
 4211 007a DCD0     		beq	.L415
1825:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         UNLOCK_TCPIP_CORE();
 4212              		.loc 1 1825 0
ARM GAS  /tmp/ccUeKVGD.s 			page 116


 4213 007c 2368     		ldr	r3, [r4]
 4214 007e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 4215 0080 042B     		cmp	r3, #4
 4216 0082 24D1     		bne	.L433
 4217              	.L425:
1826:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         sys_arch_sem_wait(LWIP_API_MSG_SEM(msg), 0);
 4218              		.loc 1 1826 0
 4219 0084 194D     		ldr	r5, .L434+12
 4220 0086 2846     		mov	r0, r5
 4221 0088 FFF7FEFF 		bl	sys_mutex_unlock
 4222              	.LVL495:
1827:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LOCK_TCPIP_CORE();
 4223              		.loc 1 1827 0
 4224 008c 2068     		ldr	r0, [r4]
 4225 008e 0021     		movs	r1, #0
 4226 0090 0C30     		adds	r0, r0, #12
 4227 0092 FFF7FEFF 		bl	sys_arch_sem_wait
 4228              	.LVL496:
1828:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         LWIP_ASSERT("state!", msg->conn->state == NETCONN_NONE);
 4229              		.loc 1 1828 0
 4230 0096 2846     		mov	r0, r5
 4231 0098 FFF7FEFF 		bl	sys_mutex_lock
 4232              	.LVL497:
1829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4233              		.loc 1 1829 0
 4234 009c 2368     		ldr	r3, [r4]
 4235 009e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 4236 00a0 002B     		cmp	r3, #0
 4237 00a2 C8D0     		beq	.L415
1829:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4238              		.loc 1 1829 0 is_stmt 0 discriminator 1
 4239 00a4 0E4B     		ldr	r3, .L434
 4240 00a6 40F22572 		movw	r2, #1829
 4241 00aa 1149     		ldr	r1, .L434+16
 4242 00ac 0E48     		ldr	r0, .L434+8
 4243 00ae FFF7FEFF 		bl	printf
 4244              	.LVL498:
 4245 00b2 C0E7     		b	.L415
 4246              	.LVL499:
 4247              	.L429:
1788:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else if (state == NETCONN_WRITE) {
 4248              		.loc 1 1788 0 is_stmt 1
 4249 00b4 F523     		movs	r3, #245
 4250 00b6 2371     		strb	r3, [r4, #4]
 4251 00b8 AFE7     		b	.L419
 4252              	.L430:
1812:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****     } else {
 4253              		.loc 1 1812 0
 4254 00ba FB23     		movs	r3, #251
 4255 00bc 2371     		strb	r3, [r4, #4]
 4256 00be ACE7     		b	.L419
 4257              	.L431:
1817:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****       }
 4258              		.loc 1 1817 0
 4259 00c0 FFF7FEFF 		bl	netconn_drain
 4260              	.LVL500:
 4261 00c4 C4E7     		b	.L421
ARM GAS  /tmp/ccUeKVGD.s 			page 117


 4262              	.L432:
1819:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         msg->conn->write_offset == 0);
 4263              		.loc 1 1819 0 discriminator 2
 4264 00c6 1B6A     		ldr	r3, [r3, #32]
 4265 00c8 002B     		cmp	r3, #0
 4266 00ca CCD0     		beq	.L423
 4267 00cc C4E7     		b	.L422
 4268              	.L433:
1825:Middlewares/Third_Party/LwIP/src/api/api_msg.c ****         UNLOCK_TCPIP_CORE();
 4269              		.loc 1 1825 0 discriminator 1
 4270 00ce 044B     		ldr	r3, .L434
 4271 00d0 40F22172 		movw	r2, #1825
 4272 00d4 0649     		ldr	r1, .L434+16
 4273 00d6 0448     		ldr	r0, .L434+8
 4274 00d8 FFF7FEFF 		bl	printf
 4275              	.LVL501:
 4276 00dc D2E7     		b	.L425
 4277              	.L435:
 4278 00de 00BF     		.align	2
 4279              	.L434:
 4280 00e0 00000000 		.word	.LC0
 4281 00e4 34000000 		.word	.LC31
 4282 00e8 54000000 		.word	.LC2
 4283 00ec 00000000 		.word	lock_tcpip_core
 4284 00f0 50000000 		.word	.LC32
 4285              		.cfi_endproc
 4286              	.LFE183:
 4288              		.comm	netconn_aborted,1,1
 4289              		.section	.rodata.err_tcp.str1.4,"aMS",%progbits,1
 4290              		.align	2
 4291              	.LC6:
 4292 0000 636F6E6E 		.ascii	"conn != NULL\000"
 4292      20213D20 
 4292      4E554C4C 
 4292      00
 4293 000d 000000   		.space	3
 4294              	.LC7:
 4295 0010 636F6E6E 		.ascii	"conn->current_msg != NULL\000"
 4295      2D3E6375 
 4295      7272656E 
 4295      745F6D73 
 4295      6720213D 
 4296 002a 0000     		.space	2
 4297              	.LC8:
 4298 002c 696E6176 		.ascii	"inavlid op_completed_sem\000"
 4298      6C696420 
 4298      6F705F63 
 4298      6F6D706C 
 4298      65746564 
 4299 0045 000000   		.space	3
 4300              	.LC9:
 4301 0048 636F6E6E 		.ascii	"conn->current_msg == NULL\000"
 4301      2D3E6375 
 4301      7272656E 
 4301      745F6D73 
 4301      67203D3D 
 4302              		.section	.rodata.lwip_netconn_do_close_internal.str1.4,"aMS",%progbits,1
ARM GAS  /tmp/ccUeKVGD.s 			page 118


 4303              		.align	2
 4304              	.LC17:
 4305 0000 696E7661 		.ascii	"invalid conn\000"
 4305      6C696420 
 4305      636F6E6E 
 4305      00
 4306 000d 000000   		.space	3
 4307              	.LC18:
 4308 0010 74686973 		.ascii	"this is for tcp netconns only\000"
 4308      20697320 
 4308      666F7220 
 4308      74637020 
 4308      6E657463 
 4309 002e 0000     		.space	2
 4310              	.LC19:
 4311 0030 636F6E6E 		.ascii	"conn must be in state NETCONN_CLOSE\000"
 4311      206D7573 
 4311      74206265 
 4311      20696E20 
 4311      73746174 
 4312              	.LC20:
 4313 0054 70636220 		.ascii	"pcb already closed\000"
 4313      616C7265 
 4313      61647920 
 4313      636C6F73 
 4313      656400
 4314 0067 00       		.space	1
 4315              	.LC21:
 4316 0068 436C6F73 		.ascii	"Closing a listen pcb may not fail!\000"
 4316      696E6720 
 4316      61206C69 
 4316      7374656E 
 4316      20706362 
 4317              		.section	.rodata.lwip_netconn_do_connect.str1.4,"aMS",%progbits,1
 4318              		.align	2
 4319              	.LC33:
 4320 0000 496E7661 		.ascii	"Invalid netconn type\000"
 4320      6C696420 
 4320      6E657463 
 4320      6F6E6E20 
 4320      74797065 
 4321              		.section	.rodata.lwip_netconn_do_connected.str1.4,"aMS",%progbits,1
 4322              		.align	2
 4323              	.LC10:
 4324 0000 636F6E6E 		.ascii	"conn->state == NETCONN_CONNECT\000"
 4324      2D3E7374 
 4324      61746520 
 4324      3D3D204E 
 4324      4554434F 
 4325 001f 00       		.space	1
 4326              	.LC11:
 4327 0020 28636F6E 		.ascii	"(conn->current_msg != NULL) || conn->in_non_blockin"
 4327      6E2D3E63 
 4327      75727265 
 4327      6E745F6D 
 4327      73672021 
 4328 0053 675F636F 		.ascii	"g_connect\000"
ARM GAS  /tmp/ccUeKVGD.s 			page 119


 4328      6E6E6563 
 4328      7400
 4329 005d 000000   		.space	3
 4330              	.LC12:
 4331 0060 626C6F63 		.ascii	"blocking connect state error\000"
 4331      6B696E67 
 4331      20636F6E 
 4331      6E656374 
 4331      20737461 
 4332              		.section	.rodata.lwip_netconn_do_delconn.str1.4,"aMS",%progbits,1
 4333              		.align	2
 4334              	.LC29:
 4335 0000 6E657463 		.ascii	"netconn state error\000"
 4335      6F6E6E20 
 4335      73746174 
 4335      65206572 
 4335      726F7200 
 4336              	.LC30:
 4337 0014 626C6F63 		.ascii	"blocking connect in progress\000"
 4337      6B696E67 
 4337      20636F6E 
 4337      6E656374 
 4337      20696E20 
 4338 0031 000000   		.space	3
 4339              	.LC31:
 4340 0034 616C7265 		.ascii	"already writing or closing\000"
 4340      61647920 
 4340      77726974 
 4340      696E6720 
 4340      6F722063 
 4341 004f 00       		.space	1
 4342              	.LC32:
 4343 0050 73746174 		.ascii	"state!\000"
 4343      652100
 4344              		.section	.rodata.lwip_netconn_do_getaddr.str1.4,"aMS",%progbits,1
 4345              		.align	2
 4346              	.LC35:
 4347 0000 696E7661 		.ascii	"invalid netconn_type\000"
 4347      6C696420 
 4347      6E657463 
 4347      6F6E6E5F 
 4347      74797065 
 4348              		.section	.rodata.lwip_netconn_do_write.str1.4,"aMS",%progbits,1
 4349              		.align	2
 4350              	.LC34:
 4351 0000 6D73672D 		.ascii	"msg->msg.w.len != 0\000"
 4351      3E6D7367 
 4351      2E772E6C 
 4351      656E2021 
 4351      3D203000 
 4352              		.section	.rodata.lwip_netconn_do_writemore.str1.4,"aMS",%progbits,1
 4353              		.align	2
 4354              	.LC13:
 4355 0000 636F6E6E 		.ascii	"conn->state == NETCONN_WRITE\000"
 4355      2D3E7374 
 4355      61746520 
 4355      3D3D204E 
ARM GAS  /tmp/ccUeKVGD.s 			page 120


 4355      4554434F 
 4356 001d 000000   		.space	3
 4357              	.LC14:
 4358 0020 636F6E6E 		.ascii	"conn->pcb.tcp != NULL\000"
 4358      2D3E7063 
 4358      622E7463 
 4358      7020213D 
 4358      204E554C 
 4359 0036 0000     		.space	2
 4360              	.LC15:
 4361 0038 636F6E6E 		.ascii	"conn->write_offset < conn->current_msg->msg.w.len\000"
 4361      2D3E7772 
 4361      6974655F 
 4361      6F666673 
 4361      6574203C 
 4362 006a 0000     		.space	2
 4363              	.LC16:
 4364 006c 6C776970 		.ascii	"lwip_netconn_do_writemore: invalid length!\000"
 4364      5F6E6574 
 4364      636F6E6E 
 4364      5F646F5F 
 4364      77726974 
 4365              		.section	.rodata.netconn_alloc.str1.4,"aMS",%progbits,1
 4366              		.align	2
 4367              	.LC25:
 4368 0000 6E657463 		.ascii	"netconn_alloc: undefined netconn_type\000"
 4368      6F6E6E5F 
 4368      616C6C6F 
 4368      633A2075 
 4368      6E646566 
 4369              		.section	.rodata.netconn_free.str1.4,"aMS",%progbits,1
 4370              		.align	2
 4371              	.LC26:
 4372 0000 50434220 		.ascii	"PCB must be deallocated outside this function\000"
 4372      6D757374 
 4372      20626520 
 4372      6465616C 
 4372      6C6F6361 
 4373 002e 0000     		.space	2
 4374              	.LC27:
 4375 0030 72656376 		.ascii	"recvmbox must be deallocated before calling this fu"
 4375      6D626F78 
 4375      206D7573 
 4375      74206265 
 4375      20646561 
 4376 0063 6E637469 		.ascii	"nction\000"
 4376      6F6E00
 4377 006a 0000     		.space	2
 4378              	.LC28:
 4379 006c 61636365 		.ascii	"acceptmbox must be deallocated before calling this "
 4379      70746D62 
 4379      6F78206D 
 4379      75737420 
 4379      62652064 
 4380 009f 66756E63 		.ascii	"function\000"
 4380      74696F6E 
 4380      00
ARM GAS  /tmp/ccUeKVGD.s 			page 121


 4381              		.section	.rodata.pcb_new.str1.4,"aMS",%progbits,1
 4382              		.align	2
 4383              	.LC5:
 4384 0000 7063625F 		.ascii	"pcb_new: pcb already allocated\000"
 4384      6E65773A 
 4384      20706362 
 4384      20616C72 
 4384      65616479 
 4385              		.section	.rodata.recv_tcp.str1.4,"aMS",%progbits,1
 4386              		.align	2
 4387              	.LC22:
 4388 0000 72656376 		.ascii	"recv_tcp must have a pcb argument\000"
 4388      5F746370 
 4388      206D7573 
 4388      74206861 
 4388      76652061 
 4389 0022 0000     		.space	2
 4390              	.LC23:
 4391 0024 72656376 		.ascii	"recv_tcp must have an argument\000"
 4391      5F746370 
 4391      206D7573 
 4391      74206861 
 4391      76652061 
 4392 0043 00       		.space	1
 4393              	.LC24:
 4394 0044 72656376 		.ascii	"recv_tcp: recv for wrong pcb!\000"
 4394      5F746370 
 4394      3A207265 
 4394      63762066 
 4394      6F722077 
 4395              		.section	.rodata.recv_udp.str1.4,"aMS",%progbits,1
 4396              		.align	2
 4397              	.LC0:
 4398 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/api/api_msg.c\000"
 4398      6C657761 
 4398      7265732F 
 4398      54686972 
 4398      645F5061 
 4399 002f 00       		.space	1
 4400              	.LC1:
 4401 0030 72656376 		.ascii	"recv_udp must have a pcb argument\000"
 4401      5F756470 
 4401      206D7573 
 4401      74206861 
 4401      76652061 
 4402 0052 0000     		.space	2
 4403              	.LC2:
 4404 0054 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 4404      7274696F 
 4404      6E202225 
 4404      73222066 
 4404      61696C65 
 4405              	.LC3:
 4406 007c 72656376 		.ascii	"recv_udp must have an argument\000"
 4406      5F756470 
 4406      206D7573 
 4406      74206861 
ARM GAS  /tmp/ccUeKVGD.s 			page 122


 4406      76652061 
 4407 009b 00       		.space	1
 4408              	.LC4:
 4409 009c 72656376 		.ascii	"recv_udp: recv for wrong pcb!\000"
 4409      5F756470 
 4409      3A207265 
 4409      63762066 
 4409      6F722077 
 4410              		.text
 4411              	.Letext0:
 4412              		.file 2 "/home/warranyu/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/machine/_defa
 4413              		.file 3 "/home/warranyu/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/_stdint.h
 4414              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 4415              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 4416              		.file 6 "/home/warranyu/opt/gcc-arm-none-eabi-7-2018-q2-update/lib/gcc/arm-none-eabi/7.3.1/include
 4417              		.file 7 "/home/warranyu/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/lock.h"
 4418              		.file 8 "/home/warranyu/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/_types.h"
 4419              		.file 9 "/home/warranyu/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/reent.h"
 4420              		.file 10 "/home/warranyu/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/stdlib.h"
 4421              		.file 11 "Middlewares/Third_Party/LwIP/system/arch/cc.h"
 4422              		.file 12 "/home/warranyu/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/time.h"
 4423              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 4424              		.file 14 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 4425              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 4426              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 4427              		.file 17 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 4428              		.file 18 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 4429              		.file 19 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 4430              		.file 20 "Middlewares/Third_Party/LwIP/system/arch/sys_arch.h"
 4431              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 4432              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 4433              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 4434              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 4435              		.file 25 "Middlewares/Third_Party/LwIP/src/include/lwip/netbuf.h"
 4436              		.file 26 "Middlewares/Third_Party/LwIP/src/include/lwip/api.h"
 4437              		.file 27 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 4438              		.file 28 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 4439              		.file 29 "Middlewares/Third_Party/LwIP/src/include/lwip/udp.h"
 4440              		.file 30 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/api_msg.h"
 4441              		.file 31 "Middlewares/Third_Party/LwIP/src/include/lwip/timeouts.h"
 4442              		.file 32 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpip.h"
 4443              		.file 33 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 4444              		.file 34 "Middlewares/Third_Party/LwIP/src/include/lwip/sys.h"
 4445              		.file 35 "/home/warranyu/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/stdio.h"
ARM GAS  /tmp/ccUeKVGD.s 			page 123


DEFINED SYMBOLS
                            *ABS*:0000000000000000 api_msg.c
     /tmp/ccUeKVGD.s:18     .text.recv_udp:0000000000000000 $t
     /tmp/ccUeKVGD.s:24     .text.recv_udp:0000000000000000 recv_udp
     /tmp/ccUeKVGD.s:182    .text.recv_udp:00000000000000b0 $d
     /tmp/ccUeKVGD.s:191    .text.setup_tcp:0000000000000000 $t
     /tmp/ccUeKVGD.s:197    .text.setup_tcp:0000000000000000 setup_tcp
     /tmp/ccUeKVGD.s:245    .text.setup_tcp:0000000000000030 $d
     /tmp/ccUeKVGD.s:1907   .text.recv_tcp:0000000000000000 recv_tcp
     /tmp/ccUeKVGD.s:1804   .text.sent_tcp:0000000000000000 sent_tcp
     /tmp/ccUeKVGD.s:1694   .text.poll_tcp:0000000000000000 poll_tcp
     /tmp/ccUeKVGD.s:374    .text.err_tcp:0000000000000000 err_tcp
     /tmp/ccUeKVGD.s:253    .text.pcb_new:0000000000000000 $t
     /tmp/ccUeKVGD.s:259    .text.pcb_new:0000000000000000 pcb_new
     /tmp/ccUeKVGD.s:360    .text.pcb_new:0000000000000078 $d
     /tmp/ccUeKVGD.s:368    .text.err_tcp:0000000000000000 $t
     /tmp/ccUeKVGD.s:623    .text.err_tcp:0000000000000128 $d
     /tmp/ccUeKVGD.s:635    .text.lwip_netconn_do_connected:0000000000000000 $t
     /tmp/ccUeKVGD.s:641    .text.lwip_netconn_do_connected:0000000000000000 lwip_netconn_do_connected
     /tmp/ccUeKVGD.s:826    .text.lwip_netconn_do_connected:00000000000000e0 $d
     /tmp/ccUeKVGD.s:835    .text.lwip_netconn_do_writemore:0000000000000000 $t
     /tmp/ccUeKVGD.s:841    .text.lwip_netconn_do_writemore:0000000000000000 lwip_netconn_do_writemore
     /tmp/ccUeKVGD.s:1265   .text.lwip_netconn_do_writemore:000000000000020c $d
     /tmp/ccUeKVGD.s:1277   .text.lwip_netconn_do_close_internal:0000000000000000 $t
     /tmp/ccUeKVGD.s:1283   .text.lwip_netconn_do_close_internal:0000000000000000 lwip_netconn_do_close_internal
     /tmp/ccUeKVGD.s:1673   .text.lwip_netconn_do_close_internal:0000000000000208 $d
     /tmp/ccUeKVGD.s:1688   .text.poll_tcp:0000000000000000 $t
     /tmp/ccUeKVGD.s:1791   .text.poll_tcp:0000000000000074 $d
     /tmp/ccUeKVGD.s:1798   .text.sent_tcp:0000000000000000 $t
     /tmp/ccUeKVGD.s:1894   .text.sent_tcp:0000000000000068 $d
     /tmp/ccUeKVGD.s:1901   .text.recv_tcp:0000000000000000 $t
     /tmp/ccUeKVGD.s:2070   .text.recv_tcp:00000000000000bc $d
     /tmp/ccUeKVGD.s:2079   .text.lwip_netconn_do_newconn:0000000000000000 $t
     /tmp/ccUeKVGD.s:2086   .text.lwip_netconn_do_newconn:0000000000000000 lwip_netconn_do_newconn
     /tmp/ccUeKVGD.s:2141   .text.netconn_alloc:0000000000000000 $t
     /tmp/ccUeKVGD.s:2148   .text.netconn_alloc:0000000000000000 netconn_alloc
     /tmp/ccUeKVGD.s:2255   .text.netconn_alloc:0000000000000080 $d
     /tmp/ccUeKVGD.s:2262   .text.netconn_free:0000000000000000 $t
     /tmp/ccUeKVGD.s:2269   .text.netconn_free:0000000000000000 netconn_free
     /tmp/ccUeKVGD.s:2346   .text.netconn_free:0000000000000064 $d
     /tmp/ccUeKVGD.s:2355   .text.netconn_drain:0000000000000000 $t
     /tmp/ccUeKVGD.s:2361   .text.netconn_drain:0000000000000000 netconn_drain
     /tmp/ccUeKVGD.s:2499   .text.netconn_drain:00000000000000a4 $d
                            *COM*:0000000000000001 netconn_aborted
     /tmp/ccUeKVGD.s:2504   .text.accept_function:0000000000000000 $t
     /tmp/ccUeKVGD.s:2510   .text.accept_function:0000000000000000 accept_function
     /tmp/ccUeKVGD.s:2712   .text.accept_function:0000000000000104 $d
     /tmp/ccUeKVGD.s:2717   .text.lwip_netconn_do_delconn:0000000000000000 $t
     /tmp/ccUeKVGD.s:2724   .text.lwip_netconn_do_delconn:0000000000000000 lwip_netconn_do_delconn
     /tmp/ccUeKVGD.s:2977   .text.lwip_netconn_do_delconn:000000000000015c $d
     /tmp/ccUeKVGD.s:2988   .text.lwip_netconn_do_bind:0000000000000000 $t
     /tmp/ccUeKVGD.s:2995   .text.lwip_netconn_do_bind:0000000000000000 lwip_netconn_do_bind
     /tmp/ccUeKVGD.s:3078   .text.lwip_netconn_do_connect:0000000000000000 $t
     /tmp/ccUeKVGD.s:3085   .text.lwip_netconn_do_connect:0000000000000000 lwip_netconn_do_connect
     /tmp/ccUeKVGD.s:3279   .text.lwip_netconn_do_connect:0000000000000104 $d
     /tmp/ccUeKVGD.s:3289   .text.lwip_netconn_do_disconnect:0000000000000000 $t
     /tmp/ccUeKVGD.s:3296   .text.lwip_netconn_do_disconnect:0000000000000000 lwip_netconn_do_disconnect
ARM GAS  /tmp/ccUeKVGD.s 			page 124


     /tmp/ccUeKVGD.s:3358   .text.lwip_netconn_do_listen:0000000000000000 $t
     /tmp/ccUeKVGD.s:3365   .text.lwip_netconn_do_listen:0000000000000000 lwip_netconn_do_listen
     /tmp/ccUeKVGD.s:3557   .text.lwip_netconn_do_listen:00000000000000ec $d
     /tmp/ccUeKVGD.s:3562   .text.lwip_netconn_do_send:0000000000000000 $t
     /tmp/ccUeKVGD.s:3569   .text.lwip_netconn_do_send:0000000000000000 lwip_netconn_do_send
     /tmp/ccUeKVGD.s:3652   .text.lwip_netconn_do_recv:0000000000000000 $t
     /tmp/ccUeKVGD.s:3659   .text.lwip_netconn_do_recv:0000000000000000 lwip_netconn_do_recv
     /tmp/ccUeKVGD.s:3751   .text.lwip_netconn_do_write:0000000000000000 $t
     /tmp/ccUeKVGD.s:3758   .text.lwip_netconn_do_write:0000000000000000 lwip_netconn_do_write
     /tmp/ccUeKVGD.s:3931   .text.lwip_netconn_do_write:00000000000000e8 $d
     /tmp/ccUeKVGD.s:3941   .text.lwip_netconn_do_getaddr:0000000000000000 $t
     /tmp/ccUeKVGD.s:3948   .text.lwip_netconn_do_getaddr:0000000000000000 lwip_netconn_do_getaddr
     /tmp/ccUeKVGD.s:4092   .text.lwip_netconn_do_getaddr:00000000000000b0 $d
     /tmp/ccUeKVGD.s:4099   .text.lwip_netconn_do_close:0000000000000000 $t
     /tmp/ccUeKVGD.s:4106   .text.lwip_netconn_do_close:0000000000000000 lwip_netconn_do_close
     /tmp/ccUeKVGD.s:4280   .text.lwip_netconn_do_close:00000000000000e0 $d
     /tmp/ccUeKVGD.s:4290   .rodata.err_tcp.str1.4:0000000000000000 $d
     /tmp/ccUeKVGD.s:4303   .rodata.lwip_netconn_do_close_internal.str1.4:0000000000000000 $d
     /tmp/ccUeKVGD.s:4318   .rodata.lwip_netconn_do_connect.str1.4:0000000000000000 $d
     /tmp/ccUeKVGD.s:4322   .rodata.lwip_netconn_do_connected.str1.4:0000000000000000 $d
     /tmp/ccUeKVGD.s:4333   .rodata.lwip_netconn_do_delconn.str1.4:0000000000000000 $d
     /tmp/ccUeKVGD.s:4345   .rodata.lwip_netconn_do_getaddr.str1.4:0000000000000000 $d
     /tmp/ccUeKVGD.s:4349   .rodata.lwip_netconn_do_write.str1.4:0000000000000000 $d
     /tmp/ccUeKVGD.s:4353   .rodata.lwip_netconn_do_writemore.str1.4:0000000000000000 $d
     /tmp/ccUeKVGD.s:4366   .rodata.netconn_alloc.str1.4:0000000000000000 $d
     /tmp/ccUeKVGD.s:4370   .rodata.netconn_free.str1.4:0000000000000000 $d
     /tmp/ccUeKVGD.s:4382   .rodata.pcb_new.str1.4:0000000000000000 $d
     /tmp/ccUeKVGD.s:4386   .rodata.recv_tcp.str1.4:0000000000000000 $d
     /tmp/ccUeKVGD.s:4396   .rodata.recv_udp.str1.4:0000000000000000 $d

UNDEFINED SYMBOLS
printf
sys_mbox_valid
memp_malloc
sys_mbox_trypost
pbuf_free
netbuf_delete
tcp_arg
tcp_recv
tcp_sent
tcp_poll
tcp_err
udp_new_ip_type
udp_recv
tcp_new_ip_type
sys_arch_protect
sys_arch_unprotect
sys_sem_valid
sys_sem_signal
tcp_write
tcp_output
tcp_close
tcp_accept
tcp_shutdown
tcp_abort
tcp_recved
sys_mbox_new
ARM GAS  /tmp/ccUeKVGD.s 			page 125


sys_sem_new
sys_mbox_set_invalid
memp_free
sys_mbox_free
sys_sem_free
sys_sem_set_invalid
sys_arch_mbox_tryfetch
udp_remove
sys_mutex_unlock
sys_arch_sem_wait
sys_mutex_lock
lock_tcpip_core
udp_bind
tcp_bind
udp_connect
tcp_connect
udp_disconnect
tcp_listen_with_backlog_and_err
udp_send
udp_sendto
